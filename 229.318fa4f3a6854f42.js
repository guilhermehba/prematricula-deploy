(self.webpackChunkmatricula_online=self.webpackChunkmatricula_online||[]).push([[229],{1229:(se,a,D)=>{"use strict";D.r(a),D.d(a,{ReservaVagaModule:()=>Y});var r=D(4006),z=D(9299),U=D(1357),X=D(6895),$=D(5226),L=D.n($),t=D(4650),v=D(7745),d=D(3795),A=D(529),C=D(3238),O=D(3546),p=D(6709),l=D(8425),y=D(7392),h=D(9549),m=D(1948),f=D(4385);function i(H,ee){1&H&&(t.TgZ(0,"mat-icon"),t._uU(1,"done"),t.qZA())}function s(H,ee){if(1&H){const G=t.EpF();t.TgZ(0,"mat-option",36),t.NdJ("click",function(){const ae=t.CHM(G).$implicit,ie=t.oxw();return t.KtG(ie.bairro=ae.BAIRRO)}),t._uU(1),t.qZA()}if(2&H){const G=ee.$implicit;t.Q6J("value",G.CDBAIRRO),t.xp6(1),t.Oqu(G.BAIRRO)}}function _(H,ee){1&H&&(t.TgZ(0,"mat-error"),t._uU(1,"Campo Obrigat\xf3rio"),t.qZA())}function x(H,ee){if(1&H){const G=t.EpF();t.TgZ(0,"mat-option",36),t.NdJ("click",function(){const ae=t.CHM(G).$implicit,ie=t.oxw();return t.KtG(ie.serie=ae.CURSO)}),t._uU(1),t.qZA()}if(2&H){const G=ee.$implicit;t.Q6J("value",G.CDSERIE),t.xp6(1),t.hij(" ",G.CURSO," ")}}function E(H,ee){1&H&&(t.TgZ(0,"mat-error"),t._uU(1,"Campo Obrigat\xf3rio"),t.qZA())}function k(H,ee){if(1&H){const G=t.EpF();t.TgZ(0,"div",37)(1,"button",38)(2,"span",34),t._uU(3,"cancel"),t.qZA(),t._uU(4,"Cancelar "),t.qZA(),t.TgZ(5,"button",39),t.NdJ("click",function(){t.CHM(G);const K=t.oxw();return t.KtG(K.returnGetVagasEscola())}),t.TgZ(6,"span",34),t._uU(7," search "),t.qZA(),t._uU(8," Buscar Vagas "),t.qZA()()}}function F(H,ee){if(1&H){const G=t.EpF();t.TgZ(0,"div",40)(1,"button",41),t.NdJ("click",function(){t.CHM(G);const K=t.oxw();return t.KtG(K.returnGetVagasEscola())}),t.TgZ(2,"span",34),t._uU(3," search "),t.qZA(),t._uU(4," Buscar Vagas "),t.qZA(),t.TgZ(5,"button",42)(6,"span",34),t._uU(7,"cancel"),t.qZA(),t._uU(8,"Cancelar "),t.qZA()()}if(2&H){const G=t.oxw();t.xp6(1),t.ekj("col-2",!G.isMobile)("col-8",G.isMobile)("col-3",G.isTablet)("m-3",G.isMobile),t.xp6(4),t.ekj("col-2",!G.isMobile)("mr-3",!G.isMobile)("col-8",G.isMobile||G.isTablet)}}function c(H,ee){1&H&&t._uU(0,"Vagas")}function T(H,ee){if(1&H){const G=t.EpF();t.TgZ(0,"mat-radio-group",48,49),t.NdJ("change",function(){const ae=t.CHM(G).$implicit,ie=t.oxw().$implicit,ne=t.oxw();return ne.escola=ie.ESCOLA,ne.turno=ae.TURNO,ne.CDCURSO=ae.CDCURSO,ne.CDESCOLA=ie.CDESCOLA,ne.CDSERIE=ae.CDSERIE,ne.CDTUR=ae.CDTUR,t.KtG(ne.postPreMatricula())}),t.TgZ(2,"p",50)(3,"span",51)(4,"mat-radio-button",52),t._uU(5),t.qZA(),t.TgZ(6,"p",53),t._uU(7),t.qZA()()()()}if(2&H){const G=ee.$implicit,N=t.oxw(2);t.xp6(2),t.ekj("justify-content-end",!N.isMobile)("justify-content-start",N.isMobile),t.xp6(2),t.Q6J("value",G.TURNO),t.xp6(1),t.hij(" ",G.TURNO," "),t.xp6(2),t.hij("(",G.VAGAS,") Vagas")}}function P(H,ee){if(1&H&&(t.TgZ(0,"div",43)(1,"mat-card-header")(2,"mat-card-title",44),t._uU(3),t.ALo(4,"lowercase"),t.qZA(),t.TgZ(5,"mat-card-subtitle",45),t._uU(6),t.ALo(7,"lowercase"),t.qZA()(),t.TgZ(8,"mat-card-content",46)(9,"span",23)(10,"span",24),t._uU(11,"Selecione abaixo o Turno desejado:"),t.qZA()(),t._UZ(12,"p"),t.TgZ(13,"span"),t.YNc(14,T,8,7,"mat-radio-group",47),t.qZA()()()),2&H){const G=ee.$implicit,N=t.oxw();t.xp6(1),t.ekj("text-start",!N.isMobile)("col-6",!N.isMobile)("col-12",N.isMobile),t.xp6(2),t.Oqu(t.lcZ(4,17,G.ESCOLA)),t.xp6(3),t.Oqu(t.lcZ(7,19,G.ENDERECO)),t.xp6(2),t.ekj("col-6",!N.isMobile)("col-12",N.isMobile),t.xp6(1),t.ekj("justify-content-end",1==G.LOTACAO.length&&!N.isMobile)("justify-content-center",G.LOTACAO.length>=2&&!N.isMobile),t.xp6(5),t.Q6J("ngForOf",G.LOTACAO)}}function R(H,ee){1&H&&t._uU(0,"Comprovante")}const B=function(){return["/busca-aluno/lista-alunos"]},w=function(H){return{matriculaonline:H}};class I{constructor(ee,G,N,K,ae,ie){this.router=ee,this.activatedRouter=G,this.service=N,this.deviceDetectorService=K,this._formBuilder=ae,this.http=ie,this.credentials=JSON.parse(sessionStorage.getItem("credentials")),this.base=JSON.parse(sessionStorage.getItem("base")),this.config=JSON.parse(sessionStorage.getItem("config")),this.firstFormGroup=this._formBuilder.group({bairro:["",r.kI.required],serie:["",r.kI.required]}),this.listaVagasEscola="/apiTeste.json",this.matutino="",this.isMobile=!1,this.isTablet=!1,this.ANOBASE=this.config[0].EXERC,this.CDALUNO=this.base[0].CDALUNO,this.doc="../../assets/doc/Get_Started_With_Smallpdf.pdf",this.idCliente=this.activatedRouter.snapshot.queryParams.matriculaonline,this.isMobile=this.deviceDetectorService.isMobile(),this.isTablet=this.deviceDetectorService.isTablet()}ngOnInit(){this.credentials||this.router.navigate([""],{preserveFragment:!0,queryParams:{matriculaonline:this.idCliente}}),this.returnGetBairros()}jsonlog(){console.log([{ANOBASE:this.ANOBASE,CDALUNO:this.CDALUNO,CDCURSO:this.CDCURSO,CDESCOLA:this.CDESCOLA,CDSERIE:this.CDSERIE,CDTUR:this.CDTUR}])}swal(ee,G,N){L().fire({title:"Confirma\xe7\xe3o",html:`<p><span class="col-12"><strong>Escola: </strong><span>${ee}</span></span></p><p><span class="col-12"><strong>S\xe9rie: </strong><span>${G} - ${N}</span></span></p><p class="corRoxa"><strong >Confirmar a reserva de vaga?</strong></p>`,showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sim",confirmButtonColor:"#089944",denyButtonText:"N\xe3o"}).then(K=>{K.isConfirmed||K.isDenied&&L().fire("Confira os dados Selecionados e confirme a reserva!","","info")})}returnGetBairros(){this.service.getListaBairros({ANOBASE:this.config[0].EXERC,IDCLIENTE:this.idCliente}).subscribe(ee=>{this.listaBairros=ee})}returnGetListaSeriePorBairro(){this.service.getListaSeriePorBairro({ANOBASE:this.config[0].EXERC,CDBAIRRO:this.cdBairro,IDCLIENTE:this.idCliente}).subscribe(ee=>{this.listaSeriePorBairro=ee})}returnGetVagasEscola(){this.service.getEscolaPorBairro({ANOBASE:this.config[0].EXERC,CDBAIRRO:this.cdBairro,CDSERIE:this.CDSERIE,IDCLIENTE:this.idCliente}).subscribe(ee=>{this.listaVagasEscola=ee,console.log(this.listaVagasEscola)})}run(){this.router.navigate("lista-alunos")}postPreMatricula(){let ee=`[{ "ANOBASE": ${this.ANOBASE}, "CDALUNO": "${this.CDALUNO}", "CDCURSO":${this.CDCURSO}, "CDESCOLA":${this.CDESCOLA}, "CDSERIE":${this.CDSERIE}, "CDTUR":${this.CDTUR}}]`;this.http.post(ee,{headers:{Authorization:"Basic Z2VwbW9iaWxlOkAjZ2VwbW9iaWxlI0A=",JSON:ee}}),console.log(ee)}static#e=this.\u0275fac=function(G){return new(G||I)(t.Y36(z.F0),t.Y36(z.gz),t.Y36(v.e),t.Y36(d.x0),t.Y36(r.qu),t.Y36(A.eN))};static#t=this.\u0275cmp=t.Xpm({type:I,selectors:[["app-reserva-vaga"]],decls:65,vars:51,consts:[[1,"col-12","d-flex","align-items-center","justify-content-center","text-center"],[1,"mt-4"],[1,"align-items-center","justify-content-center","text-center"],["linear","",3,"orientation","labelPosition"],["stepper",""],["label","Informa\xe7\xf5es"],[3,"formGroup"],["matStepperIcon","edit"],[1,"row","align-items-center","justify-content-center","mb-5"],[1,"col-7","text-start"],["appearance","outline",1,"col-12"],["matInput","","placeholder","","formControlName","bairro","required","",3,"selectionChange"],["inputGetBairro",""],[3,"value","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-7","text-start","mb-5"],["matInput","","placeholder","","formControlName","serie","required","",3,"selectionChange"],["matSer",""],[1,"align-items-center","justify-content-center","mt-5"],["class","col-12 align-items-center justify-content-center row card-hover",4,"ngIf","ngIfElse"],["btnMobile",""],["matStepLabel",""],[1,"col-12","card-disp","mb-3"],[1,"col-12","d-flex"],[1,"m-2"],["class","align-items-center justify-content-between row d-flex card-border m-1",4,"ngFor","ngForOf"],["value","","color","primary",1,"mt-1","mb-3","col-12"],[1,"mt-3"],["matStepperPrevious","",1,"btn","btn-outline-secondary","mr-3"],[1,"btn","btn-success",3,"click"],["src","","frameborder","2",1,"w-100","h-100"],[1,"align-items-center","justify-content-center","col-12"],[1,"col-12","row","align-items-center","justify-content-center","text-center"],[1,"btn","btn-outline-primary","align-items-center","justify-content-center","d-flex","print"],[1,"icon-ergon"],[1,"btn","btn-ergon","align-items-center","justify-content-center","d-flex",3,"routerLink","preserveFragment","queryParams"],[3,"value","click"],[1,"col-12","align-items-center","justify-content-center","row","card-hover"],[1,"col-2","mr-3","btn","btn-outline-secondary","align-items-center","justify-content-center","d-flex"],["matStepperNext","",1,"col-2","btn","btn-warning","align-items-center","justify-content-center","d-flex",3,"click"],[1,"col-12","align-items-center","justify-content-center","row"],["matStepperNext","",1,"m-1","btn","btn-warning","align-items-center","justify-content-center","d-flex",3,"click"],[1,"btn","btn-outline-secondary","align-items-center","justify-content-center","d-flex"],[1,"align-items-center","justify-content-between","row","d-flex","card-border","m-1"],[1,"escolaFormatado"],[1,"mt-2"],[1,""],["class","col-12 align-items-center justify-content-between text-end",3,"change",4,"ngFor","ngForOf"],[1,"col-12","align-items-center","justify-content-between","text-end",3,"change"],["InputEscola1",""],[1,"row"],[1,"col-4"],["color","primary",3,"value"],[2,"color","green"]],template:function(G,N){if(1&G){const K=t.EpF();t.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"mat-card-title"),t._uU(4,"Buscar Vagas"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6," Preencha os campos abaixo para reservar a vaga para o aluno "),t.qZA()(),t.TgZ(7,"mat-card-content",2)(8,"mat-stepper",3,4)(10,"mat-step",5)(11,"form",6),t.YNc(12,i,2,0,"ng-template",7),t.TgZ(13,"div",8)(14,"span",9)(15,"mat-label"),t._uU(16,"Bairro"),t.qZA(),t.TgZ(17,"mat-form-field",10)(18,"mat-select",11,12),t.NdJ("selectionChange",function(){t.CHM(K);const ie=t.MAs(19);return N.cdBairro=ie.value,t.KtG(N.returnGetListaSeriePorBairro())}),t.YNc(20,s,2,2,"mat-option",13),t.qZA(),t.YNc(21,_,2,0,"mat-error",14),t.qZA()(),t.TgZ(22,"span",15)(23,"mat-label"),t._uU(24,"S\xe9rie"),t.qZA(),t.TgZ(25,"mat-form-field",10)(26,"mat-select",16,17),t.NdJ("selectionChange",function(){t.CHM(K);const ie=t.MAs(27);return t.KtG(N.CDSERIE=ie.value)}),t.YNc(28,x,2,2,"mat-option",13),t.qZA(),t.YNc(29,E,2,0,"mat-error",14),t.qZA()()(),t.TgZ(30,"div",18),t.YNc(31,k,9,0,"div",19),t.YNc(32,F,9,14,"ng-template",null,20,t.W1O),t.qZA()()(),t.TgZ(34,"mat-step"),t.YNc(35,c,1,0,"ng-template",21),t.TgZ(36,"div",22)(37,"span"),t._uU(38,"Escolas dispon\xedveis para: "),t._UZ(39,"br"),t._uU(40),t.qZA()(),t.TgZ(41,"span",23)(42,"span",24),t._uU(43,"Selecione abaixo a Escola/Turno desejado"),t.qZA()(),t.YNc(44,P,15,21,"div",25),t.TgZ(45,"mat-checkbox",26),t._uU(46,"Declaro ser respons\xe1vel pela reserva do aluno"),t.qZA(),t.TgZ(47,"div",27)(48,"button",28),t._uU(49," Voltar "),t.qZA(),t.TgZ(50,"button",29),t.NdJ("click",function(){return N.swal(N.escola,N.serie,N.turno)}),t._uU(51," Confirmar "),t.qZA()()(),t.TgZ(52,"mat-step"),t.YNc(53,R,1,0,"ng-template",21),t._UZ(54,"iframe",30),t.TgZ(55,"div",31)(56,"div",32)(57,"button",33)(58,"span",34),t._uU(59,"print"),t.qZA(),t._uU(60,"Imprimir "),t.qZA(),t.TgZ(61,"button",35)(62,"span",34),t._uU(63,"close"),t.qZA(),t._uU(64," Finalizar "),t.qZA()()()()()()()()}if(2&G){const K=t.MAs(19),ae=t.MAs(27),ie=t.MAs(33);t.xp6(1),t.ekj("col-7",!N.isMobile&&!N.isTablet)("col-12",N.isTablet),t.xp6(7),t.Q6J("orientation","horizontal")("labelPosition",N.isMobile?"bottom":"end"),t.xp6(3),t.Q6J("formGroup",N.firstFormGroup),t.xp6(3),t.ekj("col-10",N.isMobile),t.xp6(6),t.Q6J("ngForOf",N.listaBairros),t.xp6(1),t.Q6J("ngIf",""==K.value),t.xp6(1),t.ekj("col-10",N.isMobile),t.xp6(6),t.Q6J("ngForOf",N.listaSeriePorBairro),t.xp6(1),t.Q6J("ngIf",""==ae.value),t.xp6(2),t.Q6J("ngIf",!N.isMobile&&!N.isTablet)("ngIfElse",ie),t.xp6(9),t.hij(" ",N.bairro,""),t.xp6(1),t.ekj("text-center",N.isMobile)("text-start",!N.isMobile),t.xp6(3),t.Q6J("ngForOf",N.listaVagasEscola.ESCOLAS),t.xp6(13),t.ekj("mr-3",!N.isMobile)("col-2",!N.isMobile)("col-5",N.isMobile)("mt-2",N.isMobile)("mb-2",N.isMobile)("mr-2",N.isMobile),t.xp6(4),t.ekj("col-2",!N.isMobile)("col-5",N.isMobile)("mt-2",N.isMobile)("mb-2",N.isMobile)("ml-2",N.isMobile),t.Q6J("routerLink",t.DdM(48,B))("preserveFragment",!0)("queryParams",t.VKq(49,w,N.idCliente))}},dependencies:[X.sg,X.O5,z.rH,C.ey,O.a8,O.dk,O.dn,O.n5,O.$j,p.oG,l.C0,l.VY,l.Vq,l.Ic,l.fd,l.z9,y.Hw,h.TO,h.KE,h.hX,m.VQ,m.U0,f.gD,r._Y,r.JJ,r.JL,r.Q7,r.sg,r.u,X.i8],styles:[".count[_ngcontent-%COMP%]{color:green!important}  .mat-vertical-content{margin:0!important;padding:0!important}  .mat-vertical-content-container{margin:0!important;position:sticky}@media (min-width: 991px){  .mat-horizontal-stepper-header-container{width:50%!important;margin-left:25%;background:#f6f6f6;border-radius:10px}}@media (max-width: 991px){  .mat-horizontal-stepper-header-container{background:#f6f6f6;border-radius:10px;margin-bottom:10px!important}}  .mat-step-icon-state-edit{background-color:#089944!important}  .mat-step-header:hover{background:#f6f6f6!important}  .mat-step-header:focus{background:#f6f6f6!important}  .mat-step-label-selected{color:#ab58b9!important;font-size:16px}input[_ngcontent-%COMP%]:focus{border:#ab58b9 solid}select[_ngcontent-%COMP%]{border:1px #ab58b9 solid!important}  .corRoxa{color:#ab58b9!important}.turnoEscola[_ngcontent-%COMP%]{text-transform:lowercase!important;text-transform:capitalize!important}  .swal2-deny{color:#ab58b9!important;background-color:#fff!important;border:1px solid #ab58b9!important;border-radius:4px!important}.card-hover[_ngcontent-%COMP%]:hover{background-color:#f6f6f6}.print[_ngcontent-%COMP%]{background:#65DDEC}.print[_ngcontent-%COMP%]:hover{background:#57bbc9;color:#00f}  .mat-stepper-vertical-line:before{display:none}.card-disp[_ngcontent-%COMP%]{border:1px solid #f6f6f6;padding:2%;box-shadow:0 0 8px #0000003d!important;border-radius:8px}.escolaFormatado[_ngcontent-%COMP%]{text-transform:capitalize;font-size:17px}"]})}const V=[{path:"",component:I},{path:"lista-alunos",loadChildren:()=>Promise.resolve().then(D.bind(D,6861)).then(H=>H.ListaAlunosModule)}];class Q{static#e=this.\u0275fac=function(G){return new(G||Q)};static#t=this.\u0275mod=t.oAB({type:Q});static#n=this.\u0275inj=t.cJS({imports:[z.Bz.forChild(V),z.Bz]})}var te=D(6036),S=D.t(te,2);D(2813),function b(){return typeof window>"u"}()||function u(H,ee,G){H[ee]=G}(S,"verbosity",te.VerbosityLevel.INFOS);let j=(()=>{class H{}return H.\u0275fac=function(G){return new(G||H)},H.\u0275mod=t.oAB({type:H}),H.\u0275inj=t.cJS({}),H})();var q=D(6134);class Y{static#e=this.\u0275fac=function(G){return new(G||Y)};static#t=this.\u0275mod=t.oAB({type:Y});static#n=this.\u0275inj=t.cJS({imports:[X.ez,Q,U.q,z.Bz,r.u5,r.UX,j,q.ii]})}},6036:function(module,__unused_webpack_exports,__webpack_require__){var _asyncToGenerator=__webpack_require__(7156).default,D;D=()=>(()=>{"use strict";var __webpack_modules__=[,(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VerbosityLevel=a.Util=a.UnknownErrorException=a.UnexpectedResponseException=a.UNSUPPORTED_FEATURES=a.TextRenderingMode=a.StreamType=a.RenderingIntentFlag=a.PermissionFlag=a.PasswordResponses=a.PasswordException=a.PageActionEventType=a.OPS=a.MissingPDFException=a.InvalidPDFException=a.ImageKind=a.IDENTITY_MATRIX=a.FormatError=a.FontType=a.FeatureTest=a.FONT_IDENTITY_MATRIX=a.DocumentActionEventType=a.CMapCompressionType=a.BaseException=a.AnnotationType=a.AnnotationStateModelType=a.AnnotationReviewState=a.AnnotationReplyType=a.AnnotationMode=a.AnnotationMarkedState=a.AnnotationFlag=a.AnnotationFieldFlag=a.AnnotationBorderStyleType=a.AnnotationActionEventType=a.AbortException=void 0,a.arrayByteLength=q,a.arraysToBytes=function Y(re){const J=re.length;if(1===J&&re[0]instanceof Uint8Array)return re[0];let Z=0;for(let fe=0;fe<J;fe++)Z+=q(re[fe]);let le=0;const ue=new Uint8Array(Z);for(let fe=0;fe<J;fe++){let ge=re[fe];ge instanceof Uint8Array||(ge="string"==typeof ge?j(ge):new Uint8Array(ge));const Pe=ge.byteLength;ue.set(ge,le),le+=Pe}return ue},a.assert=function I(re,J){re||w(J)},a.bytesToString=function W(re){("object"!=typeof re||null===re||void 0===re.length)&&w("Invalid argument for bytesToString");const J=re.length,Z=8192;if(J<Z)return String.fromCharCode.apply(null,re);const le=[];for(let ue=0;ue<J;ue+=Z){const fe=Math.min(ue+Z,J),ge=re.subarray(ue,fe);le.push(String.fromCharCode.apply(null,ge))}return le.join("")},a.createPromiseCapability=function we(){const re=Object.create(null);let J=!1;return Object.defineProperty(re,"settled",{get:()=>J}),re.promise=new Promise(function(Z,le){re.resolve=function(ue){J=!0,Z(ue)},re.reject=function(ue){J=!0,le(ue)}}),re},a.createValidAbsoluteUrl=function Q(re,J=null,Z=null){if(!re)return null;try{if(Z&&"string"==typeof re){if(Z.addDefaultProtocol&&re.startsWith("www.")){const ue=re.match(/\./g);ue&&ue.length>=2&&(re=`http://${re}`)}if(Z.tryConvertEncoding)try{re=de(re)}catch{}}const le=J?new URL(re,J):new URL(re);if(function V(re){if(!re)return!1;switch(re.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(le))return le}catch{}return null},a.escapeString=function oe(re){return re.replace(/([()\\\n\r])/g,J=>"\n"===J?"\\n":"\r"===J?"\\r":`\\${J}`)},a.getModificationDate=function be(re=new Date){return[re.getUTCFullYear().toString(),(re.getUTCMonth()+1).toString().padStart(2,"0"),re.getUTCDate().toString().padStart(2,"0"),re.getUTCHours().toString().padStart(2,"0"),re.getUTCMinutes().toString().padStart(2,"0"),re.getUTCSeconds().toString().padStart(2,"0")].join("")},a.getVerbosityLevel=function P(){return c},a.info=function R(re){c>=_.INFOS&&console.log(`Info: ${re}`)},a.isArrayBuffer=function ve(re){return"object"==typeof re&&null!==re&&void 0!==re.byteLength},a.isArrayEqual=function Se(re,J){if(re.length!==J.length)return!1;for(let Z=0,le=re.length;Z<le;Z++)if(re[Z]!==J[Z])return!1;return!0},a.isAscii=function pe(re){return/^[\x00-\x7F]*$/.test(re)},a.objectFromMap=function G(re){const J=Object.create(null);for(const[Z,le]of re)J[Z]=le;return J},a.objectSize=function ee(re){return Object.keys(re).length},a.setVerbosityLevel=function T(re){Number.isInteger(re)&&(c=re)},a.shadow=te,a.string32=function H(re){return String.fromCharCode(re>>24&255,re>>16&255,re>>8&255,255&re)},a.stringToBytes=j,a.stringToPDFString=function he(re){if(re[0]>="\xef"){let Z;if("\xfe"===re[0]&&"\xff"===re[1]?Z="utf-16be":"\xff"===re[0]&&"\xfe"===re[1]?Z="utf-16le":"\xef"===re[0]&&"\xbb"===re[1]&&"\xbf"===re[2]&&(Z="utf-8"),Z)try{const le=new TextDecoder(Z,{fatal:!0}),ue=j(re);return le.decode(ue)}catch(le){B(`stringToPDFString: "${le}".`)}}const J=[];for(let Z=0,le=re.length;Z<le;Z++){const ue=ce[re.charCodeAt(Z)];J.push(ue?String.fromCharCode(ue):re.charAt(Z))}return J.join("")},a.stringToUTF16BEString=function _e(re){const J=["\xfe\xff"];for(let Z=0,le=re.length;Z<le;Z++){const ue=re.charCodeAt(Z);J.push(String.fromCharCode(ue>>8&255),String.fromCharCode(255&ue))}return J.join("")},a.stringToUTF8String=de,a.unreachable=w,a.utf8StringToString=function me(re){return unescape(encodeURIComponent(re))},a.warn=B,D(2),a.IDENTITY_MATRIX=[1,0,0,1,0,0],a.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],a.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},a.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},a.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},a.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},a.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},a.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},a.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},a.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},a.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},a.AnnotationReplyType={GROUP:"Group",REPLY:"R"},a.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},a.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},a.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},a.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},a.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},a.PageActionEventType={O:"PageOpen",C:"PageClose"},a.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},a.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const _={ERRORS:0,WARNINGS:1,INFOS:5};a.VerbosityLevel=_,a.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},a.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},a.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},a.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let c=_.WARNINGS;function B(re){c>=_.WARNINGS&&console.log(`Warning: ${re}`)}function w(re){throw new Error(re)}function te(re,J,Z){return Object.defineProperty(re,J,{value:Z,enumerable:!0,configurable:!0,writable:!1}),Z}const S=function(){function J(Z,le){this.constructor===J&&w("Cannot initialize BaseException."),this.message=Z,this.name=le}return J.prototype=new Error,J.constructor=J,J}();function j(re){"string"!=typeof re&&w("Invalid argument for stringToBytes");const J=re.length,Z=new Uint8Array(J);for(let le=0;le<J;++le)Z[le]=255&re.charCodeAt(le);return Z}function q(re){return void 0!==re.length?re.length:void 0!==re.byteLength?re.byteLength:void w("Invalid argument for arrayByteLength")}a.BaseException=S,a.PasswordException=class e extends S{constructor(J,Z){super(J,"PasswordException"),this.code=Z}},a.UnknownErrorException=class n extends S{constructor(J,Z){super(J,"UnknownErrorException"),this.details=Z}},a.InvalidPDFException=class o extends S{constructor(J){super(J,"InvalidPDFException")}},a.MissingPDFException=class g extends S{constructor(J){super(J,"MissingPDFException")}},a.UnexpectedResponseException=class u extends S{constructor(J,Z){super(J,"UnexpectedResponseException"),this.status=Z}},a.FormatError=class b extends S{constructor(J){super(J,"FormatError")}},a.AbortException=class M extends S{constructor(J){super(J,"AbortException")}},a.FeatureTest=class ae{static get isLittleEndian(){return te(this,"isLittleEndian",function N(){const re=new Uint8Array(4);return re[0]=1,1===new Uint32Array(re.buffer,0,1)[0]}())}static get isEvalSupported(){return te(this,"isEvalSupported",function K(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return te(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const ie=[...Array(256).keys()].map(re=>re.toString(16).padStart(2,"0"));class ne{static makeHexColor(J,Z,le){return`#${ie[J]}${ie[Z]}${ie[le]}`}static scaleMinMax(J,Z){let le;J[0]?(J[0]<0&&(le=Z[0],Z[0]=Z[1],Z[1]=le),Z[0]*=J[0],Z[1]*=J[0],J[3]<0&&(le=Z[2],Z[2]=Z[3],Z[3]=le),Z[2]*=J[3],Z[3]*=J[3]):(le=Z[0],Z[0]=Z[2],Z[2]=le,le=Z[1],Z[1]=Z[3],Z[3]=le,J[1]<0&&(le=Z[2],Z[2]=Z[3],Z[3]=le),Z[2]*=J[1],Z[3]*=J[1],J[2]<0&&(le=Z[0],Z[0]=Z[1],Z[1]=le),Z[0]*=J[2],Z[1]*=J[2]),Z[0]+=J[4],Z[1]+=J[4],Z[2]+=J[5],Z[3]+=J[5]}static transform(J,Z){return[J[0]*Z[0]+J[2]*Z[1],J[1]*Z[0]+J[3]*Z[1],J[0]*Z[2]+J[2]*Z[3],J[1]*Z[2]+J[3]*Z[3],J[0]*Z[4]+J[2]*Z[5]+J[4],J[1]*Z[4]+J[3]*Z[5]+J[5]]}static applyTransform(J,Z){return[J[0]*Z[0]+J[1]*Z[2]+Z[4],J[0]*Z[1]+J[1]*Z[3]+Z[5]]}static applyInverseTransform(J,Z){const le=Z[0]*Z[3]-Z[1]*Z[2];return[(J[0]*Z[3]-J[1]*Z[2]+Z[2]*Z[5]-Z[4]*Z[3])/le,(-J[0]*Z[1]+J[1]*Z[0]+Z[4]*Z[1]-Z[5]*Z[0])/le]}static getAxialAlignedBoundingBox(J,Z){const le=ne.applyTransform(J,Z),ue=ne.applyTransform(J.slice(2,4),Z),fe=ne.applyTransform([J[0],J[3]],Z),ge=ne.applyTransform([J[2],J[1]],Z);return[Math.min(le[0],ue[0],fe[0],ge[0]),Math.min(le[1],ue[1],fe[1],ge[1]),Math.max(le[0],ue[0],fe[0],ge[0]),Math.max(le[1],ue[1],fe[1],ge[1])]}static inverseTransform(J){const Z=J[0]*J[3]-J[1]*J[2];return[J[3]/Z,-J[1]/Z,-J[2]/Z,J[0]/Z,(J[2]*J[5]-J[4]*J[3])/Z,(J[4]*J[1]-J[5]*J[0])/Z]}static apply3dTransform(J,Z){return[J[0]*Z[0]+J[1]*Z[1]+J[2]*Z[2],J[3]*Z[0]+J[4]*Z[1]+J[5]*Z[2],J[6]*Z[0]+J[7]*Z[1]+J[8]*Z[2]]}static singularValueDecompose2dScale(J){const Z=[J[0],J[2],J[1],J[3]],le=J[0]*Z[0]+J[1]*Z[2],ge=J[2]*Z[1]+J[3]*Z[3],Pe=(le+ge)/2,xe=Math.sqrt((le+ge)**2-4*(le*ge-(J[2]*Z[0]+J[3]*Z[2])*(J[0]*Z[1]+J[1]*Z[3])))/2,ye=Pe-xe||1;return[Math.sqrt(Pe+xe||1),Math.sqrt(ye)]}static normalizeRect(J){const Z=J.slice(0);return J[0]>J[2]&&(Z[0]=J[2],Z[2]=J[0]),J[1]>J[3]&&(Z[1]=J[3],Z[3]=J[1]),Z}static intersect(J,Z){const le=Math.max(Math.min(J[0],J[2]),Math.min(Z[0],Z[2])),ue=Math.min(Math.max(J[0],J[2]),Math.max(Z[0],Z[2]));if(le>ue)return null;const fe=Math.max(Math.min(J[1],J[3]),Math.min(Z[1],Z[3])),ge=Math.min(Math.max(J[1],J[3]),Math.max(Z[1],Z[3]));return fe>ge?null:[le,fe,ue,ge]}static bezierBoundingBox(J,Z,le,ue,fe,ge,Pe,xe){const Ee=[],ye=[[],[]];let Me,Te,ke,Ae,Le,Fe,De,Ie;for(let Ne=0;Ne<2;++Ne)if(0===Ne?(Te=6*J-12*le+6*fe,Me=-3*J+9*le-9*fe+3*Pe,ke=3*le-3*J):(Te=6*Z-12*ue+6*ge,Me=-3*Z+9*ue-9*ge+3*xe,ke=3*ue-3*Z),Math.abs(Me)<1e-12){if(Math.abs(Te)<1e-12)continue;Ae=-ke/Te,0<Ae&&Ae<1&&Ee.push(Ae)}else De=Te*Te-4*ke*Me,Ie=Math.sqrt(De),!(De<0)&&(Le=(-Te+Ie)/(2*Me),0<Le&&Le<1&&Ee.push(Le),Fe=(-Te-Ie)/(2*Me),0<Fe&&Fe<1&&Ee.push(Fe));let Ce,Re=Ee.length;const Oe=Re;for(;Re--;)Ae=Ee[Re],Ce=1-Ae,ye[0][Re]=Ce*Ce*Ce*J+3*Ce*Ce*Ae*le+3*Ce*Ae*Ae*fe+Ae*Ae*Ae*Pe,ye[1][Re]=Ce*Ce*Ce*Z+3*Ce*Ce*Ae*ue+3*Ce*Ae*Ae*ge+Ae*Ae*Ae*xe;return ye[0][Oe]=J,ye[1][Oe]=Z,ye[0][Oe+1]=Pe,ye[1][Oe+1]=xe,ye[0].length=ye[1].length=Oe+2,[Math.min(...ye[0]),Math.min(...ye[1]),Math.max(...ye[0]),Math.max(...ye[1])]}}a.Util=ne;const ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function de(re){return decodeURIComponent(escape(re))}},(se,a,D)=>{D(3)},(se,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isNodeJS=void 0;const D=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);a.isNodeJS=D},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:se,NodeCMapReaderFactory:a,NodeStandardFontDataFactory:D}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=se,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=a,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=D}function setPDFNetworkStreamFactory(se){createPDFNetworkStream=se}function getDocument(se){const a=new PDFDocumentLoadingTask;let D;if("string"==typeof se||se instanceof URL)D={url:se};else if((0,_util.isArrayBuffer)(se))D={data:se};else if(se instanceof PDFDataRangeTransport)D={range:se};else{if("object"!=typeof se)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!se.url&&!se.data&&!se.range)throw new Error("Invalid parameter object: need either .data, .range or .url");D=se}const r=Object.create(null);let z=null,U=null;for(const $ in D){const L=D[$];switch($){case"url":if(typeof window<"u")try{r[$]=new URL(L,window.location).href;continue}catch(t){(0,_util.warn)(`Cannot create valid URL: "${t}".`)}else if("string"==typeof L||L instanceof URL){r[$]=L.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":z=L;continue;case"worker":U=L;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&L instanceof Buffer)r[$]=new Uint8Array(L);else{if(L instanceof Uint8Array)break;if("string"==typeof L)r[$]=(0,_util.stringToBytes)(L);else if("object"!=typeof L||null===L||isNaN(L.length)){if(!(0,_util.isArrayBuffer)(L))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");r[$]=new Uint8Array(L)}else r[$]=new Uint8Array(L)}continue}r[$]=L}if(r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.fontExtraProperties=!0===r.fontExtraProperties,r.pdfBug=!0===r.pdfBug,r.enableXfa=!0===r.enableXfa,(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof r.docBaseUrl||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1),"string"!=typeof r.cMapUrl&&(r.cMapUrl=null),"string"!=typeof r.standardFontDataUrl&&(r.standardFontDataUrl=null),"boolean"!=typeof r.useWorkerFetch&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof r.useSystemFonts&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),("object"!=typeof r.ownerDocument||null===r.ownerDocument)&&(r.ownerDocument=globalThis.document),"boolean"!=typeof r.disableRange&&(r.disableRange=!1),"boolean"!=typeof r.disableStream&&(r.disableStream=!1),"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!U){const $={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};U=$.port?_PDFWorker.fromPort($):new _PDFWorker($),a._worker=U}const X=a.docId;return U.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const $=_fetchDocument(U,r,z,X),L=new Promise(function(t){let v;z?v=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},z):r.data||(v=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),t(v)});return Promise.all([$,L]).then(function([t,v]){if(a.destroyed)throw new Error("Loading aborted");const d=new _message_handler.MessageHandler(X,t,U.port),A=new WorkerTransport(d,a,v,r);a._transport=A,d.send("Ready",null)})}).catch(a._capability.reject),a}function _fetchDocument(se,a,D,r){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(se,a,D,r){if(se.destroyed)throw new Error("Worker was destroyed");D&&(a.length=D.length,a.initialData=D.initialData,a.progressiveDone=D.progressiveDone,a.contentDispositionFilename=D.contentDispositionFilename);const z=yield se.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.14.305",source:{data:a.data,url:a.url,password:a.password,disableAutoFetch:a.disableAutoFetch,rangeChunkSize:a.rangeChunkSize,length:a.length},maxImageSize:a.maxImageSize,disableFontFace:a.disableFontFace,docBaseUrl:a.docBaseUrl,ignoreErrors:a.ignoreErrors,isEvalSupported:a.isEvalSupported,fontExtraProperties:a.fontExtraProperties,enableXfa:a.enableXfa,useSystemFonts:a.useSystemFonts,cMapUrl:a.useWorkerFetch?a.cMapUrl:null,standardFontDataUrl:a.useWorkerFetch?a.standardFontDataUrl:null});if(se.destroyed)throw new Error("Worker was destroyed");return z})).apply(this,arguments)}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var a=this;return _asyncToGenerator(function*(){a.destroyed=!0,yield a._transport?.destroy(),a._transport=null,a._worker&&(a._worker.destroy(),a._worker=null)})()}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,D,r=!1,z=null){this.length=a,this.initialData=D,this.progressiveDone=r,this.contentDispositionFilename=z,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,D){for(const r of this._rangeListeners)r(a,D)}onDataProgress(a,D){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(a,D)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const D of this._progressiveReadListeners)D(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,D){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,D){var z,r=this;this._pdfInfo=a,this._transport=D,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(z=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),r.stats||{streamTypes:{},fontTypes:{}}}),function(){return z.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(a,D,r,z,U=!1){this._pageIndex=a,this._pageInfo=D,this._ownerDocument=z,this._transport=r,this._stats=U?new _display_utils.StatTimer:null,this._pdfBug=U,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:D=this.rotate,offsetX:r=0,offsetY:z=0,dontFlip:U=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:D,offsetX:r,offsetY:z,dontFlip:U})}getAnnotations({intent:a="display"}={}){const D=this._transport.getRenderingIntent(a);let r=this._annotationPromises.get(D.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,D.renderingIntent),this._annotationPromises.set(D.cacheKey,r),r=r.then(z=>{for(const U of z)void 0!==U.titleObj&&Object.defineProperty(U,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),U.titleObj.str)}),void 0!==U.contentsObj&&Object.defineProperty(U,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),U.contentsObj.str)});return z})),r}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var a=this;return _asyncToGenerator(function*(){return a._transport._htmlForXfa?.children[a._pageIndex]||null})()}render({canvasContext:a,viewport:D,intent:r="display",annotationMode:z=_util.AnnotationMode.ENABLE,transform:U=null,imageLayer:X=null,canvasFactory:$=null,background:L=null,optionalContentConfigPromise:t=null,annotationCanvasMap:v=null,pageColors:d=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&z===_util.AnnotationMode.ENABLE&&(z=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&z===_util.AnnotationMode.ENABLE&&(z=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const A=this._transport.getRenderingIntent(r,z);this.pendingCleanup=!1,t||(t=this._transport.getOptionalContentConfig());let C=this._intentStates.get(A.cacheKey);C||(C=Object.create(null),this._intentStates.set(A.cacheKey,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const O=$||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),p=!!(A.renderingIntent&_util.RenderingIntentFlag.PRINT);C.displayReadyCapability||(C.displayReadyCapability=(0,_util.createPromiseCapability)(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(A));const l=m=>{C.renderTasks.delete(y),(this.cleanupAfterRender||p)&&(this.pendingCleanup=!0),this._tryCleanup(),m?(y.capability.reject(m),this._abortOperatorList({intentState:C,reason:m instanceof Error?m:new Error(m)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},y=new InternalRenderTask({callback:l,params:{canvasContext:a,viewport:D,transform:U,imageLayer:X,background:L},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:v,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:O,useRequestAnimationFrame:!p,pdfBug:this._pdfBug,pageColors:d});(C.renderTasks||=new Set).add(y);const h=y.task;return Promise.all([C.displayReadyCapability.promise,t]).then(([m,f])=>{this.pendingCleanup?l():(this._stats&&this._stats.time("Rendering"),y.initializeGraphics({transparency:m,optionalContentConfig:f}),y.operatorListChanged())}).catch(l),h}getOperatorList({intent:a="display",annotationMode:D=_util.AnnotationMode.ENABLE}={}){const z=this._transport.getRenderingIntent(a,D,!0);let X,U=this._intentStates.get(z.cacheKey);return U||(U=Object.create(null),this._intentStates.set(z.cacheKey,U)),U.opListReadCapability||(X=Object.create(null),X.operatorListChanged=function r(){U.operatorList.lastChunk&&(U.opListReadCapability.resolve(U.operatorList),U.renderTasks.delete(X))},U.opListReadCapability=(0,_util.createPromiseCapability)(),(U.renderTasks||=new Set).add(X),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(z)),U.opListReadCapability.promise}streamTextContent({disableCombineTextItems:a=!1,includeMarkedContent:D=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==a,includeMarkedContent:!0===D},{highWaterMark:100,size:z=>z.items.length})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const D=this.streamTextContent(a);return new Promise(function(r,z){const X=D.getReader(),$={items:[],styles:Object.create(null)};!function U(){X.read().then(function({value:L,done:t}){t?r($):(Object.assign($.styles,L.styles),$.items.push(...L.items),U())},z)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const a=[];for(const D of this._intentStates.values())if(this._abortOperatorList({intentState:D,reason:new Error("Page was destroyed."),force:!0}),!D.opListReadCapability)for(const r of D.renderTasks)a.push(r.completed),r.cancel();this.objs.clear();for(const D of this._bitmaps)D.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(a)}cleanup(a=!1){return this.pendingCleanup=!0,this._tryCleanup(a)}_tryCleanup(a=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:D,operatorList:r}of this._intentStates.values())if(D.size>0||!r.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,a&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const D of this._bitmaps)D.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(a,D){const r=this._intentStates.get(D);!r||(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(a))}_renderPageChunk(a,D){for(let r=0,z=a.length;r<z;r++)D.operatorList.fnArray.push(a.fnArray[r]),D.operatorList.argsArray.push(a.argsArray[r]);D.operatorList.lastChunk=a.lastChunk;for(const r of D.renderTasks)r.operatorListChanged();a.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:a,cacheKey:D}){const z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:D,annotationStorage:a&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),U=this._intentStates.get(D);U.streamReader=z;const X=()=>{z.read().then(({value:$,done:L})=>{L?U.streamReader=null:this._transport.destroyed||(this._renderPageChunk($,U),X())},$=>{if(U.streamReader=null,!this._transport.destroyed){if(U.operatorList){U.operatorList.lastChunk=!0;for(const L of U.renderTasks)L.operatorListChanged();this._tryCleanup()}if(U.displayReadyCapability)U.displayReadyCapability.reject($);else{if(!U.opListReadCapability)throw $;U.opListReadCapability.reject($)}}})};X()}_abortOperatorList({intentState:a,reason:D,force:r=!1}){if(a.streamReader){if(!r){if(a.renderTasks.size>0)return;if(D instanceof _display_utils.RenderingCancelledException)return void(a.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:a,reason:D,force:!0}),a.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(a.streamReader.cancel(new _util.AbortException(D.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[z,U]of this._intentStates)if(U===a){this._intentStates.delete(z);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(a,D){const r={data:structuredClone(a,D)};this._deferred.then(()=>{for(const z of this._listeners)z.call(this,r)})}addEventListener(a,D){this._listeners.push(D)}removeEventListener(a,D){const r=this._listeners.indexOf(D);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const se=document?.currentScript?.src;se&&(PDFWorkerUtil.fallbackWorkerSrc=se.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(se,a){let D;try{if(D=new URL(se),!D.origin||"null"===D.origin)return!1}catch{return!1}const r=new URL(a,D);return D.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(se){return URL.createObjectURL(new Blob([`importScripts("${se}");`]))};class _PDFWorker{static#workerPorts=new WeakMap;constructor({name:se=null,port:a=null,verbosity:D=(0,_util.getVerbosityLevel)()}={}){if(a&&_PDFWorker.#workerPorts.has(a))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=se,this.destroyed=!1,this.verbosity=D,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a)return _PDFWorker.#workerPorts.set(a,this),void this._initializeFromPort(a);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(se){this._port=se,this._messageHandler=new _message_handler.MessageHandler("main","worker",se),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let se=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,se)||(se=PDFWorkerUtil.createCDNWrapper(new URL(se,window.location).href));const a=new Worker(se),D=new _message_handler.MessageHandler("main","worker",a),r=()=>{a.removeEventListener("error",z),D.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},z=()=>{this._webWorker||r()};a.addEventListener("error",z),D.on("test",X=>{a.removeEventListener("error",z),this.destroyed?r():X?(this._messageHandler=D,this._port=a,this._webWorker=a,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),D.destroy(),a.terminate())}),D.on("ready",X=>{if(a.removeEventListener("error",z),this.destroyed)r();else try{U()}catch{this._setupFakeWorker()}});const U=()=>{const X=new Uint8Array;D.send("test",X,[X.buffer])};return void U()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(se=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const a=new LoopbackPort;this._port=a;const D="fake"+PDFWorkerUtil.fakeWorkerId++,r=new _message_handler.MessageHandler(D+"_worker",D,a);se.setup(r,a);const z=new _message_handler.MessageHandler(D,D+"_worker",a);this._messageHandler=z,this._readyCapability.resolve(),z.send("configure",{verbosity:this.verbosity})}).catch(se=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${se.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_PDFWorker.#workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(se){if(!se?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#workerPorts.has(se.port)?this.#workerPorts.get(se.port):new _PDFWorker(se)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function se(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#e=null;#t=new Map;#n=new Map;#r=null;constructor(a,D,r,z){this.messageHandler=a,this.loadingTask=D,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:D.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:z.ownerDocument,styleElement:z.styleElement}),this._params=z,z.useWorkerFetch||(this.CMapReaderFactory=new z.CMapReaderFactory({baseUrl:z.cMapUrl,isCompressed:z.cMapPacked}),this.StandardFontDataFactory=new z.StandardFontDataFactory({baseUrl:z.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#e}getRenderingIntent(a,D=_util.AnnotationMode.ENABLE,r=!1){let z=_util.RenderingIntentFlag.DISPLAY,U="";switch(a){case"any":z=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":z=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(D){case _util.AnnotationMode.DISABLE:z+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:z+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:z+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,U=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${D}`)}return r&&(z+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:z,cacheKey:`${z}_${U}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const r of this.#t.values())a.push(r._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const D=this.messageHandler.sendWithPromise("Terminate",null);return a.push(D),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#r=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:D}=this;a.on("GetReader",(r,z)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=U=>{this._lastProgress={loaded:U.loaded,total:U.total}},z.onPull=()=>{this._fullReader.read().then(function({value:U,done:X}){X?z.close():((0,_util.assert)((0,_util.isArrayBuffer)(U),"GetReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(U),1,[U]))}).catch(U=>{z.error(U)})},z.onCancel=U=>{this._fullReader.cancel(U),z.ready.catch(X=>{if(!this.destroyed)throw X})}}),a.on("ReaderHeadersReady",r=>{const z=(0,_util.createPromiseCapability)(),U=this._fullReader;return U.headersReady.then(()=>{(!U.isStreamingSupported||!U.isRangeSupported)&&(this._lastProgress&&D.onProgress?.(this._lastProgress),U.onProgress=X=>{D.onProgress?.({loaded:X.loaded,total:X.total})}),z.resolve({isStreamingSupported:U.isStreamingSupported,isRangeSupported:U.isRangeSupported,contentLength:U.contentLength})},z.reject),z.promise}),a.on("GetRangeReader",(r,z)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const U=this._networkStream.getRangeReader(r.begin,r.end);U?(z.onPull=()=>{U.read().then(function({value:X,done:$}){$?z.close():((0,_util.assert)((0,_util.isArrayBuffer)(X),"GetRangeReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(X),1,[X]))}).catch(X=>{z.error(X)})},z.onCancel=X=>{U.cancel(X),z.ready.catch($=>{if(!this.destroyed)throw $})}):z.close()}),a.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,D._capability.resolve(new PDFDocumentProxy(r,this))}),a.on("DocException",function(r){let z;switch(r.name){case"PasswordException":z=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":z=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":z=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":z=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":z=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}D._capability.reject(z)}),a.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),D.onPassword){const z=U=>{U instanceof Error?this._passwordCapability.reject(U):this._passwordCapability.resolve({password:U})};try{D.onPassword(z,r.code)}catch(U){this._passwordCapability.reject(U)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),a.on("DataLoaded",r=>{D.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),a.on("StartRenderPage",r=>{this.destroyed||this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),a.on("commonobj",([r,z,U])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(z){case"Font":const X=this._params;if("error"in U){const t=U.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(r,t);break}let $=null;X.pdfBug&&globalThis.FontInspector?.enabled&&($={registerFont(t,v){globalThis.FontInspector.fontAdded(t,v)}});const L=new _font_loader.FontFaceObject(U,{isEvalSupported:X.isEvalSupported,disableFontFace:X.disableFontFace,ignoreErrors:X.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:$});this.fontLoader.bind(L).catch(t=>a.sendWithPromise("FontFallback",{id:r})).finally(()=>{!X.fontExtraProperties&&L.data&&(L.data=null),this.commonObjs.resolve(r,L)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,U);break;default:throw new Error(`Got unknown common object type ${z}`)}}),a.on("obj",([r,z,U,X])=>{if(this.destroyed)return;const $=this.#t.get(z);if(!$.objs.has(r))switch(U){case"Image":$.objs.resolve(r,X);const L=8e6;if(X){let t;if(X.bitmap){const{bitmap:v,width:d,height:A}=X;t=d*A*4,$._bitmaps.add(v)}else t=X.data?.length||0;t>L&&($.cleanupAfterRender=!0)}break;case"Pattern":$.objs.resolve(r,X);break;default:throw new Error(`Got unknown object type ${U}`)}}),a.on("DocProgress",r=>{this.destroyed||D.onProgress?.({loaded:r.loaded,total:r.total})}),a.on("DocStats",r=>{this.destroyed||(this.#e=Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),a.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),a.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:a}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(a)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const D=a-1,r=this.#n.get(D);if(r)return r;const z=this.messageHandler.sendWithPromise("GetPage",{pageIndex:D}).then(U=>{if(this.destroyed)throw new Error("Transport destroyed");const X=new PDFPageProxy(D,U,this,this._params.ownerDocument,this._params.pdfBug);return this.#t.set(D,X),X});return this.#n.set(D,z),z}getPageIndex(a){return"object"!=typeof a||null===a||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,D){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:D})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return"string"!=typeof a?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#r||=this.messageHandler.sendWithPromise("GetMetadata",null).then(a=>({info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(a=!1){var D=this;return _asyncToGenerator(function*(){if(yield D.messageHandler.sendWithPromise("Cleanup",null),!D.destroyed){for(const r of D.#t.values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);D.commonObjs.clear(),a||D.fontLoader.clear(),D.#r=null,D._getFieldObjectsPromise=null,D._hasJSActionsPromise=null}})()}get loadingParams(){const a=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a.disableAutoFetch,enableXfa:a.enableXfa})}}class PDFObjects{#e=Object.create(null);#t(a){return this.#e[a]||(this.#e[a]={capability:(0,_util.createPromiseCapability)(),data:null})}get(a,D=null){if(D){const z=this.#t(a);return z.capability.promise.then(()=>D(z.data)),null}const r=this.#e[a];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${a}.`);return r.data}has(a){return this.#e[a]?.capability.settled||!1}resolve(a,D=null){const r=this.#t(a);r.data=D,r.capability.resolve()}clear(){this.#e=Object.create(null)}}class RenderTask{constructor(a){this._internalRenderTask=a,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:a,params:D,objs:r,commonObjs:z,annotationCanvasMap:U,operatorList:X,pageIndex:$,canvasFactory:L,useRequestAnimationFrame:t=!1,pdfBug:v=!1,pageColors:d=null}){this.callback=a,this.params=D,this.objs=r,this.commonObjs=z,this.annotationCanvasMap=U,this.operatorListIdx=null,this.operatorList=X,this._pageIndex=$,this.canvasFactory=L,this._pdfBug=v,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===t&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=D.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:D}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:z,transform:U,imageLayer:X,background:$}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,X,D,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:U,viewport:z,transparency:a,background:$}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(a=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var a=this;return _asyncToGenerator(function*(){a.cancelled||(a.operatorListIdx=a.gfx.executeOperatorList(a.operatorList,a.operatorListIdx,a._continueBound,a.stepper),a.operatorListIdx===a.operatorList.argsArray.length&&(a.running=!1,a.operatorList.lastChunk&&(a.gfx.endDrawing(),a._canvas&&InternalRenderTask.#e.delete(a._canvas),a.callback())))})()}}const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StatTimer=a.RenderingCancelledException=a.PixelsPerInch=a.PageViewport=a.PDFDateString=a.DOMStandardFontDataFactory=a.DOMSVGFactory=a.DOMCanvasFactory=a.DOMCMapReaderFactory=void 0,a.deprecated=function s(k){console.log("Deprecated API usage: "+k)},a.getFilenameFromUrl=function y(k){const F=k.indexOf("#"),c=k.indexOf("?"),T=Math.min(F>0?F:k.length,c>0?c:k.length);return k.substring(k.lastIndexOf("/",T)+1,T)},a.getPdfFilenameFromUrl=function h(k,F="document.pdf"){if("string"!=typeof k)return F;if(p(k))return(0,z.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),F;const T=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,P=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(k);let R=T.exec(P[1])||T.exec(P[2])||T.exec(P[3]);if(R&&(R=R[0],R.includes("%")))try{R=T.exec(decodeURIComponent(R))[0]}catch{}return R||F},a.getXfaPageViewport=function E(k,{scale:F=1,rotation:c=0}){const{width:T,height:P}=k.attributes.style,R=[0,0,parseInt(T),parseInt(P)];return new C({viewBox:R,scale:F,rotation:c})},a.isDataScheme=p,a.isPdfFile=function l(k){return"string"==typeof k&&/\.pdf$/i.test(k)},a.isValidFetchUrl=f,a.loadScript=function i(k,F=!1){return new Promise((c,T)=>{const P=document.createElement("script");P.src=k,P.onload=function(R){F&&P.remove(),c(R)},P.onerror=function(){T(new Error(`Cannot load script at: ${P.src}`))},(document.head||document.documentElement).appendChild(P)})};var r=D(6),z=D(1);function L(k){return t.apply(this,arguments)}function t(){return(t=_asyncToGenerator(function*(k,F=!1){if(f(k,document.baseURI)){const c=yield fetch(k);if(!c.ok)throw new Error(c.statusText);return F?new Uint8Array(yield c.arrayBuffer()):(0,z.stringToBytes)(yield c.text())}return new Promise((c,T)=>{const P=new XMLHttpRequest;P.open("GET",k,!0),F&&(P.responseType="arraybuffer"),P.onreadystatechange=()=>{if(P.readyState===XMLHttpRequest.DONE){if(200===P.status||0===P.status){let R;if(F&&P.response?R=new Uint8Array(P.response):!F&&P.responseText&&(R=(0,z.stringToBytes)(P.responseText)),R)return void c(R)}T(new Error(P.statusText))}},P.send(null)})})).apply(this,arguments)}a.PixelsPerInch=class X{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF},a.DOMCanvasFactory=class $ extends r.BaseCanvasFactory{constructor({ownerDocument:F=globalThis.document}={}){super(),this._document=F}_createCanvas(F,c){const T=this._document.createElement("canvas");return T.width=F,T.height=c,T}},a.DOMCMapReaderFactory=class v extends r.BaseCMapReaderFactory{_fetchData(F,c){return L(F,this.isCompressed).then(T=>({cMapData:T,compressionType:c}))}},a.DOMStandardFontDataFactory=class d extends r.BaseStandardFontDataFactory{_fetchData(F){return L(F,!0)}},a.DOMSVGFactory=class A extends r.BaseSVGFactory{_createSVG(F){return document.createElementNS("http://www.w3.org/2000/svg",F)}};class C{constructor({viewBox:F,scale:c,rotation:T,offsetX:P=0,offsetY:R=0,dontFlip:B=!1}){this.viewBox=F,this.scale=c,this.rotation=T,this.offsetX=P,this.offsetY=R;const w=(F[2]+F[0])/2,I=(F[3]+F[1])/2;let V,Q,te,S,e,n,o,g;switch((T%=360)<0&&(T+=360),T){case 180:V=-1,Q=0,te=0,S=1;break;case 90:V=0,Q=1,te=1,S=0;break;case 270:V=0,Q=-1,te=-1,S=0;break;case 0:V=1,Q=0,te=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}B&&(te=-te,S=-S),0===V?(e=Math.abs(I-F[1])*c+P,n=Math.abs(w-F[0])*c+R,o=Math.abs(F[3]-F[1])*c,g=Math.abs(F[2]-F[0])*c):(e=Math.abs(w-F[0])*c+P,n=Math.abs(I-F[1])*c+R,o=Math.abs(F[2]-F[0])*c,g=Math.abs(F[3]-F[1])*c),this.transform=[V*c,Q*c,te*c,S*c,e-V*c*w-te*c*I,n-Q*c*w-S*c*I],this.width=o,this.height=g}clone({scale:F=this.scale,rotation:c=this.rotation,offsetX:T=this.offsetX,offsetY:P=this.offsetY,dontFlip:R=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:F,rotation:c,offsetX:T,offsetY:P,dontFlip:R})}convertToViewportPoint(F,c){return z.Util.applyTransform([F,c],this.transform)}convertToViewportRectangle(F){const c=z.Util.applyTransform([F[0],F[1]],this.transform),T=z.Util.applyTransform([F[2],F[3]],this.transform);return[c[0],c[1],T[0],T[1]]}convertToPdfPoint(F,c){return z.Util.applyInverseTransform([F,c],this.transform)}}function p(k){const F=k.length;let c=0;for(;c<F&&""===k[c].trim();)c++;return"data:"===k.substring(c,c+5).toLowerCase()}function f(k,F){try{const{protocol:c}=F?new URL(k,F):new URL(k);return"http:"===c||"https:"===c}catch{return!1}}let _;a.PageViewport=C,a.RenderingCancelledException=class O extends z.BaseException{constructor(F,c){super(F,"RenderingCancelledException"),this.type=c}},a.StatTimer=class m{constructor(){this.started=Object.create(null),this.times=[]}time(F){F in this.started&&(0,z.warn)(`Timer is already running for ${F}`),this.started[F]=Date.now()}timeEnd(F){F in this.started||(0,z.warn)(`Timer has not been started for ${F}`),this.times.push({name:F,start:this.started[F],end:Date.now()}),delete this.started[F]}toString(){const F=[];let c=0;for(const T of this.times){const P=T.name;P.length>c&&(c=P.length)}for(const T of this.times){const P=T.end-T.start;F.push(`${T.name.padEnd(c)} ${P}ms\n`)}return F.join("")}},a.PDFDateString=class x{static toDateObject(F){if(!F||"string"!=typeof F)return null;_||(_=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const c=_.exec(F);if(!c)return null;const T=parseInt(c[1],10);let P=parseInt(c[2],10);P=P>=1&&P<=12?P-1:0;let R=parseInt(c[3],10);R=R>=1&&R<=31?R:1;let B=parseInt(c[4],10);B=B>=0&&B<=23?B:0;let w=parseInt(c[5],10);w=w>=0&&w<=59?w:0;let I=parseInt(c[6],10);I=I>=0&&I<=59?I:0;const V=c[7]||"Z";let Q=parseInt(c[8],10);Q=Q>=0&&Q<=23?Q:0;let te=parseInt(c[9],10)||0;return te=te>=0&&te<=59?te:0,"-"===V?(B+=Q,w+=te):"+"===V&&(B-=Q,w-=te),new Date(Date.UTC(T,P,R,B,w,I))}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseStandardFontDataFactory=a.BaseSVGFactory=a.BaseCanvasFactory=a.BaseCMapReaderFactory=void 0;var r=D(1);class z{constructor(){this.constructor===z&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,v){if(t<=0||v<=0)throw new Error("Invalid canvas size");const d=this._createCanvas(t,v);return{canvas:d,context:d.getContext("2d")}}reset(t,v,d){if(!t.canvas)throw new Error("Canvas is not specified");if(v<=0||d<=0)throw new Error("Invalid canvas size");t.canvas.width=v,t.canvas.height=d}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,v){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}a.BaseCanvasFactory=z;class U{constructor({baseUrl:t=null,isCompressed:v=!1}){this.constructor===U&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=v}fetch({name:t}){var v=this;return _asyncToGenerator(function*(){if(!v.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const d=v.baseUrl+t+(v.isCompressed?".bcmap":"");return v._fetchData(d,v.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE).catch(C=>{throw new Error(`Unable to load ${v.isCompressed?"binary ":""}CMap at: ${d}`)})})()}_fetchData(t,v){(0,r.unreachable)("Abstract method `_fetchData` called.")}}a.BaseCMapReaderFactory=U;class X{constructor({baseUrl:t=null}){this.constructor===X&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}fetch({filename:t}){var v=this;return _asyncToGenerator(function*(){if(!v.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const d=`${v.baseUrl}${t}`;return v._fetchData(d).catch(A=>{throw new Error(`Unable to load font data at: ${d}`)})})()}_fetchData(t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}a.BaseStandardFontDataFactory=X;class ${constructor(){this.constructor===$&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,v){if(t<=0||v<=0)throw new Error("Invalid SVG dimensions");const d=this._createSVG("svg:svg");return d.setAttribute("version","1.1"),d.setAttribute("width",`${t}px`),d.setAttribute("height",`${v}px`),d.setAttribute("preserveAspectRatio","none"),d.setAttribute("viewBox",`0 0 ${t} ${v}`),d}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,r.unreachable)("Abstract method `_createSVG` called.")}}a.BaseSVGFactory=$},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FontLoader=a.FontFaceObject=void 0;var r=D(1);class z{constructor({docId:L,onUnsupportedFeature:t,ownerDocument:v=globalThis.document,styleElement:d=null}){this.constructor===z&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=L,this._onUnsupportedFeature=t,this._document=v,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(L){this.nativeFontFaces.push(L),this._document.fonts.add(L)}insertRule(L){let t=this.styleElement;t||(t=this.styleElement=this._document.createElement("style"),t.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(t));const v=t.sheet;v.insertRule(L,v.cssRules.length)}clear(){for(const L of this.nativeFontFaces)this._document.fonts.delete(L);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(L){var t=this;return _asyncToGenerator(function*(){if(L.attached||L.missingFile)return;if(L.attached=!0,t.isFontLoadingAPISupported){const d=L.createNativeFontFace();if(d){t.addNativeFontFace(d);try{yield d.loaded}catch(A){throw t._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${d.family}': '${A}'.`),L.disableFontFace=!0,A}}return}const v=L.createFontFaceRule();if(v){if(t.insertRule(v),t.isSyncFontLoadingSupported)return;yield new Promise(d=>{const A=t._queueLoadingCallback(d);t._prepareFontLoadEvent([v],[L],A)})}})()}_queueLoadingCallback(L){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,r.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(L,t,v){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let U;a.FontLoader=U,a.FontLoader=U=class extends z{constructor(L){super(L),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let L=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(L=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",L)}_queueLoadingCallback(L){const v=this.loadingContext,d={id:"pdfjs-font-loading-"+v.nextRequestId++,done:!1,complete:function t(){for((0,r.assert)(!d.done,"completeRequest() cannot be called twice."),d.done=!0;v.requests.length>0&&v.requests[0].done;){const A=v.requests.shift();setTimeout(A.callback,0)}},callback:L};return v.requests.push(d),d}get _loadTestFont(){return(0,r.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(L,t,v){function d(T,P){return T.charCodeAt(P)<<24|T.charCodeAt(P+1)<<16|T.charCodeAt(P+2)<<8|255&T.charCodeAt(P+3)}function A(T,P,R,B){return T.substring(0,P)+B+T.substring(P+R)}let C,O;const p=this._document.createElement("canvas");p.width=1,p.height=1;const l=p.getContext("2d");let y=0;const m=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=A(f,976,m.length,m);const _=1482184792;let x=d(f,16);for(C=0,O=m.length-3;C<O;C+=4)x=x-_+d(m,C)|0;C<m.length&&(x=x-_+d(m+"XXX",C)|0),f=A(f,16,4,(0,r.string32)(x));const E=`url(data:font/opentype;base64,${btoa(f)});`;this.insertRule(`@font-face {font-family:"${m}";src:${E}}`);const F=[];for(const T of t)F.push(T.loadedName);F.push(m);const c=this._document.createElement("div");c.style.visibility="hidden",c.style.width=c.style.height="10px",c.style.position="absolute",c.style.top=c.style.left="0px";for(const T of F){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=T,c.appendChild(P)}this._document.body.appendChild(c),function h(T,P){if(y++,y>30)return(0,r.warn)("Load test font never loaded."),void P();l.font="30px "+T,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?P():setTimeout(h.bind(null,T,P))}(m,()=>{c.remove(),v.complete()})}},a.FontFaceObject=class X{constructor(L,{isEvalSupported:t=!0,disableFontFace:v=!1,ignoreErrors:d=!1,onUnsupportedFeature:A,fontRegistry:C=null}){this.compiledGlyphs=Object.create(null);for(const O in L)this[O]=L[O];this.isEvalSupported=!1!==t,this.disableFontFace=!0===v,this.ignoreErrors=!0===d,this._onUnsupportedFeature=A,this.fontRegistry=C}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let L;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),L=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else L=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),L}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const L=(0,r.bytesToString)(this.data),t=`url(data:${this.mimetype};base64,${btoa(L)});`;let v;if(this.cssFontInfo){let d=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(d+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${d}src:${t}}`}else v=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,t),v}getPathGenerator(L,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let v;try{v=L.get(this.loadedName+"_path_"+t)}catch(d){if(!this.ignoreErrors)throw d;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${d}".`),this.compiledGlyphs[t]=function(A,C){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const d=[];for(const A of v){const C=void 0!==A.args?A.args.join(","):"";d.push("c.",A.cmd,"(",C,");\n")}return this.compiledGlyphs[t]=new Function("c","size",d.join(""))}return this.compiledGlyphs[t]=function(d,A){for(const C of v)"scale"===C.cmd&&(C.args=[A,-A]),d[C.cmd].apply(d,C.args)}}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationStorage=void 0;var r=D(9),z=D(1);a.AnnotationStorage=class U{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue($,L){const t=this._storage.get($);return void 0===t?L:Object.assign(L,t)}getRawValue($){return this._storage.get($)}setValue($,L){const t=this._storage.get($);let v=!1;if(void 0!==t)for(const[d,A]of Object.entries(L))t[d]!==A&&(v=!0,t[d]=A);else v=!0,this._storage.set($,L);v&&this._setModified()}getAll(){return this._storage.size>0?(0,z.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const $=new r.MurmurHash3_64;for(const[L,t]of this._storage)$.update(`${L}:${JSON.stringify(t)}`);return $.hexdigest()}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MurmurHash3_64=void 0;var r=D(1);const z=3285377520,U=4294901760,X=65535;a.MurmurHash3_64=class ${constructor(t){this.h1=t?4294967295&t:z,this.h2=t?4294967295&t:z}update(t){let v,d;if("string"==typeof t){v=new Uint8Array(2*t.length),d=0;for(let _=0,x=t.length;_<x;_++){const E=t.charCodeAt(_);E<=255?v[d++]=E:(v[d++]=E>>>8,v[d++]=255&E)}}else{if(!(0,r.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");v=t.slice(),d=v.byteLength}const A=d>>2,C=d-4*A,O=new Uint32Array(v.buffer,0,A);let p=0,l=0,y=this.h1,h=this.h2;const m=3432918353,f=461845907,i=m&X,s=f&X;for(let _=0;_<A;_++)1&_?(p=O[_],p=p*m&U|p*i&X,p=p<<15|p>>>17,p=p*f&U|p*s&X,y^=p,y=y<<13|y>>>19,y=5*y+3864292196):(l=O[_],l=l*m&U|l*i&X,l=l<<15|l>>>17,l=l*f&U|l*s&X,h^=l,h=h<<13|h>>>19,h=5*h+3864292196);switch(p=0,C){case 3:p^=v[4*A+2]<<16;case 2:p^=v[4*A+1]<<8;case 1:p^=v[4*A],p=p*m&U|p*i&X,p=p<<15|p>>>17,p=p*f&U|p*s&X,1&A?y^=p:h^=p}this.h1=y,this.h2=h}hexdigest(){let t=this.h1,v=this.h2;t^=v>>>1,t=3981806797*t&U|36045*t&X,v=4283543511*v&U|(2950163797*(v<<16|t>>>16)&U)>>>16,t^=v>>>1,t=444984403*t&U|60499*t&X,v=3301882366*v&U|(3120437893*(v<<16|t>>>16)&U)>>>16,t^=v>>>1;const d=(t>>>0).toString(16),A=(v>>>0).toString(16);return d.padStart(8,"0")+A.padStart(8,"0")}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CanvasGraphics=void 0;var r=D(1),z=D(11),U=D(12),X=D(3),$=D(5);const v=4096,p=16;function h(S){if(S._transformStack&&(S._transformStack=[]),!S.mozCurrentTransform){S._originalSave=S.save,S._originalRestore=S.restore,S._originalRotate=S.rotate,S._originalScale=S.scale,S._originalTranslate=S.translate,S._originalTransform=S.transform,S._originalSetTransform=S.setTransform,S._originalResetTransform=S.resetTransform,S._transformMatrix=S._transformMatrix||[1,0,0,1,0,0],S._transformStack=[];try{const e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(S),"lineWidth");S._setLineWidth=e.set,S._getLineWidth=e.get,Object.defineProperty(S,"lineWidth",{set:function(o){this._setLineWidth(1.000001*o)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(S,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(S,"mozCurrentTransformInverse",{get:function(){const[n,o,g,u,b,M]=this._transformMatrix,W=n*u-o*g,j=o*g-n*u;return[u/W,o/j,g/j,n/W,(u*b-g*M)/j,(o*b-n*M)/W]}}),S.save=function(){const n=this._transformMatrix;this._transformStack.push(n),this._transformMatrix=n.slice(0,6),this._originalSave()},S.restore=function(){0===this._transformStack.length&&(0,r.warn)("Tried to restore a ctx when the stack was already empty.");const n=this._transformStack.pop();n&&(this._transformMatrix=n,this._originalRestore())},S.translate=function(n,o){const g=this._transformMatrix;g[4]=g[0]*n+g[2]*o+g[4],g[5]=g[1]*n+g[3]*o+g[5],this._originalTranslate(n,o)},S.scale=function(n,o){const g=this._transformMatrix;g[0]*=n,g[1]*=n,g[2]*=o,g[3]*=o,this._originalScale(n,o)},S.transform=function(n,o,g,u,b,M){const W=this._transformMatrix;this._transformMatrix=[W[0]*n+W[2]*o,W[1]*n+W[3]*o,W[0]*g+W[2]*u,W[1]*g+W[3]*u,W[0]*b+W[2]*M+W[4],W[1]*b+W[3]*M+W[5]],S._originalTransform(n,o,g,u,b,M)},S.setTransform=function(n,o,g,u,b,M){this._transformMatrix=[n,o,g,u,b,M],S._originalSetTransform(n,o,g,u,b,M)},S.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],S._originalResetTransform()},S.rotate=function(n){const o=Math.cos(n),g=Math.sin(n),u=this._transformMatrix;this._transformMatrix=[u[0]*o+u[2]*g,u[1]*o+u[3]*g,u[0]*-g+u[2]*o,u[1]*-g+u[3]*o,u[4],u[5]],this._originalRotate(n)}}}class m{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,o,g){let u;return void 0!==this.cache[e]?(u=this.cache[e],this.canvasFactory.reset(u,n,o),u.context.setTransform(1,0,0,1,0,0)):(u=this.canvasFactory.create(n,o),this.cache[e]=u),g&&h(u.context),u}delete(e){delete this.cache[e]}clear(){for(const e in this.cache)this.canvasFactory.destroy(this.cache[e]),delete this.cache[e]}}function f(S,e,n,o,g,u,b,M,W,j){const[q,Y,H,ee,G,N]=S.mozCurrentTransform;if(0===Y&&0===H){const ne=Math.round(b*q+G),he=Math.round(M*ee+N),pe=Math.abs(Math.round((b+W)*q+G)-ne)||1,de=Math.abs(Math.round((M+j)*ee+N)-he)||1;return S.setTransform(Math.sign(q),0,0,Math.sign(ee),ne,he),S.drawImage(e,n,o,g,u,0,0,pe,de),S.setTransform(q,Y,H,ee,G,N),[pe,de]}if(0===q&&0===ee){const ne=Math.round(M*H+G),he=Math.round(b*Y+N),pe=Math.abs(Math.round((M+j)*H+G)-ne)||1,de=Math.abs(Math.round((b+W)*Y+N)-he)||1;return S.setTransform(0,Math.sign(Y),Math.sign(H),0,ne,he),S.drawImage(e,n,o,g,u,0,0,de,pe),S.setTransform(q,Y,H,ee,G,N),[de,pe]}return S.drawImage(e,n,o,g,u,b,M,W,j),[Math.hypot(q,Y)*W,Math.hypot(H,ee)*j]}class s{constructor(e,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,e,n])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,n){this.x=e,this.y=n}updatePathMinMax(e,n,o){[n,o]=r.Util.applyTransform([n,o],e),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,o),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,o)}updateRectMinMax(e,n){const o=r.Util.applyTransform(n,e),g=r.Util.applyTransform(n.slice(2),e);this.minX=Math.min(this.minX,o[0],g[0]),this.minY=Math.min(this.minY,o[1],g[1]),this.maxX=Math.max(this.maxX,o[0],g[0]),this.maxY=Math.max(this.maxY,o[1],g[1])}updateScalingPathMinMax(e,n){r.Util.scaleMinMax(e,n),this.minX=Math.min(this.minX,n[0]),this.maxX=Math.max(this.maxX,n[1]),this.minY=Math.min(this.minY,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(e,n,o,g,u,b,M,W,j,q){const Y=r.Util.bezierBoundingBox(n,o,g,u,b,M,W,j);if(q)return q[0]=Math.min(q[0],Y[0],Y[2]),q[1]=Math.max(q[1],Y[0],Y[2]),q[2]=Math.min(q[2],Y[1],Y[3]),void(q[3]=Math.max(q[3],Y[1],Y[3]));this.updateRectMinMax(e,Y)}getPathBoundingBox(e=z.PathType.FILL,n=null){const o=[this.minX,this.minY,this.maxX,this.maxY];if(e===z.PathType.STROKE){n||(0,r.unreachable)("Stroke bounding box must include transform.");const g=r.Util.singularValueDecompose2dScale(n),u=g[0]*this.lineWidth/2,b=g[1]*this.lineWidth/2;o[0]-=u,o[1]-=b,o[2]+=u,o[3]+=b}return o}updateClipFromPath(){const e=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=z.PathType.FILL,n=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function _(S,e,n=null){if(typeof ImageData<"u"&&e instanceof ImageData)return void S.putImageData(e,0,0);const o=e.height,g=e.width,u=o%p,b=(o-u)/p,M=0===u?b:b+1,W=S.createImageData(g,p);let q,j=0;const Y=e.data,H=W.data;let ee,G,N,K,ae,ie,ne,ce;if(n)switch(n.length){case 1:ae=n[0],ie=n[0],ne=n[0],ce=n[0];break;case 4:ae=n[0],ie=n[1],ne=n[2],ce=n[3]}if(e.kind===r.ImageKind.GRAYSCALE_1BPP){const he=Y.byteLength,oe=new Uint32Array(H.buffer,0,H.byteLength>>2),pe=oe.length,_e=g+7>>3;let de=4294967295,me=r.FeatureTest.isLittleEndian?4278190080:255;for(ce&&255===ce[0]&&0===ce[255]&&([de,me]=[me,de]),ee=0;ee<M;ee++){for(N=ee<b?p:u,q=0,G=0;G<N;G++){const ve=he-j;let Se=0;const be=ve>_e?g:8*ve-7,we=-8&be;let re=0,J=0;for(;Se<we;Se+=8)J=Y[j++],oe[q++]=128&J?de:me,oe[q++]=64&J?de:me,oe[q++]=32&J?de:me,oe[q++]=16&J?de:me,oe[q++]=8&J?de:me,oe[q++]=4&J?de:me,oe[q++]=2&J?de:me,oe[q++]=1&J?de:me;for(;Se<be;Se++)0===re&&(J=Y[j++],re=128),oe[q++]=J&re?de:me,re>>=1}for(;q<pe;)oe[q++]=0;S.putImageData(W,0,ee*p)}}else if(e.kind===r.ImageKind.RGBA_32BPP){const he=!!(ae||ie||ne);for(G=0,K=g*p*4,ee=0;ee<b;ee++){if(H.set(Y.subarray(j,j+K)),j+=K,he)for(let oe=0;oe<K;oe+=4)ae&&(H[oe+0]=ae[H[oe+0]]),ie&&(H[oe+1]=ie[H[oe+1]]),ne&&(H[oe+2]=ne[H[oe+2]]);S.putImageData(W,0,G),G+=p}if(ee<M){if(K=g*u*4,H.set(Y.subarray(j,j+K)),he)for(let oe=0;oe<K;oe+=4)ae&&(H[oe+0]=ae[H[oe+0]]),ie&&(H[oe+1]=ie[H[oe+1]]),ne&&(H[oe+2]=ne[H[oe+2]]);S.putImageData(W,0,G)}}else{if(e.kind!==r.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);{const he=!!(ae||ie||ne);for(N=p,K=g*N,ee=0;ee<M;ee++){for(ee>=b&&(N=u,K=g*N),q=0,G=K;G--;)H[q++]=Y[j++],H[q++]=Y[j++],H[q++]=Y[j++],H[q++]=255;if(he)for(let oe=0;oe<q;oe+=4)ae&&(H[oe+0]=ae[H[oe+0]]),ie&&(H[oe+1]=ie[H[oe+1]]),ne&&(H[oe+2]=ne[H[oe+2]]);S.putImageData(W,0,ee*p)}}}}function x(S,e){if(e.bitmap)return void S.drawImage(e.bitmap,0,0);const n=e.height,o=e.width,g=n%p,u=(n-g)/p,b=0===g?u:u+1,M=S.createImageData(o,p);let W=0;const j=e.data,q=M.data;for(let Y=0;Y<b;Y++){const H=Y<u?p:g;({srcPos:W}=(0,U.applyMaskImageData)({src:j,srcPos:W,dest:q,width:o,height:H})),S.putImageData(M,0,Y*p)}}function E(S,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let o=0,g=n.length;o<g;o++){const u=n[o];void 0!==S[u]&&(e[u]=S[u])}void 0!==S.setLineDash&&(e.setLineDash(S.getLineDash()),e.lineDashOffset=S.lineDashOffset)}function k(S,e){S.strokeStyle=S.fillStyle=e||"#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",void 0!==S.setLineDash&&(S.setLineDash([]),S.lineDashOffset=0)}function F(S,e,n,o){const g=S.length;for(let u=3;u<g;u+=4){const b=S[u];if(0===b)S[u-3]=e,S[u-2]=n,S[u-1]=o;else if(b<255){const M=255-b;S[u-3]=S[u-3]*b+e*M>>8,S[u-2]=S[u-2]*b+n*M>>8,S[u-1]=S[u-1]*b+o*M>>8}}}function c(S,e,n){const o=S.length;for(let u=3;u<o;u+=4)e[u]=e[u]*(n?n[S[u]]:S[u])*.00392156862745098|0}function T(S,e,n){const o=S.length;for(let g=3;g<o;g+=4){const u=77*S[g-3]+152*S[g-2]+28*S[g-1];e[g]=n?e[g]*n[u>>8]>>8:e[g]*u>>16}}function B(S,e){const n=r.Util.singularValueDecompose2dScale(S);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const o=Math.fround((globalThis.devicePixelRatio||1)*$.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:n[0]<=o||n[1]<=o}const w=["butt","round","square"],I=["miter","round","bevel"],V={},Q={};class te{constructor(e,n,o,g,u,b,M,W){this.ctx=e,this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=o,this.canvasFactory=g,this.imageLayer=u,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=b,this.cachedCanvases=new m(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=M,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=W?.background||null,this.foregroundColor=W?.foreground||null,e&&h(e),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,n=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):n}beginDrawing({transform:e,viewport:n,transparency:o=!1,background:g=null}){const u=this.ctx.canvas.width,b=this.ctx.canvas.height,M=g||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const W=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const j=this.backgroundColor=this.ctx.fillStyle;let q=!0,Y=M;if(this.ctx.fillStyle=M,Y=this.ctx.fillStyle,q="string"==typeof Y&&/^#[0-9A-Fa-f]{6}$/.test(Y),"#000000"===W&&"#ffffff"===j||W===j||!q)this.foregroundColor=this.backgroundColor=null;else{const H=parseInt(Y.slice(1),16),G=(H&&65280)>>8,N=H&&255,K=ie=>(ie/=255)<=.03928?ie/12.92:((ie+.055)/1.055)**2.4,ae=Math.round(.2126*K((H&&16711680)>>16)+.7152*K(G)+.0722*K(N));this.selectColor=(ie,ne,ce)=>{const he=.2126*K(ie)+.7152*K(ne)+.0722*K(ce);return Math.round(he)===ae?j:W}}}if(this.ctx.fillStyle=this.backgroundColor||M,this.ctx.fillRect(0,0,u,b),this.ctx.restore(),o){const W=this.cachedCanvases.getCanvas("transparent",u,b,!0);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),k(this.ctx,this.foregroundColor),e&&(this.ctx.transform.apply(this.ctx,e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform.apply(this.ctx,n.transform),this.viewportScale=n.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(e,n,o,g){const u=e.argsArray,b=e.fnArray;let M=n||0;const W=u.length;if(W===M)return M;const j=W-M>10&&"function"==typeof o,q=j?Date.now()+15:0;let Y=0;const H=this.commonObjs,ee=this.objs;let G;for(;;){if(void 0!==g&&M===g.nextBreakPoint)return g.breakIt(M,o),M;if(G=b[M],G!==r.OPS.dependency)this[G].apply(this,u[M]);else for(const N of u[M]){const K=N.startsWith("g_")?H:ee;if(!K.has(N))return K.get(N,o),M}if(M++,M===W)return M;if(j&&++Y>10){if(Date.now()>q)return o(),M;Y=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(e,n){const o=e.width,g=e.height;let q,Y,u=Math.max(Math.hypot(n[0],n[1]),1),b=Math.max(Math.hypot(n[2],n[3]),1),M=o,W=g,j="prescale1";for(;u>2&&M>1||b>2&&W>1;){let H=M,ee=W;u>2&&M>1&&(H=Math.ceil(M/2),u/=M/H),b>2&&W>1&&(ee=Math.ceil(W/2),b/=W/ee),q=this.cachedCanvases.getCanvas(j,H,ee,!1),Y=q.context,Y.clearRect(0,0,H,ee),Y.drawImage(e,0,0,M,W,0,0,H,ee),e=q.canvas,M=H,W=ee,j="prescale1"===j?"prescale2":"prescale1"}return{img:e,paintWidth:M,paintHeight:W}}_createMaskCanvas(e){const n=this.ctx,{width:o,height:g}=e,u=this.current.fillColor,b=this.current.patternFill,M=n.mozCurrentTransform;let W,j,q,Y;if((e.bitmap||e.data)&&e.count>1){const pe=e.bitmap||e.data.buffer,_e=M.slice(0,4);j=JSON.stringify(b?_e:[_e,u]),W=this._cachedBitmapsMap.get(pe),W||(W=new Map,this._cachedBitmapsMap.set(pe,W));const de=W.get(j);if(de&&!b)return{canvas:de,offsetX:Math.round(Math.min(M[0],M[2])+M[4]),offsetY:Math.round(Math.min(M[1],M[3])+M[5])};q=de}q||(Y=this.cachedCanvases.getCanvas("maskCanvas",o,g,!1),x(Y.context,e));let H=r.Util.transform(M,[1/o,0,0,-1/g,0,0]);H=r.Util.transform(H,[1,0,0,1,0,-g]);const ee=r.Util.applyTransform([0,0],H),G=r.Util.applyTransform([o,g],H),N=r.Util.normalizeRect([ee[0],ee[1],G[0],G[1]]),K=Math.round(N[2]-N[0])||1,ae=Math.round(N[3]-N[1])||1,ie=this.cachedCanvases.getCanvas("fillCanvas",K,ae,!0),ne=ie.context,ce=Math.min(ee[0],G[0]),he=Math.min(ee[1],G[1]);ne.translate(-ce,-he),ne.transform.apply(ne,H),q||(q=this._scaleImage(Y.canvas,ne.mozCurrentTransformInverse),q=q.img,W&&b&&W.set(j,q)),ne.imageSmoothingEnabled=B(ne.mozCurrentTransform,e.interpolate),f(ne,q,0,0,q.width,q.height,0,0,o,g),ne.globalCompositeOperation="source-in";const oe=r.Util.transform(ne.mozCurrentTransformInverse,[1,0,0,1,-ce,-he]);return ne.fillStyle=b?u.getPattern(n,this,oe,z.PathType.FILL):u,ne.fillRect(0,0,o,g),W&&!b&&(this.cachedCanvases.delete("fillCanvas"),W.set(j,ie.canvas)),{canvas:ie.canvas,offsetX:Math.round(ce),offsetY:Math.round(he)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=w[e]}setLineJoin(e){this.ctx.lineJoin=I[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,n){const o=this.ctx;void 0!==o.setLineDash&&(o.setLineDash(e),o.lineDashOffset=n)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let n=0,o=e.length;n<o;n++){const g=e[n],b=g[1];switch(g[0]){case"LW":this.setLineWidth(b);break;case"LC":this.setLineCap(b);break;case"LJ":this.setLineJoin(b);break;case"ML":this.setMiterLimit(b);break;case"D":this.setDash(b[0],b[1]);break;case"RI":this.setRenderingIntent(b);break;case"FL":this.setFlatness(b);break;case"Font":this.setFont(b[0],b[1]);break;case"CA":this.current.strokeAlpha=g[1];break;case"ca":this.current.fillAlpha=g[1],this.ctx.globalAlpha=g[1];break;case"BM":this.ctx.globalCompositeOperation=b;break;case"SMask":this.current.activeSMask=b?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=b}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const g=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=g.context;const u=this.ctx;u.setTransform.apply(u,this.suspendedCtx.mozCurrentTransform),E(this.suspendedCtx,u),function y(S,e){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){e.save(),this.__originalSave()},S.restore=function(){e.restore(),this.__originalRestore()},S.translate=function(o,g){e.translate(o,g),this.__originalTranslate(o,g)},S.scale=function(o,g){e.scale(o,g),this.__originalScale(o,g)},S.transform=function(o,g,u,b,M,W){e.transform(o,g,u,b,M,W),this.__originalTransform(o,g,u,b,M,W)},S.setTransform=function(o,g,u,b,M,W){e.setTransform(o,g,u,b,M,W),this.__originalSetTransform(o,g,u,b,M,W)},S.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},S.rotate=function(o){e.rotate(o),this.__originalRotate(o)},S.clip=function(o){e.clip(o),this.__originalClip(o)},S.moveTo=function(n,o){e.moveTo(n,o),this.__originalMoveTo(n,o)},S.lineTo=function(n,o){e.lineTo(n,o),this.__originalLineTo(n,o)},S.bezierCurveTo=function(n,o,g,u,b,M){e.bezierCurveTo(n,o,g,u,b,M),this.__originalBezierCurveTo(n,o,g,u,b,M)},S.rect=function(n,o,g,u){e.rect(n,o,g,u),this.__originalRect(n,o,g,u)},S.closePath=function(){e.closePath(),this.__originalClosePath()},S.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(u,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),E(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){this.current.activeSMask&&(e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function R(S,e,n,o){const g=o[0],u=o[1],b=o[2]-g,M=o[3]-u;0===b||0===M||(function P(S,e,n,o,g,u,b,M,W,j,q){const Y=!!u,H=Y?u[0]:0,ee=Y?u[1]:0,G=Y?u[2]:0;let N;N="Luminosity"===g?T:c;const ae=Math.min(o,Math.ceil(1048576/n));for(let ie=0;ie<o;ie+=ae){const ne=Math.min(ae,o-ie),ce=S.getImageData(M-j,ie+(W-q),n,ne),he=e.getImageData(M,ie+W,n,ne);Y&&F(ce.data,H,ee,G),N(ce.data,he.data,b),e.putImageData(he,M,ie+W)}}(e.context,n,b,M,e.subtype,e.backdrop,e.transferMap,g,u,e.offsetX,e.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(n.canvas,0,0),S.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(E(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),E(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(e,n,o,g,u,b){this.ctx.transform(e,n,o,g,u,b),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(e,n,o){const g=this.ctx,u=this.current;let W,j,b=u.x,M=u.y;const q=g.mozCurrentTransform,Y=0===q[0]&&0===q[3]||0===q[1]&&0===q[2],H=Y?o.slice(0):null;for(let ee=0,G=0,N=e.length;ee<N;ee++)switch(0|e[ee]){case r.OPS.rectangle:b=n[G++],M=n[G++];const K=n[G++],ae=n[G++],ie=b+K,ne=M+ae;g.moveTo(b,M),0===K||0===ae?g.lineTo(ie,ne):(g.lineTo(ie,M),g.lineTo(ie,ne),g.lineTo(b,ne)),Y||u.updateRectMinMax(q,[b,M,ie,ne]),g.closePath();break;case r.OPS.moveTo:b=n[G++],M=n[G++],g.moveTo(b,M),Y||u.updatePathMinMax(q,b,M);break;case r.OPS.lineTo:b=n[G++],M=n[G++],g.lineTo(b,M),Y||u.updatePathMinMax(q,b,M);break;case r.OPS.curveTo:W=b,j=M,b=n[G+4],M=n[G+5],g.bezierCurveTo(n[G],n[G+1],n[G+2],n[G+3],b,M),u.updateCurvePathMinMax(q,W,j,n[G],n[G+1],n[G+2],n[G+3],b,M,H),G+=6;break;case r.OPS.curveTo2:W=b,j=M,g.bezierCurveTo(b,M,n[G],n[G+1],n[G+2],n[G+3]),u.updateCurvePathMinMax(q,W,j,b,M,n[G],n[G+1],n[G+2],n[G+3],H),b=n[G+2],M=n[G+3],G+=4;break;case r.OPS.curveTo3:W=b,j=M,b=n[G+2],M=n[G+3],g.bezierCurveTo(n[G],n[G+1],b,M,b,M),u.updateCurvePathMinMax(q,W,j,n[G],n[G+1],b,M,b,M,H),G+=4;break;case r.OPS.closePath:g.closePath()}Y&&u.updateScalingPathMinMax(q,H),u.setCurrentPoint(b,M)}closePath(){this.ctx.closePath()}stroke(e){e=!(typeof e<"u")||e;const n=this.ctx,o=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof o&&o?.getPattern?(n.save(),n.strokeStyle=o.getPattern(n,this,n.mozCurrentTransformInverse,z.PathType.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e){e=!(typeof e<"u")||e;const n=this.ctx,o=this.current.fillColor;let u=!1;this.current.patternFill&&(n.save(),n.fillStyle=o.getPattern(n,this,n.mozCurrentTransformInverse,z.PathType.FILL),u=!0);const b=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==b&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),u&&n.restore(),e&&this.consumePath(b)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=V}eoClip(){this.pendingClip=Q}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,n=this.ctx;if(void 0!==e){n.save(),n.beginPath();for(let o=0;o<e.length;o++){const g=e[o];n.setTransform.apply(n,g.transform),n.translate(g.x,g.y),g.addToPath(n,g.fontSize)}n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}else n.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,n){const o=this.commonObjs.get(e),g=this.current;if(!o)throw new Error(`Can't find font for ${e}`);if(g.fontMatrix=o.fontMatrix||r.FONT_IDENTITY_MATRIX,(0===g.fontMatrix[0]||0===g.fontMatrix[3])&&(0,r.warn)("Invalid font matrix for font "+e),n<0?(n=-n,g.fontDirection=-1):g.fontDirection=1,this.current.font=o,this.current.fontSize=n,o.isType3Font)return;let b="normal";o.black?b="900":o.bold&&(b="bold");const M=o.italic?"italic":"normal",W=`"${o.loadedName||"sans-serif"}", ${o.fallbackName}`;let j=n;n<16?j=16:n>100&&(j=100),this.current.fontSizeScale=n/j,this.ctx.font=`${M} ${b} ${j}px ${W}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,n){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,n){this.setLeading(-n),this.moveText(e,n)}setTextMatrix(e,n,o,g,u,b){this.current.textMatrix=[e,n,o,g,u,b],this.current.textMatrixScale=Math.hypot(e,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,n,o,g){const u=this.ctx,b=this.current,M=b.font,W=b.textRenderingMode,j=b.fontSize/b.fontSizeScale,q=W&r.TextRenderingMode.FILL_STROKE_MASK,Y=!!(W&r.TextRenderingMode.ADD_TO_PATH_FLAG),H=b.patternFill&&!M.missingFile;let ee;(M.disableFontFace||Y||H)&&(ee=M.getPathGenerator(this.commonObjs,e)),M.disableFontFace||H?(u.save(),u.translate(n,o),u.beginPath(),ee(u,j),g&&u.setTransform.apply(u,g),(q===r.TextRenderingMode.FILL||q===r.TextRenderingMode.FILL_STROKE)&&u.fill(),(q===r.TextRenderingMode.STROKE||q===r.TextRenderingMode.FILL_STROKE)&&u.stroke(),u.restore()):((q===r.TextRenderingMode.FILL||q===r.TextRenderingMode.FILL_STROKE)&&u.fillText(e,n,o),(q===r.TextRenderingMode.STROKE||q===r.TextRenderingMode.FILL_STROKE)&&u.strokeText(e,n,o)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:u.mozCurrentTransform,x:n,y:o,fontSize:j,addToPath:ee})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let o=!1;for(let g=3;g<n.length;g+=4)if(n[g]>0&&n[g]<255){o=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",o)}showText(e){const n=this.current,o=n.font;if(o.isType3Font)return this.showType3Text(e);const g=n.fontSize;if(0===g)return;const u=this.ctx,b=n.fontSizeScale,M=n.charSpacing,W=n.wordSpacing,j=n.fontDirection,q=n.textHScale*j,Y=e.length,H=o.vertical,ee=H?1:-1,G=o.defaultVMetrics,N=g*n.fontMatrix[0],K=n.textRenderingMode===r.TextRenderingMode.FILL&&!o.disableFontFace&&!n.patternFill;let ae;if(u.save(),u.transform.apply(u,n.textMatrix),u.translate(n.x,n.y+n.textRise),u.scale(q,j>0?-1:1),n.patternFill){u.save();const oe=n.fillColor.getPattern(u,this,u.mozCurrentTransformInverse,z.PathType.FILL);ae=u.mozCurrentTransform,u.restore(),u.fillStyle=oe}let ie=n.lineWidth;const ne=n.textMatrixScale;if(0===ne||0===ie){const oe=n.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(oe===r.TextRenderingMode.STROKE||oe===r.TextRenderingMode.FILL_STROKE)&&(ie=this.getSinglePixelWidth())}else ie/=ne;1!==b&&(u.scale(b,b),ie/=b),u.lineWidth=ie;let he,ce=0;for(he=0;he<Y;++he){const oe=e[he];if("number"==typeof oe){ce+=ee*oe*g/1e3;continue}let pe=!1;const _e=(oe.isSpace?W:0)+M,de=oe.fontChar,me=oe.accent;let ve,Se,we,be=oe.width;if(H){const re=oe.vmetric||G,J=-(oe.vmetric?re[1]:.5*be)*N;be=re?-re[0]:be,ve=J/b,Se=(ce+re[2]*N)/b}else ve=ce/b,Se=0;if(o.remeasure&&be>0){const re=1e3*u.measureText(de).width/g*b;if(be<re&&this.isFontSubpixelAAEnabled){const J=be/re;pe=!0,u.save(),u.scale(J,1),ve/=J}else be!==re&&(ve+=(be-re)/2e3*g/b)}this.contentVisible&&(oe.isInFont||o.missingFile)&&(K&&!me?u.fillText(de,ve,Se):(this.paintChar(de,ve,Se,ae),me&&this.paintChar(me.fontChar,ve+g*me.offset.x/b,Se-g*me.offset.y/b,ae))),we=H?be*N-_e*j:be*N+_e*j,ce+=we,pe&&u.restore()}H?n.y-=ce:n.x+=ce*q,u.restore(),this.compose()}showType3Text(e){const n=this.ctx,o=this.current,g=o.font,u=o.fontSize,b=o.fontDirection,M=g.vertical?1:-1,W=o.charSpacing,j=o.wordSpacing,q=o.textHScale*b,Y=o.fontMatrix||r.FONT_IDENTITY_MATRIX,H=e.length;let G,N,K,ae;if(o.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==u){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,n.save(),n.transform.apply(n,o.textMatrix),n.translate(o.x,o.y),n.scale(q,b),G=0;G<H;++G){if(N=e[G],"number"==typeof N){ae=M*N*u/1e3,this.ctx.translate(ae,0),o.x+=ae*q;continue}const ie=(N.isSpace?j:0)+W,ne=g.charProcOperatorList[N.operatorListId];ne?(this.contentVisible&&(this.processingType3=N,this.save(),n.scale(u,u),n.transform.apply(n,Y),this.executeOperatorList(ne),this.restore()),K=r.Util.applyTransform([N.width,0],Y)[0]*u+ie,n.translate(K,0),o.x+=K*q):(0,r.warn)(`Type3 character "${N.operatorListId}" is not available.`)}n.restore(),this.processingType3=null}}setCharWidth(e,n){}setCharWidthAndBounds(e,n,o,g,u,b){this.ctx.rect(o,g,u-o,b-g),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let n;if("TilingPattern"===e[0]){const o=e[1],g=this.baseTransform||this.ctx.mozCurrentTransform.slice();n=new z.TilingPattern(e,o,this.ctx,{createCanvasGraphics:b=>new te(b,this.commonObjs,this.objs,this.canvasFactory)},g)}else n=this._getPattern(e[1],e[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,n,o){const g=this.selectColor?.(e,n,o)||r.Util.makeHexColor(e,n,o);this.ctx.strokeStyle=g,this.current.strokeColor=g}setFillRGBColor(e,n,o){const g=this.selectColor?.(e,n,o)||r.Util.makeHexColor(e,n,o);this.ctx.fillStyle=g,this.current.fillColor=g,this.current.patternFill=!1}_getPattern(e,n=null){let o;return this.cachedPatterns.has(e)?o=this.cachedPatterns.get(e):(o=(0,z.getShadingPattern)(this.objs.get(e)),this.cachedPatterns.set(e,o)),n&&(o.matrix=n),o}shadingFill(e){if(!this.contentVisible)return;const n=this.ctx;this.save();const o=this._getPattern(e);n.fillStyle=o.getPattern(n,this,n.mozCurrentTransformInverse,z.PathType.SHADING);const g=n.mozCurrentTransformInverse;if(g){const u=n.canvas,b=u.width,M=u.height,W=r.Util.applyTransform([0,0],g),j=r.Util.applyTransform([0,M],g),q=r.Util.applyTransform([b,0],g),Y=r.Util.applyTransform([b,M],g),H=Math.min(W[0],j[0],q[0],Y[0]),ee=Math.min(W[1],j[1],q[1],Y[1]),G=Math.max(W[0],j[0],q[0],Y[0]),N=Math.max(W[1],j[1],q[1],Y[1]);this.ctx.fillRect(H,ee,G-H,N-ee)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,n){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,n)&&(this.ctx.rect(n[0],n[1],n[2]-n[0],n[3]-n[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,n),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||(0,r.info)("TODO: Support non-isolated groups."),e.knockout&&(0,r.warn)("Knockout groups not supported.");const o=n.mozCurrentTransform;if(e.matrix&&n.transform.apply(n,e.matrix),!e.bbox)throw new Error("Bounding box is required.");let g=r.Util.getAxialAlignedBoundingBox(e.bbox,n.mozCurrentTransform);g=r.Util.intersect(g,[0,0,n.canvas.width,n.canvas.height])||[0,0,0,0];const b=Math.floor(g[0]),M=Math.floor(g[1]);let W=Math.max(Math.ceil(g[2])-b,1),j=Math.max(Math.ceil(g[3])-M,1),q=1,Y=1;W>v&&(q=W/v,W=v),j>v&&(Y=j/v,j=v),this.current.startNewPathAndClipBox([0,0,W,j]);let H="groupAt"+this.groupLevel;e.smask&&(H+="_smask_"+this.smaskCounter++%2);const ee=this.cachedCanvases.getCanvas(H,W,j,!0),G=ee.context;G.scale(1/q,1/Y),G.translate(-b,-M),G.transform.apply(G,o),e.smask?this.smaskStack.push({canvas:ee.canvas,context:G,offsetX:b,offsetY:M,scaleX:q,scaleY:Y,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(b,M),n.scale(q,Y),n.save()),E(n,G),this.ctx=G,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,o=this.groupStack.pop();if(this.ctx=o,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const g=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,g);const u=r.Util.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],g);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(e,n,o,g,u){if(this.save(),Array.isArray(n)&&4===n.length){const b=n[2]-n[0],M=n[3]-n[1];if(u&&this.annotationCanvasMap){(o=o.slice())[4]-=n[0],o[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=b,n[3]=M;const[W,j]=r.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:q}=this,Y=Math.ceil(b*this.outputScaleX*q),H=Math.ceil(M*this.outputScaleY*q);this.annotationCanvas=this.canvasFactory.create(Y,H);const{canvas:ee,context:G}=this.annotationCanvas,N=`var(--zoom-factor) * ${$.PixelsPerInch.PDF_TO_CSS_UNITS}`;ee.style.width=`calc(${b}px * ${N})`,ee.style.height=`calc(${M}px * ${N})`,this.annotationCanvasMap.set(e,ee),this.annotationCanvas.savedCtx=this.ctx,this.ctx=G,this.ctx.setTransform(W,0,0,-j,0,M*j),h(this.ctx),k(this.ctx,this.foregroundColor)}else k(this.ctx,this.foregroundColor),this.ctx.rect(n[0],n[1],b,M),this.ctx.clip(),this.endPath()}this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,o),this.transform.apply(this,g)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(e){if(!this.contentVisible)return;const n=e.count;(e=this.getObject(e.data,e)).count=n;const o=this.ctx,g=this.processingType3;if(g&&(void 0===g.compiled&&(g.compiled=function i(S){const{width:e,height:n}=S;if(e>1e3||n>1e3)return null;const g=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=e+1;let M,W,j,b=new Uint8Array(u*(n+1));const q=e+7&-8;let Y=new Uint8Array(q*n),H=0;for(const ne of S.data){let ce=128;for(;ce>0;)Y[H++]=ne&ce?0:255,ce>>=1}let ee=0;for(H=0,0!==Y[H]&&(b[0]=1,++ee),W=1;W<e;W++)Y[H]!==Y[H+1]&&(b[W]=Y[H]?2:1,++ee),H++;for(0!==Y[H]&&(b[W]=2,++ee),M=1;M<n;M++){H=M*q,j=M*u,Y[H-q]!==Y[H]&&(b[j]=Y[H]?1:8,++ee);let ne=(Y[H]?4:0)+(Y[H-q]?8:0);for(W=1;W<e;W++)ne=(ne>>2)+(Y[H+1]?4:0)+(Y[H-q+1]?8:0),g[ne]&&(b[j+W]=g[ne],++ee),H++;if(Y[H-q]!==Y[H]&&(b[j+W]=Y[H]?2:4,++ee),ee>1e3)return null}for(H=q*(n-1),j=M*u,0!==Y[H]&&(b[j]=8,++ee),W=1;W<e;W++)Y[H]!==Y[H+1]&&(b[j+W]=Y[H]?4:8,++ee),H++;if(0!==Y[H]&&(b[j+W]=4,++ee),ee>1e3)return null;const G=new Int32Array([0,u,-1,0,-u,0,0,0,1]);let N,K,ae;for(X.isNodeJS?K=[]:N=new Path2D,M=0;ee&&M<=n;M++){let ne=M*u;const ce=ne+e;for(;ne<ce&&!b[ne];)ne++;if(ne===ce)continue;N?N.moveTo(ne%u,M):ae=[ne%u,M];const he=ne;let oe=b[ne];do{const pe=G[oe];do{ne+=pe}while(!b[ne]);const _e=b[ne];5!==_e&&10!==_e?(oe=_e,b[ne]=0):(oe=_e&51*oe>>4,b[ne]&=oe>>2|oe<<2),N?N.lineTo(ne%u,ne/u|0):ae.push(ne%u,ne/u|0),b[ne]||--ee}while(he!==ne);N||K.push(ae),--M}return Y=null,b=null,function(ne){if(ne.save(),ne.scale(1/e,-1/n),ne.translate(0,-n),N)ne.fill(N);else{ne.beginPath();for(const ce of K){ne.moveTo(ce[0],ce[1]);for(let he=2,oe=ce.length;he<oe;he+=2)ne.lineTo(ce[he],ce[he+1])}ne.fill()}ne.beginPath(),ne.restore()}}(e)),g.compiled))return void g.compiled(o);const u=this._createMaskCanvas(e),b=u.canvas;o.save(),o.setTransform(1,0,0,1,0,0),o.drawImage(b,u.offsetX,u.offsetY),o.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,o=0,g=0,u,b){if(!this.contentVisible)return;e=this.getObject(e.data,e);const M=this.ctx;M.save();const W=M.mozCurrentTransform;M.transform(n,o,g,u,0,0);const j=this._createMaskCanvas(e);M.setTransform(1,0,0,1,0,0);for(let q=0,Y=b.length;q<Y;q+=2){const H=r.Util.transform(W,[n,o,g,u,b[q],b[q+1]]),[ee,G]=r.Util.applyTransform([0,0],H);M.drawImage(j.canvas,ee,G)}M.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const n=this.ctx,o=this.current.fillColor,g=this.current.patternFill;for(let u=0,b=e.length;u<b;u++){const M=e[u],W=M.width,j=M.height,q=this.cachedCanvases.getCanvas("maskCanvas",W,j,!1),Y=q.context;Y.save(),x(Y,M),Y.globalCompositeOperation="source-in",Y.fillStyle=g?o.getPattern(Y,this,n.mozCurrentTransformInverse,z.PathType.FILL):o,Y.fillRect(0,0,W,j),Y.restore(),n.save(),n.transform.apply(n,M.transform),n.scale(1,-1),f(n,q.canvas,0,0,W,j,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const n=this.getObject(e);n?this.paintInlineImageXObject(n):(0,r.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,n,o,g){if(!this.contentVisible)return;const u=this.getObject(e);if(!u)return void(0,r.warn)("Dependent image isn't ready yet");const b=u.width,M=u.height,W=[];for(let j=0,q=g.length;j<q;j+=2)W.push({transform:[n,0,0,o,g[j],g[j+1]],x:0,y:0,w:b,h:M});this.paintInlineImageXObjectGroup(u,W)}paintInlineImageXObject(e){if(!this.contentVisible)return;const n=e.width,o=e.height,g=this.ctx;let u;if(this.save(),g.scale(1/n,-1/o),"function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)u=e;else{const j=this.cachedCanvases.getCanvas("inlineImage",n,o,!1);_(j.context,e,this.current.transferMaps),u=j.canvas}const b=this._scaleImage(u,g.mozCurrentTransformInverse);g.imageSmoothingEnabled=B(g.mozCurrentTransform,e.interpolate);const[M,W]=f(g,b.img,0,0,b.paintWidth,b.paintHeight,0,-o,n,o);if(this.imageLayer){const j=this.getCanvasPosition(0,-o);this.imageLayer.appendImage({imgData:e,left:j[0],top:j[1],width:M,height:W})}this.compose(),this.restore()}paintInlineImageXObjectGroup(e,n){if(!this.contentVisible)return;const o=this.ctx,g=e.width,u=e.height,b=this.cachedCanvases.getCanvas("inlineImage",g,u,!1);_(b.context,e,this.current.transferMaps);for(let W=0,j=n.length;W<j;W++){const q=n[W];if(o.save(),o.transform.apply(o,q.transform),o.scale(1,-1),f(o,b.canvas,q.x,q.y,q.w,q.h,0,-1,1,1),this.imageLayer){const Y=this.getCanvasPosition(q.x,q.y);this.imageLayer.appendImage({imgData:e,left:Y[0],top:Y[1],width:g,height:u})}o.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,n){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n){this.markedContentStack.push("OC"===e?{visible:this.optionalContentConfig.isVisible(n)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const o=this.ctx;this.pendingClip&&(n||(this.pendingClip===Q?o.clip("evenodd"):o.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),o.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=this.ctx.mozCurrentTransform;if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),o=Math.hypot(e[0],e[2]),g=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(o,g)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:e}=this.current,n=this.ctx.mozCurrentTransform;let o,g;if(0===n[1]&&0===n[2]){const u=Math.abs(n[0]),b=Math.abs(n[3]);if(0===e)o=1/u,g=1/b;else{const M=u*e,W=b*e;o=M<1?1/M:1,g=W<1?1/W:1}}else{const u=Math.abs(n[0]*n[3]-n[2]*n[1]),b=Math.hypot(n[0],n[1]),M=Math.hypot(n[2],n[3]);if(0===e)o=M/u,g=b/u;else{const W=e*u;o=M>W?M/W:1,g=b>W?b/W:1}}this._cachedScaleForStroking=[o,g]}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:n}=this,{lineWidth:o}=this.current,[g,u]=this.getScaleForStroking();if(n.lineWidth=o||1,1===g&&1===u)return void n.stroke();let b,M,W;e&&(b=n.mozCurrentTransform.slice(),M=n.getLineDash().slice(),W=n.lineDashOffset),n.scale(g,u);const j=Math.max(g,u);n.setLineDash(n.getLineDash().map(q=>q/j)),n.lineDashOffset/=j,n.stroke(),e&&(n.setTransform(...b),n.setLineDash(M),n.lineDashOffset=W)}getCanvasPosition(e,n){const o=this.ctx.mozCurrentTransform;return[o[0]*e+o[2]*n+o[4],o[1]*e+o[3]*n+o[5]]}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}a.CanvasGraphics=te;for(const S in r.OPS)void 0!==te.prototype[S]&&(te.prototype[r.OPS[S]]=te.prototype[S])},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TilingPattern=a.PathType=void 0,a.getShadingPattern=function C(l){switch(l[0]){case"RadialAxial":return new L(l);case"Mesh":return new d(l);case"Dummy":return new A}throw new Error(`Unknown IR type: ${l[0]}`)};var r=D(1),z=D(3);const U={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function X(l,y){if(!y||z.isNodeJS)return;const h=y[2]-y[0],m=y[3]-y[1],f=new Path2D;f.rect(y[0],y[1],h,m),l.clip(f)}a.PathType=U;class ${constructor(){this.constructor===$&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class L extends ${constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let h;"axial"===this._type?h=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(h=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const m of this._colorStops)h.addColorStop(m[0],m[1]);return h}getPattern(y,h,m,f){let i;if(f===U.STROKE||f===U.FILL){const s=h.current.getClippedPathBoundingBox(f,y.mozCurrentTransform)||[0,0,0,0],_=Math.ceil(s[2]-s[0])||1,x=Math.ceil(s[3]-s[1])||1,E=h.cachedCanvases.getCanvas("pattern",_,x,!0),k=E.context;k.clearRect(0,0,k.canvas.width,k.canvas.height),k.beginPath(),k.rect(0,0,k.canvas.width,k.canvas.height),k.translate(-s[0],-s[1]),m=r.Util.transform(m,[1,0,0,1,s[0],s[1]]),k.transform.apply(k,h.baseTransform),this.matrix&&k.transform.apply(k,this.matrix),X(k,this._bbox),k.fillStyle=this._createGradient(k),k.fill(),i=y.createPattern(E.canvas,"no-repeat");const F=new DOMMatrix(m);try{i.setTransform(F)}catch(c){(0,r.warn)(`RadialAxialShadingPattern.getPattern: "${c?.message}".`)}}else X(y,this._bbox),i=this._createGradient(y);return i}}function t(l,y,h,m,f,i,s,_){const x=y.coords,E=y.colors,k=l.data,F=4*l.width;let c;x[h+1]>x[m+1]&&(c=h,h=m,m=c,c=i,i=s,s=c),x[m+1]>x[f+1]&&(c=m,m=f,f=c,c=s,s=_,_=c),x[h+1]>x[m+1]&&(c=h,h=m,m=c,c=i,i=s,s=c);const T=(x[h]+y.offsetX)*y.scaleX,P=(x[h+1]+y.offsetY)*y.scaleY,R=(x[m]+y.offsetX)*y.scaleX,B=(x[m+1]+y.offsetY)*y.scaleY,w=(x[f]+y.offsetX)*y.scaleX,I=(x[f+1]+y.offsetY)*y.scaleY;if(P>=I)return;const V=E[i],Q=E[i+1],te=E[i+2],S=E[s],e=E[s+1],n=E[s+2],o=E[_],g=E[_+1],u=E[_+2],b=Math.round(P),M=Math.round(I);let W,j,q,Y,H,ee,G,N;for(let K=b;K<=M;K++){if(K<B){let he;he=K<P?0:(P-K)/(P-B),W=T-(T-R)*he,j=V-(V-S)*he,q=Q-(Q-e)*he,Y=te-(te-n)*he}else{let he;he=K>I?1:B===I?0:(B-K)/(B-I),W=R-(R-w)*he,j=S-(S-o)*he,q=e-(e-g)*he,Y=n-(n-u)*he}let ae;ae=K<P?0:K>I?1:(P-K)/(P-I),H=T-(T-w)*ae,ee=V-(V-o)*ae,G=Q-(Q-g)*ae,N=te-(te-u)*ae;const ie=Math.round(Math.min(W,H)),ne=Math.round(Math.max(W,H));let ce=F*K+4*ie;for(let he=ie;he<=ne;he++)ae=(W-he)/(W-H),ae<0?ae=0:ae>1&&(ae=1),k[ce++]=j-(j-ee)*ae|0,k[ce++]=q-(q-G)*ae|0,k[ce++]=Y-(Y-N)*ae|0,k[ce++]=255}}function v(l,y,h){const m=y.coords,f=y.colors;let i,s;switch(y.type){case"lattice":const _=y.verticesPerRow,x=Math.floor(m.length/_)-1,E=_-1;for(i=0;i<x;i++){let k=i*_;for(let F=0;F<E;F++,k++)t(l,h,m[k],m[k+1],m[k+_],f[k],f[k+1],f[k+_]),t(l,h,m[k+_+1],m[k+1],m[k+_],f[k+_+1],f[k+1],f[k+_])}break;case"triangles":for(i=0,s=m.length;i<s;i+=3)t(l,h,m[i],m[i+1],m[i+2],f[i],f[i+1],f[i+2]);break;default:throw new Error("illegal figure")}}class d extends ${constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,h,m){const _=Math.floor(this._bounds[0]),x=Math.floor(this._bounds[1]),E=Math.ceil(this._bounds[2])-_,k=Math.ceil(this._bounds[3])-x,F=Math.min(Math.ceil(Math.abs(E*y[0]*1.1)),3e3),c=Math.min(Math.ceil(Math.abs(k*y[1]*1.1)),3e3),T=E/F,P=k/c,R={coords:this._coords,colors:this._colors,offsetX:-_,offsetY:-x,scaleX:1/T,scaleY:1/P},I=m.getCanvas("mesh",F+4,c+4,!1),V=I.context,Q=V.createImageData(F,c);if(h){const S=Q.data;for(let e=0,n=S.length;e<n;e+=4)S[e]=h[0],S[e+1]=h[1],S[e+2]=h[2],S[e+3]=255}for(const S of this._figures)v(Q,S,R);return V.putImageData(Q,2,2),{canvas:I.canvas,offsetX:_-2*T,offsetY:x-2*P,scaleX:T,scaleY:P}}getPattern(y,h,m,f){let i;if(X(y,this._bbox),f===U.SHADING)i=r.Util.singularValueDecompose2dScale(y.mozCurrentTransform);else if(i=r.Util.singularValueDecompose2dScale(h.baseTransform),this.matrix){const _=r.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*_[0],i[1]*_[1]]}const s=this._createMeshCanvas(i,f===U.SHADING?null:this._background,h.cachedCanvases);return f!==U.SHADING&&(y.setTransform.apply(y,h.baseTransform),this.matrix&&y.transform.apply(y,this.matrix)),y.translate(s.offsetX,s.offsetY),y.scale(s.scaleX,s.scaleY),y.createPattern(s.canvas,"no-repeat")}}class A extends ${getPattern(){return"hotpink"}}class p{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(y,h,m,f,i){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=h,this.ctx=m,this.canvasGraphicsFactory=f,this.baseTransform=i}createPatternCanvas(y){const h=this.operatorList,m=this.bbox,f=this.xstep,i=this.ystep,s=this.paintType,x=this.color,E=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+this.tilingType);const k=m[0],F=m[1],c=m[2],T=m[3],P=r.Util.singularValueDecompose2dScale(this.matrix),R=r.Util.singularValueDecompose2dScale(this.baseTransform),B=[P[0]*R[0],P[1]*R[1]],w=this.getSizeAndScale(f,this.ctx.canvas.width,B[0]),I=this.getSizeAndScale(i,this.ctx.canvas.height,B[1]),V=y.cachedCanvases.getCanvas("pattern",w.size,I.size,!0),Q=V.context,te=E.createCanvasGraphics(Q);te.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(te,s,x);let S=k,e=F,n=c,o=T;return k<0&&(S=0,n+=Math.abs(k)),F<0&&(e=0,o+=Math.abs(F)),Q.translate(-w.scale*S,-I.scale*e),te.transform(w.scale,0,0,I.scale,0,0),Q.save(),this.clipBbox(te,S,e,n,o),te.baseTransform=te.ctx.mozCurrentTransform.slice(),te.executeOperatorList(h),te.endDrawing(),{canvas:V.canvas,scaleX:w.scale,scaleY:I.scale,offsetX:S,offsetY:e}}getSizeAndScale(y,h,m){y=Math.abs(y);const f=Math.max(p.MAX_PATTERN_SIZE,h);let i=Math.ceil(y*m);return i>=f?i=f:m=i/y,{scale:m,size:i}}clipBbox(y,h,m,f,i){y.ctx.rect(h,m,f-h,i-m),y.current.updateRectMinMax(y.ctx.mozCurrentTransform,[h,m,f,i]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,h,m){const f=y.ctx,i=y.current;switch(h){case 1:const s=this.ctx;f.fillStyle=s.fillStyle,f.strokeStyle=s.strokeStyle,i.fillColor=s.fillStyle,i.strokeColor=s.strokeStyle;break;case 2:const _=r.Util.makeHexColor(m[0],m[1],m[2]);f.fillStyle=_,f.strokeStyle=_,i.fillColor=_,i.strokeColor=_;break;default:throw new r.FormatError(`Unsupported paint type: ${h}`)}}getPattern(y,h,m,f){let i=m;f!==U.SHADING&&(i=r.Util.transform(i,h.baseTransform),this.matrix&&(i=r.Util.transform(i,this.matrix)));const s=this.createPatternCanvas(h);let _=new DOMMatrix(i);_=_.translate(s.offsetX,s.offsetY),_=_.scale(1/s.scaleX,1/s.scaleY);const x=y.createPattern(s.canvas,"repeat");try{x.setTransform(_)}catch(E){(0,r.warn)(`TilingPattern.getPattern: "${E?.message}".`)}return x}}a.TilingPattern=p},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.applyMaskImageData=function z({src:U,srcPos:X=0,dest:$,destPos:L=0,width:t,height:v,inverseDecode:d=!1}){const A=r.FeatureTest.isLittleEndian?4278190080:255,[C,O]=d?[0,A]:[A,0],p=t>>3,l=7&t,y=U.length;$=new Uint32Array($.buffer);for(let h=0;h<v;h++){for(const f=X+p;X<f;X++){const i=X<y?U[X]:255;$[L++]=128&i?O:C,$[L++]=64&i?O:C,$[L++]=32&i?O:C,$[L++]=16&i?O:C,$[L++]=8&i?O:C,$[L++]=4&i?O:C,$[L++]=2&i?O:C,$[L++]=1&i?O:C}if(0===l)continue;const m=X<y?U[X++]:255;for(let f=0;f<l;f++)$[L++]=m&1<<7-f?O:C}return{srcPos:X,destPos:L}};var r=D(1)},(se,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GlobalWorkerOptions=void 0;const D=Object.create(null);a.GlobalWorkerOptions=D,D.workerPort=void 0===D.workerPort?null:D.workerPort,D.workerSrc=void 0===D.workerSrc?"":D.workerSrc},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MessageHandler=void 0;var r=D(1);function X(L){switch(L instanceof Error||"object"==typeof L&&null!==L||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),L.name){case"AbortException":return new r.AbortException(L.message);case"MissingPDFException":return new r.MissingPDFException(L.message);case"PasswordException":return new r.PasswordException(L.message,L.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(L.message,L.status);case"UnknownErrorException":return new r.UnknownErrorException(L.message,L.details);default:return new r.UnknownErrorException(L.message,L.toString())}}a.MessageHandler=class ${constructor(t,v,d){this.sourceName=t,this.targetName=v,this.comObj=d,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=A=>{const C=A.data;if(C.targetName!==this.sourceName)return;if(C.stream)return void this._processStreamMessage(C);if(C.callback){const p=C.callbackId,l=this.callbackCapabilities[p];if(!l)throw new Error(`Cannot resolve callback ${p}`);if(delete this.callbackCapabilities[p],1===C.callback)l.resolve(C.data);else{if(2!==C.callback)throw new Error("Unexpected callback case");l.reject(X(C.reason))}return}const O=this.actionHandler[C.action];if(!O)throw new Error(`Unknown action from worker: ${C.action}`);if(C.callbackId){const p=this.sourceName,l=C.sourceName;new Promise(function(y){y(O(C.data))}).then(function(y){d.postMessage({sourceName:p,targetName:l,callback:1,callbackId:C.callbackId,data:y})},function(y){d.postMessage({sourceName:p,targetName:l,callback:2,callbackId:C.callbackId,reason:X(y)})})}else C.streamId?this._createStreamSink(C):O(C.data)},d.addEventListener("message",this._onComObjOnMessage)}on(t,v){const d=this.actionHandler;if(d[t])throw new Error(`There is already an actionName called "${t}"`);d[t]=v}send(t,v,d){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:v},d)}sendWithPromise(t,v,d){const A=this.callbackId++,C=(0,r.createPromiseCapability)();this.callbackCapabilities[A]=C;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:A,data:v},d)}catch(O){C.reject(O)}return C.promise}sendWithStream(t,v,d,A){const C=this.streamId++,O=this.sourceName,p=this.targetName,l=this.comObj;return new ReadableStream({start:y=>{const h=(0,r.createPromiseCapability)();return this.streamControllers[C]={controller:y,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:O,targetName:p,action:t,streamId:C,data:v,desiredSize:y.desiredSize},A),h.promise},pull:y=>{const h=(0,r.createPromiseCapability)();return this.streamControllers[C].pullCall=h,l.postMessage({sourceName:O,targetName:p,stream:6,streamId:C,desiredSize:y.desiredSize}),h.promise},cancel:y=>{(0,r.assert)(y instanceof Error,"cancel must have a valid reason");const h=(0,r.createPromiseCapability)();return this.streamControllers[C].cancelCall=h,this.streamControllers[C].isClosed=!0,l.postMessage({sourceName:O,targetName:p,stream:1,streamId:C,reason:X(y)}),h.promise}},d)}_createStreamSink(t){const v=t.streamId,d=this.sourceName,A=t.sourceName,C=this.comObj,O=this,p=this.actionHandler[t.action],l={enqueue(y,h=1,m){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),C.postMessage({sourceName:d,targetName:A,stream:4,streamId:v,chunk:y},m)},close(){this.isCancelled||(this.isCancelled=!0,C.postMessage({sourceName:d,targetName:A,stream:3,streamId:v}),delete O.streamSinks[v])},error(y){(0,r.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,C.postMessage({sourceName:d,targetName:A,stream:5,streamId:v,reason:X(y)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[v]=l,new Promise(function(y){y(p(t.data,l))}).then(function(){C.postMessage({sourceName:d,targetName:A,stream:8,streamId:v,success:!0})},function(y){C.postMessage({sourceName:d,targetName:A,stream:8,streamId:v,reason:X(y)})})}_processStreamMessage(t){const v=t.streamId,d=this.sourceName,A=t.sourceName,C=this.comObj,O=this.streamControllers[v],p=this.streamSinks[v];switch(t.stream){case 8:t.success?O.startCall.resolve():O.startCall.reject(X(t.reason));break;case 7:t.success?O.pullCall.resolve():O.pullCall.reject(X(t.reason));break;case 6:if(!p){C.postMessage({sourceName:d,targetName:A,stream:7,streamId:v,success:!0});break}p.desiredSize<=0&&t.desiredSize>0&&p.sinkCapability.resolve(),p.desiredSize=t.desiredSize,new Promise(function(l){l(p.onPull&&p.onPull())}).then(function(){C.postMessage({sourceName:d,targetName:A,stream:7,streamId:v,success:!0})},function(l){C.postMessage({sourceName:d,targetName:A,stream:7,streamId:v,reason:X(l)})});break;case 4:if((0,r.assert)(O,"enqueue should have stream controller"),O.isClosed)break;O.controller.enqueue(t.chunk);break;case 3:if((0,r.assert)(O,"close should have stream controller"),O.isClosed)break;O.isClosed=!0,O.controller.close(),this._deleteStreamController(O,v);break;case 5:(0,r.assert)(O,"error should have stream controller"),O.controller.error(X(t.reason)),this._deleteStreamController(O,v);break;case 2:t.success?O.cancelCall.resolve():O.cancelCall.reject(X(t.reason)),this._deleteStreamController(O,v);break;case 1:if(!p)break;new Promise(function(l){l(p.onCancel&&p.onCancel(X(t.reason)))}).then(function(){C.postMessage({sourceName:d,targetName:A,stream:2,streamId:v,success:!0})},function(l){C.postMessage({sourceName:d,targetName:A,stream:2,streamId:v,reason:X(l)})}),p.sinkCapability.reject(X(t.reason)),p.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(t,v){var d=this;return _asyncToGenerator(function*(){yield Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]),delete d.streamControllers[v]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var r=D(1);a.Metadata=class z{#e;#t;constructor({parsedData:X,rawData:$}){this.#e=X,this.#t=$}getRaw(){return this.#t}get(X){return this.#e.get(X)??null}getAll(){return(0,r.objectFromMap)(this.#e)}has(X){return this.#e.has(X)}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionalContentConfig=void 0;var r=D(1);class z{constructor($,L){this.visible=!0,this.name=$,this.intent=L}}a.OptionalContentConfig=class U{constructor($){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==$){this.name=$.name,this.creator=$.creator,this._order=$.order;for(const L of $.groups)this._groups.set(L.id,new z(L.name,L.intent));if("OFF"===$.baseState)for(const L of this._groups)L.visible=!1;for(const L of $.on)this._groups.get(L).visible=!0;for(const L of $.off)this._groups.get(L).visible=!1}}_evaluateVisibilityExpression($){const L=$.length;if(L<2)return!0;const t=$[0];for(let v=1;v<L;v++){const d=$[v];let A;if(Array.isArray(d))A=this._evaluateVisibilityExpression(d);else{if(!this._groups.has(d))return(0,r.warn)(`Optional content group not found: ${d}`),!0;A=this._groups.get(d).visible}switch(t){case"And":if(!A)return!1;break;case"Or":if(A)return!0;break;case"Not":return!A;default:return!0}}return"And"===t}isVisible($){if(0===this._groups.size)return!0;if(!$)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===$.type)return this._groups.has($.id)?this._groups.get($.id).visible:((0,r.warn)(`Optional content group not found: ${$.id}`),!0);if("OCMD"===$.type){if($.expression)return this._evaluateVisibilityExpression($.expression);if(!$.policy||"AnyOn"===$.policy){for(const L of $.ids){if(!this._groups.has(L))return(0,r.warn)(`Optional content group not found: ${L}`),!0;if(this._groups.get(L).visible)return!0}return!1}if("AllOn"===$.policy){for(const L of $.ids){if(!this._groups.has(L))return(0,r.warn)(`Optional content group not found: ${L}`),!0;if(!this._groups.get(L).visible)return!1}return!0}if("AnyOff"===$.policy){for(const L of $.ids){if(!this._groups.has(L))return(0,r.warn)(`Optional content group not found: ${L}`),!0;if(!this._groups.get(L).visible)return!0}return!1}if("AllOff"===$.policy){for(const L of $.ids){if(!this._groups.has(L))return(0,r.warn)(`Optional content group not found: ${L}`),!0;if(this._groups.get(L).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${$.policy}.`),!0}return(0,r.warn)(`Unknown group type ${$.type}.`),!0}setVisibility($,L=!0){this._groups.has($)?this._groups.get($).visible=!!L:(0,r.warn)(`Optional content group not found: ${$}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,r.objectFromMap)(this._groups):null}getGroup($){return this._groups.get($)||null}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFDataTransportStream=void 0;var r=D(1),z=D(5);a.PDFDataTransportStream=class U{constructor(t,v){(0,r.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;const d=t.initialData;if(d?.length>0){const A=new Uint8Array(d).buffer;this._queuedChunks.push(A)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((A,C)=>{this._onReceiveData({begin:A,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((A,C)=>{this._onProgress({loaded:A,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(A=>{this._onReceiveData({chunk:A})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const v=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(v):this._queuedChunks.push(v);else{const d=this._rangeReaders.some(function(A){return A._begin===t.begin&&(A._enqueue(v),!0)});(0,r.assert)(d,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){if(void 0===t.total){const v=this._rangeReaders[0];v?.onProgress&&v.onProgress({loaded:t.loaded})}else{const v=this._fullRequestReader;v?.onProgress&&v.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const v=this._rangeReaders.indexOf(t);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new X(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,v){if(v<=this._progressiveDataLength)return null;const d=new $(this,t,v);return this._pdfDataRangeTransport.requestDataRange(t,v),this._rangeReaders.push(d),d}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const v of this._rangeReaders.slice(0))v.cancel(t);this._pdfDataRangeTransport.abort()}};class X{constructor(t,v,d=!1,A=null){this._stream=t,this._done=d||!1,this._filename=(0,z.isPdfFile)(A)?A:null,this._queuedChunks=v||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var t=this;return _asyncToGenerator(function*(){if(t._queuedChunks.length>0)return{value:t._queuedChunks.shift(),done:!1};if(t._done)return{value:void 0,done:!0};const v=(0,r.createPromiseCapability)();return t._requests.push(v),v.promise})()}cancel(t){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ${constructor(t,v,d){this._stream=t,this._begin=v,this._end=d,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var t=this;return _asyncToGenerator(function*(){if(t._queuedChunk){const d=t._queuedChunk;return t._queuedChunk=null,{value:d,done:!1}}if(t._done)return{value:void 0,done:!0};const v=(0,r.createPromiseCapability)();return t._requests.push(v),v.promise})()}cancel(t){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(se,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaText=void 0;class D{static textContent(z){const U=[],X={items:U,styles:Object.create(null)};return function $(L){if(!L)return;let t=null;const v=L.name;if("#text"===v)t=L.value;else{if(!D.shouldBuildText(v))return;L?.attributes?.textContent?t=L.attributes.textContent:L.value&&(t=L.value)}if(null!==t&&U.push({str:t}),L.children)for(const d of L.children)$(d)}(z),X}static shouldBuildText(z){return!("textarea"===z||"input"===z||"option"===z||"select"===z)}}a.XfaText=D},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NodeStandardFontDataFactory=a.NodeCanvasFactory=a.NodeCMapReaderFactory=void 0;var r=D(6);const z=function(L){return new Promise((t,v)=>{__webpack_require__(172).readFile(L,(A,C)=>{!A&&C?t(new Uint8Array(C)):v(new Error(A))})})};a.NodeCanvasFactory=class U extends r.BaseCanvasFactory{_createCanvas(t,v){return __webpack_require__(3414).createCanvas(t,v)}},a.NodeCMapReaderFactory=class X extends r.BaseCMapReaderFactory{_fetchData(t,v){return z(t).then(d=>({cMapData:d,compressionType:v}))}},a.NodeStandardFontDataFactory=class $ extends r.BaseStandardFontDataFactory{_fetchData(t){return z(t)}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationLayer=void 0;var r=D(1),z=D(5),U=D(8),X=D(21),$=D(22);const L=1e3,t=new WeakSet;function v(S){return{width:S[2]-S[0],height:S[3]-S[1]}}class d{static create(e){switch(e.data.annotationType){case r.AnnotationType.LINK:return new C(e);case r.AnnotationType.TEXT:return new O(e);case r.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new l(e);case"Btn":return e.data.radioButton?new h(e):e.data.checkBox?new y(e):new m(e);case"Ch":return new f(e)}return new p(e);case r.AnnotationType.POPUP:return new i(e);case r.AnnotationType.FREETEXT:return new _(e);case r.AnnotationType.LINE:return new x(e);case r.AnnotationType.SQUARE:return new E(e);case r.AnnotationType.CIRCLE:return new k(e);case r.AnnotationType.POLYLINE:return new F(e);case r.AnnotationType.CARET:return new T(e);case r.AnnotationType.INK:return new P(e);case r.AnnotationType.POLYGON:return new c(e);case r.AnnotationType.HIGHLIGHT:return new R(e);case r.AnnotationType.UNDERLINE:return new B(e);case r.AnnotationType.SQUIGGLY:return new w(e);case r.AnnotationType.STRIKEOUT:return new I(e);case r.AnnotationType.STAMP:return new V(e);case r.AnnotationType.FILEATTACHMENT:return new Q(e);default:return new A(e)}}}class A{constructor(e,{isRenderable:n=!1,ignoreBorder:o=!1,createQuadrilaterals:g=!1}={}){this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,n&&(this.container=this._createContainer(o)),g&&(this.quadrilaterals=this._createQuadrilaterals(o))}_createContainer(e=!1){const n=this.data,o=this.page,g=this.viewport,u=document.createElement("section");let{width:b,height:M}=v(n.rect);u.setAttribute("data-annotation-id",n.id);const W=r.Util.normalizeRect([n.rect[0],o.view[3]-n.rect[1]+o.view[1],n.rect[2],o.view[3]-n.rect[3]+o.view[1]]);if(n.hasOwnCanvas){const j=g.transform.slice(),[q,Y]=r.Util.singularValueDecompose2dScale(j);b=Math.ceil(b*q),M=Math.ceil(M*Y),W[0]*=q,W[1]*=Y;for(let H=0;H<4;H++)j[H]=Math.sign(j[H]);u.style.transform=`matrix(${j.join(",")})`}else u.style.transform=`matrix(${g.transform.join(",")})`;if(u.style.transformOrigin=`${-W[0]}px ${-W[1]}px`,!e&&n.borderStyle.width>0){u.style.borderWidth=`${n.borderStyle.width}px`,n.borderStyle.style!==r.AnnotationBorderStyleType.UNDERLINE&&(b-=2*n.borderStyle.width,M-=2*n.borderStyle.width);const j=n.borderStyle.horizontalCornerRadius,q=n.borderStyle.verticalCornerRadius;switch((j>0||q>0)&&(u.style.borderRadius=`${j}px / ${q}px`),n.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:u.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:u.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:u.style.borderBottomStyle="solid"}n.borderColor||n.color?u.style.borderColor=r.Util.makeHexColor(0|n.color[0],0|n.color[1],0|n.color[2]):u.style.borderWidth=0}return u.style.left=`${W[0]}px`,u.style.top=`${W[1]}px`,n.hasOwnCanvas?u.style.width=u.style.height="auto":(u.style.width=`${b}px`,u.style.height=`${M}px`),u}get _commonActions(){const e=(n,o,g)=>{const u=g.detail[n];g.target.style[o]=X.ColorConverters[`${u[0]}_HTML`](u.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:n=>{const o=n.detail.display%2==1;n.target.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:o,print:0===n.detail.display||3===n.detail.display})},print:n=>{this.annotationStorage.setValue(this.data.id,{print:n.detail.print})},hidden:n=>{n.target.style.visibility=n.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:n.detail.hidden})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.detail.readonly?n.target.setAttribute("readonly",""):n.target.removeAttribute("readonly")},required:n=>{n.detail.required?n.target.setAttribute("required",""):n.target.removeAttribute("required")},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)}})}_dispatchEventFromSandbox(e,n){const o=this._commonActions;for(const g of Object.keys(n.detail)){const u=e[g]||o[g];u&&u(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const o=this._commonActions;for(const[g,u]of Object.entries(n)){const b=o[g];b&&(b({detail:u,target:e}),delete n[g])}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const n=[],o=this.data.rect;for(const g of this.data.quadPoints)this.data.rect=[g[2].x,g[2].y,g[1].x,g[1].y],n.push(this._createContainer(e));return this.data.rect=o,n}_createPopup(e,n){let o=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,o=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=o.style.height,e.style.width=o.style.width,o.appendChild(e));const u=new s({container:o,trigger:e,color:n.color,titleObj:n.titleObj,modificationDate:n.modificationDate,contentsObj:n.contentsObj,richText:n.richText,hideWrapper:!0}).render();u.style.left=o.style.width,o.appendChild(u)}_renderQuadrilaterals(e){for(const n of this.quadrilaterals)n.className=e;return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const o=[];if(this._fieldObjects){const g=this._fieldObjects[e];if(g)for(const{page:u,id:b,exportValues:M}of g){if(-1===u||b===n)continue;const W="string"==typeof M?M:null,j=document.getElementById(b);!j||t.has(j)?o.push({id:b,exportValue:W,domElement:j}):(0,r.warn)(`_getElementsByName - element not allowed: ${b}`)}return o}for(const g of document.getElementsByName(e)){const{id:u,exportValue:b}=g;u!==n&&(!t.has(g)||o.push({id:u,exportValue:b,domElement:g}))}return o}static get platform(){const e=typeof navigator<"u"?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class C extends A{constructor(e,n=null){super(e,{isRenderable:!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"])),ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:e,linkService:n}=this,o=document.createElement("a");if(e.url)n.addLinkAttributes(o,e.url,e.newWindow);else if(e.action)this._bindNamedAction(o,e.action);else if(e.dest)this._bindLink(o,e.dest);else{let g=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(g=!0,this._bindJSAction(o,e)),e.resetForm?this._bindResetFormAction(o,e.resetForm):g||this._bindLink(o,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((g,u)=>{const b=0===u?o:o.cloneNode();return g.appendChild(b),g}):(this.container.className="linkAnnotation",this.container.appendChild(o),this.container)}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||""===n)&&(e.className="internalLink")}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),e.className="internalLink"}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const o=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const g of Object.keys(n.actions)){const u=o.get(g);!u||(e[u]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:g}}),!1))}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,n){const o=e.onclick;if(o||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects)return(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(o||(e.onclick=()=>!1));e.onclick=()=>{o&&o();const{fields:g,refs:u,include:b}=n,M=[];if(0!==g.length||0!==u.length){const q=new Set(u);for(const Y of g){const H=this._fieldObjects[Y]||[];for(const{id:ee}of H)q.add(ee)}for(const Y of Object.values(this._fieldObjects))for(const H of Y)q.has(H.id)===b&&M.push(H)}else for(const q of Object.values(this._fieldObjects))M.push(...q);const W=this.annotationStorage,j=[];for(const q of M){const{id:Y}=q;switch(j.push(Y),q.type){case"text":case"combobox":case"listbox":W.setValue(Y,{value:q.defaultValue||""});break;case"checkbox":case"radiobutton":W.setValue(Y,{value:q.defaultValue===q.exportValues});break;default:continue}const H=document.getElementById(Y);!H||!t.has(H)||H.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:j,name:"ResetForm"}}),!1}}}class O extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class p extends A{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:n,isMac:o}=A.platform;return n&&e.ctrlKey||o&&e.metaKey}_setEventListener(e,n,o,g){n.includes("mouse")?e.addEventListener(n,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:g(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):e.addEventListener(n,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:g(u)}})})}_setEventListeners(e,n,o){for(const[g,u]of n)("Action"===u||this.data.actions?.[u])&&this._setEventListener(e,g,u,o)}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=null===n?"transparent":r.Util.makeHexColor(n[0],n[1],n[2])}}class l extends p{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,n,o,g){const u=this.annotationStorage;for(const b of this._getElementsByName(e.name,e.id))b.domElement&&(b.domElement[n]=o),u.setValue(b.id,{[g]:o})}render(){const e=this.annotationStorage,n=this.data.id;this.container.className="textWidgetAnnotation";let o=null;if(this.renderForms){const g=e.getValue(n,{value:this.data.fieldValue}),u=g.formattedValue||g.value||"",b={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(o=document.createElement("textarea"),o.textContent=u):(o=document.createElement("input"),o.type="text",o.setAttribute("value",u)),t.add(o),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.tabIndex=L,b.userValue=u,o.setAttribute("id",n),o.addEventListener("input",W=>{e.setValue(n,{value:W.target.value}),this.setPropertyOnSiblings(o,"value",W.target.value,"value")}),o.addEventListener("resetform",W=>{o.value=b.userValue=this.data.defaultFieldValue??"",b.formattedValue=null});let M=W=>{const{formattedValue:j}=b;null!=j&&(W.target.value=j),W.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){o.addEventListener("focus",j=>{b.userValue&&(j.target.value=b.userValue),b.valueOnFocus=j.target.value}),o.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value(Y){b.userValue=Y.detail.value??"",e.setValue(n,{value:b.userValue.toString()}),Y.target.value=b.userValue},formattedValue(Y){const{formattedValue:H}=Y.detail;b.formattedValue=H,null!=H&&Y.target!==document.activeElement&&(Y.target.value=H),e.setValue(n,{formattedValue:H})},selRange(Y){Y.target.setSelectionRange(...Y.detail.selRange)}},j)}),o.addEventListener("keydown",j=>{let q=-1;if("Escape"===j.key?q=0:"Enter"===j.key?q=2:"Tab"===j.key&&(q=3),-1===q)return;const{value:Y}=j.target;b.valueOnFocus!==Y&&(b.userValue=Y,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:Y,willCommit:!0,commitKey:q,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}))});const W=M;M=null,o.addEventListener("blur",j=>{const{value:q}=j.target;b.userValue=q,this._mouseState.isDown&&b.valueOnFocus!==q&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:q,willCommit:!0,commitKey:1,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}),W(j)}),this.data.actions?.Keystroke&&o.addEventListener("beforeinput",j=>{const{data:q,target:Y}=j,{value:H,selectionStart:ee,selectionEnd:G}=Y;let N=ee,K=G;switch(j.inputType){case"deleteWordBackward":{const ae=H.substring(0,ee).match(/\w*[^\w]*$/);ae&&(N-=ae[0].length);break}case"deleteWordForward":{const ae=H.substring(ee).match(/^[^\w]*\w*/);ae&&(K+=ae[0].length);break}case"deleteContentBackward":ee===G&&(N-=1);break;case"deleteContentForward":ee===G&&(K+=1)}j.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:H,change:q||"",willCommit:!1,selStart:N,selEnd:K}})}),this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.value)}if(M&&o.addEventListener("blur",M),null!==this.data.maxLen&&(o.maxLength=this.data.maxLen),this.data.comb){const j=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;o.classList.add("comb"),o.style.letterSpacing=`calc(${j}px - 1ch)`}}else o=document.createElement("div"),o.textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell";return this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.appendChild(o),this.container}_setTextStyle(e){const{fontSize:o,fontColor:g}=this.data.defaultAppearanceData,u=e.style;o&&(u.fontSize=`${o}px`),u.color=r.Util.makeHexColor(g[0],g[1],g[2]),null!==this.data.textAlignment&&(u.textAlign=["left","center","right"][this.data.textAlignment])}}class y extends p{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,o=n.id;let g=e.getValue(o,{value:n.exportValue===n.fieldValue}).value;"string"==typeof g&&(g="Off"!==g,e.setValue(o,{value:g})),this.container.className="buttonWidgetAnnotation checkBox";const u=document.createElement("input");return t.add(u),u.disabled=n.readOnly,u.type="checkbox",u.name=n.fieldName,g&&u.setAttribute("checked",!0),u.setAttribute("id",o),u.setAttribute("exportValue",n.exportValue),u.tabIndex=L,u.addEventListener("change",b=>{const{name:M,checked:W}=b.target;for(const j of this._getElementsByName(M,o)){const q=W&&j.exportValue===n.exportValue;j.domElement&&(j.domElement.checked=q),e.setValue(j.id,{value:q})}e.setValue(o,{value:W})}),u.addEventListener("resetform",b=>{b.target.checked=(n.defaultFieldValue||"Off")===n.exportValue}),this.enableScripting&&this.hasJSActions&&(u.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({value(W){W.target.checked="Off"!==W.detail.value,e.setValue(o,{value:W.target.checked})}},b)}),this._setEventListeners(u,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.checked)),this._setBackgroundColor(u),this._setDefaultPropertiesFromJS(u),this.container.appendChild(u),this.container}}class h extends p{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,n=this.data,o=n.id;let g=e.getValue(o,{value:n.fieldValue===n.buttonValue}).value;"string"==typeof g&&(g=g!==n.buttonValue,e.setValue(o,{value:g}));const u=document.createElement("input");if(t.add(u),u.disabled=n.readOnly,u.type="radio",u.name=n.fieldName,g&&u.setAttribute("checked",!0),u.setAttribute("id",o),u.tabIndex=L,u.addEventListener("change",b=>{const{name:M,checked:W}=b.target;for(const j of this._getElementsByName(M,o))e.setValue(j.id,{value:!1});e.setValue(o,{value:W})}),u.addEventListener("resetform",b=>{const M=n.defaultFieldValue;b.target.checked=null!=M&&M===n.buttonValue}),this.enableScripting&&this.hasJSActions){const b=n.buttonValue;u.addEventListener("updatefromsandbox",M=>{this._dispatchEventFromSandbox({value:j=>{const q=b===j.detail.value;for(const Y of this._getElementsByName(j.target.name)){const H=q&&Y.id===o;Y.domElement&&(Y.domElement.checked=H),e.setValue(Y.id,{value:H})}}},M)}),this._setEventListeners(u,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],M=>M.target.checked)}return this._setBackgroundColor(u),this._setDefaultPropertiesFromJS(u),this.container.appendChild(u),this.container}}class m extends C{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(e),e}}class f extends p{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,n=this.data.id,o=e.getValue(n,{value:this.data.fieldValue});let{fontSize:g}=this.data.defaultAppearanceData;g||(g=9);const u=`calc(${g}px * var(--zoom-factor))`,b=document.createElement("select");t.add(b),b.disabled=this.data.readOnly,b.name=this.data.fieldName,b.setAttribute("id",n),b.tabIndex=L,b.style.fontSize=`${g}px`,this.data.combo||(b.size=this.data.options.length,this.data.multiSelect&&(b.multiple=!0)),b.addEventListener("resetform",j=>{const q=this.data.defaultFieldValue;for(const Y of b.options)Y.selected=Y.value===q});for(const j of this.data.options){const q=document.createElement("option");q.textContent=j.displayValue,q.value=j.exportValue,this.data.combo&&(q.style.fontSize=u),o.value.includes(j.exportValue)&&q.setAttribute("selected",!0),b.appendChild(q)}const M=(j,q)=>{const Y=q?"value":"textContent",H=j.target.options;return j.target.multiple?Array.prototype.filter.call(H,ee=>ee.selected).map(ee=>ee[Y]):-1===H.selectedIndex?null:H[H.selectedIndex][Y]},W=j=>Array.prototype.map.call(j.target.options,Y=>({displayValue:Y.textContent,exportValue:Y.value}));return this.enableScripting&&this.hasJSActions?(b.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value(Y){const H=Y.detail.value,ee=new Set(Array.isArray(H)?H:[H]);for(const G of b.options)G.selected=ee.has(G.value);e.setValue(n,{value:M(Y,!0)})},multipleSelection(Y){b.multiple=!0},remove(Y){const H=b.options,ee=Y.detail.remove;H[ee].selected=!1,b.remove(ee),H.length>0&&-1===Array.prototype.findIndex.call(H,N=>N.selected)&&(H[0].selected=!0),e.setValue(n,{value:M(Y,!0),items:W(Y)})},clear(Y){for(;0!==b.length;)b.remove(0);e.setValue(n,{value:null,items:[]})},insert(Y){const{index:H,displayValue:ee,exportValue:G}=Y.detail.insert,N=document.createElement("option");N.textContent=ee,N.value=G,b.insertBefore(N,b.children[H]),e.setValue(n,{value:M(Y,!0),items:W(Y)})},items(Y){const{items:H}=Y.detail;for(;0!==b.length;)b.remove(0);for(const ee of H){const{displayValue:G,exportValue:N}=ee,K=document.createElement("option");K.textContent=G,K.value=N,b.appendChild(K)}b.options.length>0&&(b.options[0].selected=!0),e.setValue(n,{value:M(Y,!0),items:W(Y)})},indices(Y){const H=new Set(Y.detail.indices);for(const ee of Y.target.options)ee.selected=H.has(ee.index);e.setValue(n,{value:M(Y,!0)})},editable(Y){Y.target.disabled=!Y.detail.editable}},j)}),b.addEventListener("input",j=>{const q=M(j,!0),Y=M(j,!1);e.setValue(n,{value:q}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:Y,changeEx:q,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(b,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],j=>j.target.checked)):b.addEventListener("input",function(j){e.setValue(n,{value:M(j,!0)})}),this._setBackgroundColor(b),this._setDefaultPropertiesFromJS(b),this.container.appendChild(b),this.container}}class i extends A{constructor(e){super(e,{isRenderable:!!(e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const o=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===o.length)return this.container;const g=new s({container:this.container,trigger:Array.from(o),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),u=this.page,b=r.Util.normalizeRect([this.data.parentRect[0],u.view[3]-this.data.parentRect[1]+u.view[1],this.data.parentRect[2],u.view[3]-this.data.parentRect[3]+u.view[1]]),M=b[0]+this.data.parentRect[2]-this.data.parentRect[0],W=b[1];return this.container.style.transformOrigin=`${-M}px ${-W}px`,this.container.style.left=`${M}px`,this.container.style.top=`${W}px`,this.container.appendChild(g.render()),this.container}}class s{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const n=document.createElement("div");n.className="popupWrapper",this.hideElement=this.hideWrapper?n:this.container,this.hideElement.hidden=!0;const o=document.createElement("div");o.className="popup";const g=this.color;g&&(o.style.backgroundColor=r.Util.makeHexColor(0|.7*(255-g[0])+g[0],0|.7*(255-g[1])+g[1],0|.7*(255-g[2])+g[2]));const u=document.createElement("h1");u.dir=this.titleObj.dir,u.textContent=this.titleObj.str,o.appendChild(u);const b=z.PDFDateString.toDateObject(this.modificationDate);if(b){const M=document.createElement("span");M.className="popupDate",M.textContent="{{date}}, {{time}}",M.dataset.l10nId="annotation_date_string",M.dataset.l10nArgs=JSON.stringify({date:b.toLocaleDateString(),time:b.toLocaleTimeString()}),o.appendChild(M)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const M=this._formatContents(this.contentsObj);o.appendChild(M)}else $.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:o}),o.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const M of this.trigger)M.addEventListener("click",this._toggle.bind(this)),M.addEventListener("mouseover",this._show.bind(this,!1)),M.addEventListener("mouseout",this._hide.bind(this,!1));return o.addEventListener("click",this._hide.bind(this,!0)),n.appendChild(o),n}_formatContents({str:e,dir:n}){const o=document.createElement("p");o.className="popupContent",o.dir=n;const g=e.split(/(?:\r\n?|\n)/);for(let u=0,b=g.length;u<b;++u)o.appendChild(document.createTextNode(g[u])),u<b-1&&o.appendChild(document.createElement("br"));return o}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class _ extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class x extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:n,height:o}=v(e.rect),g=this.svgFactory.create(n,o),u=this.svgFactory.createElement("svg:line");return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),g.appendChild(u),this.container.append(g),this._createPopup(u,e),this.container}}class E extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:n,height:o}=v(e.rect),g=this.svgFactory.create(n,o),u=e.borderStyle.width,b=this.svgFactory.createElement("svg:rect");return b.setAttribute("x",u/2),b.setAttribute("y",u/2),b.setAttribute("width",n-u),b.setAttribute("height",o-u),b.setAttribute("stroke-width",u||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),g.appendChild(b),this.container.append(g),this._createPopup(b,e),this.container}}class k extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:n,height:o}=v(e.rect),g=this.svgFactory.create(n,o),u=e.borderStyle.width,b=this.svgFactory.createElement("svg:ellipse");return b.setAttribute("cx",n/2),b.setAttribute("cy",o/2),b.setAttribute("rx",n/2-u/2),b.setAttribute("ry",o/2-u/2),b.setAttribute("stroke-width",u||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),g.appendChild(b),this.container.append(g),this._createPopup(b,e),this.container}}class F extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:n,height:o}=v(e.rect),g=this.svgFactory.create(n,o);let u=[];for(const M of e.vertices)u.push(M.x-e.rect[0]+","+(e.rect[3]-M.y));u=u.join(" ");const b=this.svgFactory.createElement(this.svgElementName);return b.setAttribute("points",u),b.setAttribute("stroke-width",e.borderStyle.width||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),g.appendChild(b),this.container.append(g),this._createPopup(b,e),this.container}}class c extends F{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class T extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:n,height:o}=v(e.rect),g=this.svgFactory.create(n,o);for(const u of e.inkLists){let b=[];for(const W of u)b.push(`${W.x-e.rect[0]},${e.rect[3]-W.y}`);b=b.join(" ");const M=this.svgFactory.createElement(this.svgElementName);M.setAttribute("points",b),M.setAttribute("stroke-width",e.borderStyle.width||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),this._createPopup(M,e),g.appendChild(M)}return this.container.append(g),this.container}}class R extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class B extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class w extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class I extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class V extends A{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends A{constructor(e){super(e,{isRenderable:!0});const{filename:n,content:o}=this.data.file;this.filename=(0,z.getFilenameFromUrl)(n),this.content=o,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:n,content:o})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}a.AnnotationLayer=class te{static render(e){const n=[],o=[];for(const u of e.annotations){if(!u)continue;const{width:b,height:M}=v(u.rect);if(!(b<=0||M<=0)){if(u.annotationType===r.AnnotationType.POPUP){o.push(u);continue}n.push(u)}}o.length&&n.push(...o);const g=e.div;for(const u of n){const b=d.create({data:u,layer:g,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new z.DOMSVGFactory,annotationStorage:e.annotationStorage||new U.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(b.isRenderable){const M=b.render();if(u.hidden&&(M.style.visibility="hidden"),Array.isArray(M))for(const W of M)g.appendChild(W);else b instanceof i?g.prepend(M):g.appendChild(M)}}this.#e(g,e.annotationCanvasMap)}static update(e){const{page:n,viewport:o,annotations:g,annotationCanvasMap:u,div:b}=e,M=o.transform,W=`matrix(${M.join(",")})`;let j,q;for(const Y of g){const H=b.querySelectorAll(`[data-annotation-id="${Y.id}"]`);if(H)for(const ee of H)if(Y.hasOwnCanvas){const G=r.Util.normalizeRect([Y.rect[0],n.view[3]-Y.rect[1]+n.view[1],Y.rect[2],n.view[3]-Y.rect[3]+n.view[1]]);if(!q){j=Math.abs(M[0]||M[1]);const ae=M.slice();for(let ie=0;ie<4;ie++)ae[ie]=Math.sign(ae[ie]);q=`matrix(${ae.join(",")})`}const N=G[0]*j,K=G[1]*j;ee.style.left=`${N}px`,ee.style.top=`${K}px`,ee.style.transformOrigin=`${-N}px ${-K}px`,ee.style.transform=q}else ee.style.transform=W}this.#e(b,u),b.hidden=!1}static#e(e,n){if(n){for(const[o,g]of n){const u=e.querySelector(`[data-annotation-id="${o}"]`);if(!u)continue;const{firstChild:b}=u;"CANVAS"===b.nodeName?u.replaceChild(g,b):u.insertBefore(g,b)}n.clear()}}}},(se,a)=>{function D(z){return Math.floor(255*Math.max(0,Math.min(1,z))).toString(16).padStart(2,"0")}Object.defineProperty(a,"__esModule",{value:!0}),a.ColorConverters=void 0,a.ColorConverters=class r{static CMYK_G([U,X,$,L]){return["G",1-Math.min(1,.3*U+.59*$+.11*X+L)]}static G_CMYK([U]){return["CMYK",0,0,0,1-U]}static G_RGB([U]){return["RGB",U,U,U]}static G_HTML([U]){const X=D(U);return`#${X}${X}${X}`}static RGB_G([U,X,$]){return["G",.3*U+.59*X+.11*$]}static RGB_HTML([U,X,$]){return`#${D(U)}${D(X)}${D($)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([U,X,$,L]){return["RGB",1-Math.min(1,U+L),1-Math.min(1,$+L),1-Math.min(1,X+L)]}static CMYK_HTML(U){return this.RGB_HTML(this.CMYK_RGB(U))}static RGB_CMYK([U,X,$]){const L=1-U,t=1-X,v=1-$;return["CMYK",L,t,v,Math.min(L,t,v)]}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayer=void 0;var r=D(18);a.XfaLayer=class z{static setupStorage(X,$,L,t,v){const d=t.getValue($,{value:null});switch(L.name){case"textarea":if(null!==d.value&&(X.textContent=d.value),"print"===v)break;X.addEventListener("input",A=>{t.setValue($,{value:A.target.value})});break;case"input":if("radio"===L.attributes.type||"checkbox"===L.attributes.type){if(d.value===L.attributes.xfaOn?X.setAttribute("checked",!0):d.value===L.attributes.xfaOff&&X.removeAttribute("checked"),"print"===v)break;X.addEventListener("change",A=>{t.setValue($,{value:A.target.getAttribute(A.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==d.value&&X.setAttribute("value",d.value),"print"===v)break;X.addEventListener("input",A=>{t.setValue($,{value:A.target.value})})}break;case"select":if(null!==d.value)for(const A of L.children)A.attributes.value===d.value&&(A.attributes.selected=!0);X.addEventListener("input",A=>{const C=A.target.options;t.setValue($,{value:-1===C.selectedIndex?"":C[C.selectedIndex].value})})}}static setAttributes({html:X,element:$,storage:L=null,intent:t,linkService:v}){const{attributes:d}=$,A=X instanceof HTMLAnchorElement;"radio"===d.type&&(d.name=`${d.name}-${t}`);for(const[C,O]of Object.entries(d))if(null!=O&&"dataId"!==C)if("style"!==C)if("textContent"===C)X.textContent=O;else if("class"===C)O.length&&X.setAttribute(C,O.join(" "));else{if(A&&("href"===C||"newWindow"===C))continue;X.setAttribute(C,O)}else Object.assign(X.style,O);A&&v.addLinkAttributes(X,d.href,d.newWindow),L&&d.dataId&&this.setupStorage(X,d.dataId,$,L)}static render(X){const $=X.annotationStorage,L=X.linkService,t=X.xfaHtml,v=X.intent||"display",d=document.createElement(t.name);t.attributes&&this.setAttributes({html:d,element:t,intent:v,linkService:L});const A=[[t,-1,d]],C=X.div;if(C.appendChild(d),X.viewport){const p=`matrix(${X.viewport.transform.join(",")})`;C.style.transform=p}"richText"!==v&&C.setAttribute("class","xfaLayer xfaFont");const O=[];for(;A.length>0;){const[p,l,y]=A[A.length-1];if(l+1===p.children.length){A.pop();continue}const h=p.children[++A[A.length-1][1]];if(null===h)continue;const{name:m}=h;if("#text"===m){const i=document.createTextNode(h.value);O.push(i),y.appendChild(i);continue}let f;if(f=h?.attributes?.xmlns?document.createElementNS(h.attributes.xmlns,m):document.createElement(m),y.appendChild(f),h.attributes&&this.setAttributes({html:f,element:h,storage:$,intent:v,linkService:L}),h.children&&h.children.length>0)A.push([h,-1,f]);else if(h.value){const i=document.createTextNode(h.value);r.XfaText.shouldBuildText(m)&&O.push(i),f.appendChild(i)}}for(const p of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:O}}static update(X){const $=`matrix(${X.viewport.transform.join(",")})`;X.div.style.transform=$,X.div.hidden=!1}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.renderTextLayer=function y(h){const m=new l({textContent:h.textContent,textContentStream:h.textContentStream,container:h.container,viewport:h.viewport,textDivs:h.textDivs,textContentItemsStr:h.textContentItemsStr,enhanceTextSelection:h.enhanceTextSelection});return m._render(h.timeout),m};var r=D(1);const U=30,$=new Map,L=/^\s+$/g;function v(h,m,f,i){const s=document.createElement("span"),_=h._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==m.str,hasEOL:m.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==m.str,hasEOL:m.hasEOL};h._textDivs.push(s);const x=r.Util.transform(h._viewport.transform,m.transform);let E=Math.atan2(x[1],x[0]);const k=f[m.fontName];k.vertical&&(E+=Math.PI/2);const F=Math.hypot(x[2],x[3]),c=F*function t(h,m){const f=$.get(h);if(f)return f;m.save(),m.font=`30px ${h}`;const i=m.measureText("");let s=i.fontBoundingBoxAscent,_=Math.abs(i.fontBoundingBoxDescent);if(s){m.restore();const E=s/(s+_);return $.set(h,E),E}m.strokeStyle="red",m.clearRect(0,0,U,U),m.strokeText("g",0,0);let x=m.getImageData(0,0,U,U).data;_=0;for(let E=x.length-1-3;E>=0;E-=4)if(x[E]>0){_=Math.ceil(E/4/U);break}m.clearRect(0,0,U,U),m.strokeText("A",0,U),x=m.getImageData(0,0,U,U).data,s=0;for(let E=0,k=x.length;E<k;E+=4)if(x[E]>0){s=U-Math.floor(E/4/U);break}if(m.restore(),s){const E=s/(s+_);return $.set(h,E),E}return $.set(h,.8),.8}(k.fontFamily,i);let T,P;0===E?(T=x[4],P=x[5]-c):(T=x[4]+c*Math.sin(E),P=x[5]-c*Math.cos(E)),s.style.left=`${T}px`,s.style.top=`${P}px`,s.style.fontSize=`${F}px`,s.style.fontFamily=k.fontFamily,s.setAttribute("role","presentation"),s.textContent=m.str,s.dir=m.dir,h._fontInspectorEnabled&&(s.dataset.fontName=m.fontName),0!==E&&(_.angle=E*(180/Math.PI));let R=!1;if(m.str.length>1||h._enhanceTextSelection&&L.test(m.str))R=!0;else if(" "!==m.str&&m.transform[0]!==m.transform[3]){const B=Math.abs(m.transform[0]),w=Math.abs(m.transform[3]);B!==w&&Math.max(B,w)/Math.min(B,w)>1.5&&(R=!0)}if(R&&(_.canvasWidth=k.vertical?m.height*h._viewport.scale:m.width*h._viewport.scale),h._textDivProperties.set(s,_),h._textContentStream&&h._layoutText(s),h._enhanceTextSelection&&_.hasText){let B=1,w=0;0!==E&&(B=Math.cos(E),w=Math.sin(E));const I=(k.vertical?m.height:m.width)*h._viewport.scale,V=F;let Q,te;0!==E?(Q=[B,w,-w,B,T,P],te=r.Util.getAxialAlignedBoundingBox([0,0,I,V],Q)):te=[T,P,T+I,P+V],h._bounds.push({left:te[0],top:te[1],right:te[2],bottom:te[3],div:s,size:[I,V],m:Q})}}function d(h){if(h._canceled)return;const m=h._textDivs,f=h._capability,i=m.length;if(i>1e5)return h._renderingDone=!0,void f.resolve();if(!h._textContentStream)for(let s=0;s<i;s++)h._layoutText(m[s]);h._renderingDone=!0,f.resolve()}function A(h,m,f){let i=0;for(let s=0;s<f;s++){const _=h[m++];_>0&&(i=i?Math.min(_,i):_)}return i}function p(h,m){m.sort(function(s,_){return s.x1-_.x1||s.index-_.index});const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const s of m){let _=0;for(;_<i.length&&i[_].end<=s.y1;)_++;let x=i.length-1;for(;x>=0&&i[x].start>=s.y2;)x--;let E,k,F,c,T=-1/0;for(F=_;F<=x;F++){let B;E=i[F],k=E.boundary,B=k.x2>s.x1?k.index>s.index?k.x1New:s.x1:void 0===k.x2New?(k.x2+s.x1)/2:k.x2New,B>T&&(T=B)}for(s.x1New=T,F=_;F<=x;F++)E=i[F],k=E.boundary,void 0===k.x2New?k.x2>s.x1?k.index>s.index&&(k.x2New=k.x2):k.x2New=T:k.x2New>T&&(k.x2New=Math.max(T,k.x2));const P=[];let R=null;for(F=_;F<=x;F++){E=i[F],k=E.boundary;const B=k.x2>s.x2?k:s;R===B?P[P.length-1].end=E.end:(P.push({start:E.start,end:E.end,boundary:B}),R=B)}for(i[_].start<s.y1&&(P[0].start=s.y1,P.unshift({start:i[_].start,end:s.y1,boundary:i[_].boundary})),s.y2<i[x].end&&(P[P.length-1].end=s.y2,P.push({start:s.y2,end:i[x].end,boundary:i[x].boundary})),F=_;F<=x;F++){if(E=i[F],k=E.boundary,void 0!==k.x2New)continue;let B=!1;for(c=_-1;!B&&c>=0&&i[c].start>=k.y1;c--)B=i[c].boundary===k;for(c=x+1;!B&&c<i.length&&i[c].end<=k.y2;c++)B=i[c].boundary===k;for(c=0;!B&&c<P.length;c++)B=P[c].boundary===k;B||(k.x2New=T)}Array.prototype.splice.apply(i,[_,x-_+1].concat(P))}for(const s of i){const _=s.boundary;void 0===_.x2New&&(_.x2New=Math.max(h,_.x2))}}class l{constructor({textContent:m,textContentStream:f,container:i,viewport:s,textDivs:_,textContentItemsStr:x,enhanceTextSelection:E}){this._textContent=m,this._textContentStream=f,this._container=i,this._document=i.ownerDocument,this._viewport=s,this._textDivs=_||[],this._textContentItemsStr=x||[],this._enhanceTextSelection=!!E,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(m,f){for(let i=0,s=m.length;i<s;i++)if(void 0!==m[i].str)this._textContentItemsStr.push(m[i].str),v(this,m[i],f,this._layoutTextCtx);else if("beginMarkedContentProps"===m[i].type||"beginMarkedContent"===m[i].type){const _=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==m[i].id&&this._container.setAttribute("id",`${m[i].id}`),_.appendChild(this._container)}else"endMarkedContent"===m[i].type&&(this._container=this._container.parentNode)}_layoutText(m){const f=this._textDivProperties.get(m);let i="";if(0!==f.canvasWidth&&f.hasText){const{fontSize:s,fontFamily:_}=m.style;(s!==this._layoutTextLastFontSize||_!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${s} ${_}`,this._layoutTextLastFontSize=s,this._layoutTextLastFontFamily=_);const{width:x}=this._layoutTextCtx.measureText(m.textContent);if(x>0){const E=f.canvasWidth/x;this._enhanceTextSelection&&(f.scale=E),i=`scaleX(${E})`}}if(0!==f.angle&&(i=`rotate(${f.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(f.originalTransform=i),m.style.transform=i),f.hasText&&this._container.appendChild(m),f.hasEOL){const s=document.createElement("br");s.setAttribute("role","presentation"),this._container.appendChild(s)}}_render(m=0){const f=(0,r.createPromiseCapability)();let i=Object.create(null);const s=this._document.createElement("canvas");if(s.height=s.width=U,this._layoutTextCtx=s.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),f.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const _=()=>{this._reader.read().then(({value:x,done:E})=>{E?f.resolve():(Object.assign(i,x.styles),this._processItems(x.items,i),_())},f.reject)};this._reader=this._textContentStream.getReader(),_()}}f.promise.then(()=>{i=null,m?this._renderTimer=setTimeout(()=>{d(this),this._renderTimer=null},m):d(this)},this._capability.reject)}expandTextDivs(m=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function C(h){const m=h._bounds,f=h._viewport,i=function O(h,m,f){const i=f.map(function(_,x){return{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom,index:x,x1New:void 0,x2New:void 0}});p(h,i);const s=new Array(f.length);for(const _ of i)s[_.index]={left:_.x1New,top:0,right:_.x2New,bottom:0};f.map(function(_,x){const E=s[x],k=i[x];k.x1=_.top,k.y1=h-E.right,k.x2=_.bottom,k.y2=h-E.left,k.index=x,k.x1New=void 0,k.x2New=void 0}),p(m,i);for(const _ of i){const x=_.index;s[x].top=_.x1New,s[x].bottom=_.x2New}return s}(f.width,f.height,m);for(let s=0;s<i.length;s++){const _=m[s].div,x=h._textDivProperties.get(_);if(0===x.angle){x.paddingLeft=m[s].left-i[s].left,x.paddingTop=m[s].top-i[s].top,x.paddingRight=i[s].right-m[s].right,x.paddingBottom=i[s].bottom-m[s].bottom,h._textDivProperties.set(_,x);continue}const E=i[s],k=m[s],F=k.m,c=F[0],T=F[1],P=[[0,0],[0,k.size[1]],[k.size[0],0],k.size],R=new Float64Array(64);for(let w=0,I=P.length;w<I;w++){const V=r.Util.applyTransform(P[w],F);R[w+0]=c&&(E.left-V[0])/c,R[w+4]=T&&(E.top-V[1])/T,R[w+8]=c&&(E.right-V[0])/c,R[w+12]=T&&(E.bottom-V[1])/T,R[w+16]=T&&(E.left-V[0])/-T,R[w+20]=c&&(E.top-V[1])/c,R[w+24]=T&&(E.right-V[0])/-T,R[w+28]=c&&(E.bottom-V[1])/c,R[w+32]=c&&(E.left-V[0])/-c,R[w+36]=T&&(E.top-V[1])/-T,R[w+40]=c&&(E.right-V[0])/-c,R[w+44]=T&&(E.bottom-V[1])/-T,R[w+48]=T&&(E.left-V[0])/T,R[w+52]=c&&(E.top-V[1])/-c,R[w+56]=T&&(E.right-V[0])/T,R[w+60]=c&&(E.bottom-V[1])/-c}const B=1+Math.min(Math.abs(c),Math.abs(T));x.paddingLeft=A(R,32,16)/B,x.paddingTop=A(R,48,16)/B,x.paddingRight=A(R,0,16)/B,x.paddingBottom=A(R,16,16)/B,h._textDivProperties.set(_,x)}}(this),this._bounds=null);const f=[],i=[];for(let s=0,_=this._textDivs.length;s<_;s++){const x=this._textDivs[s],E=this._textDivProperties.get(x);!E.hasText||(m?(f.length=0,i.length=0,E.originalTransform&&f.push(E.originalTransform),E.paddingTop>0?(i.push(`${E.paddingTop}px`),f.push(`translateY(${-E.paddingTop}px)`)):i.push(0),i.push(E.paddingRight>0?E.paddingRight/E.scale+"px":0),i.push(E.paddingBottom>0?`${E.paddingBottom}px`:0),E.paddingLeft>0?(i.push(E.paddingLeft/E.scale+"px"),f.push(`translateX(${-E.paddingLeft/E.scale}px)`)):i.push(0),x.style.padding=i.join(" "),f.length&&(x.style.transform=f.join(" "))):(x.style.padding=null,x.style.transform=E.originalTransform))}}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SVGGraphics=void 0;var r=D(1),z=D(5),U=D(3);let X=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};a.SVGGraphics=X;{let p=function(i){let s=[];const _=[];for(const x of i)"save"!==x.fn?"restore"===x.fn?s=_.pop():s.push(x):(s.push({fnId:92,fn:"group",items:[]}),_.push(s),s=s[s.length-1].items);return s},l=function(i){if(Number.isInteger(i))return i.toString();const s=i.toFixed(10);let _=s.length-1;if("0"!==s[_])return s;do{_--}while("0"===s[_]);return s.substring(0,"."===s[_]?_:_+1)},y=function(i){if(0===i[4]&&0===i[5]){if(0===i[1]&&0===i[2])return 1===i[0]&&1===i[3]?"":`scale(${l(i[0])} ${l(i[3])})`;if(i[0]===i[3]&&i[1]===-i[2]){const s=180*Math.acos(i[0])/Math.PI;return`rotate(${l(s)})`}}else if(1===i[0]&&0===i[1]&&0===i[2]&&1===i[3])return`translate(${l(i[4])} ${l(i[5])})`;return`matrix(${l(i[0])} ${l(i[1])} ${l(i[2])} ${l(i[3])} ${l(i[4])} ${l(i[5])})`};const $={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},L="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/1999/xlink",v=["butt","round","square"],d=["miter","round","bevel"],A=function(i,s="",_=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!_)return URL.createObjectURL(new Blob([i],{type:s}));const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let E=`data:${s};base64,`;for(let k=0,F=i.length;k<F;k+=3){const c=255&i[k],T=255&i[k+1],P=255&i[k+2];E+=x[c>>2]+x[(3&c)<<4|T>>4]+x[k+1<F?(15&T)<<2|P>>6:64]+x[k+2<F?63&P:64]}return E},C=function(){const i=new Uint8Array([137,80,78,71,13,10,26,10]),_=new Int32Array(256);for(let P=0;P<256;P++){let R=P;for(let B=0;B<8;B++)R=1&R?3988292384^R>>1&2147483647:R>>1&2147483647;_[P]=R}function E(P,R,B,w){let I=w;const V=R.length;B[I]=V>>24&255,B[I+1]=V>>16&255,B[I+2]=V>>8&255,B[I+3]=255&V,I+=4,B[I]=255&P.charCodeAt(0),B[I+1]=255&P.charCodeAt(1),B[I+2]=255&P.charCodeAt(2),B[I+3]=255&P.charCodeAt(3),I+=4,B.set(R,I),I+=R.length;const Q=function x(P,R,B){let w=-1;for(let I=R;I<B;I++)w=w>>>8^_[255&(w^P[I])];return-1^w}(B,w+4,I);B[I]=Q>>24&255,B[I+1]=Q>>16&255,B[I+2]=Q>>8&255,B[I+3]=255&Q}function c(P){let R=P.length;const B=65535,w=Math.ceil(R/B),I=new Uint8Array(2+R+5*w+4);let V=0;I[V++]=120,I[V++]=156;let Q=0;for(;R>B;)I[V++]=0,I[V++]=255,I[V++]=255,I[V++]=0,I[V++]=0,I.set(P.subarray(Q,Q+B),V),V+=B,Q+=B,R-=B;I[V++]=1,I[V++]=255&R,I[V++]=R>>8&255,I[V++]=255&~R,I[V++]=(65535&~R)>>8&255,I.set(P.subarray(Q),V),V+=P.length-Q;const te=function k(P,R,B){let w=1,I=0;for(let V=R;V<B;++V)w=(w+(255&P[V]))%65521,I=(I+w)%65521;return I<<16|w}(P,0,P.length);return I[V++]=te>>24&255,I[V++]=te>>16&255,I[V++]=te>>8&255,I[V++]=255&te,I}return function(R,B,w){return function T(P,R,B,w){const I=P.width,V=P.height;let Q,te,S;const e=P.data;switch(R){case r.ImageKind.GRAYSCALE_1BPP:te=0,Q=1,S=I+7>>3;break;case r.ImageKind.RGB_24BPP:te=2,Q=8,S=3*I;break;case r.ImageKind.RGBA_32BPP:te=6,Q=8,S=4*I;break;default:throw new Error("invalid format")}const n=new Uint8Array((1+S)*V);let o=0,g=0;for(let q=0;q<V;++q)n[o++]=0,n.set(e.subarray(g,g+S),o),g+=S,o+=S;if(R===r.ImageKind.GRAYSCALE_1BPP&&w){o=0;for(let q=0;q<V;q++){o++;for(let Y=0;Y<S;Y++)n[o++]^=255}}const u=new Uint8Array([I>>24&255,I>>16&255,I>>8&255,255&I,V>>24&255,V>>16&255,V>>8&255,255&V,Q,te,0,0,0]),b=function F(P){if(!U.isNodeJS)return c(P);try{let R;R=parseInt(process.versions.node)>=8?P:Buffer.from(P);const B=__webpack_require__(2258).deflateSync(R,{level:9});return B instanceof Uint8Array?B:new Uint8Array(B)}catch(R){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+R)}return c(P)}(n),W=new Uint8Array(i.length+36+u.length+b.length);let j=0;return W.set(i,j),j+=i.length,E("IHDR",u,W,j),j+=12+u.length,E("IDATA",b,W,j),j+=12+b.length,E("IEND",new Uint8Array(0),W,j),A(W,"image/png",B)}(R,void 0===R.kind?r.ImageKind.GRAYSCALE_1BPP:R.kind,B,w)}}();class O{constructor(){this.fontSizeScale=1,this.fontWeight=$.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=$.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,_){this.x=s,this.y=_}}let h=0,m=0,f=0;a.SVGGraphics=X=class{constructor(i,s,_=!1){this.svgFactory=new z.DOMSVGFactory,this.current=new O,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[];for(const x in r.OPS)this._operatorIdMapping[r.OPS[x]]=x}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const s=i.fnArray,_=i.argsArray;for(let x=0,E=s.length;x<E;x++)if(s[x]===r.OPS.dependency)for(const k of _[x]){const F=k.startsWith("g_")?this.commonObjs:this.objs,c=new Promise(T=>{F.get(k,T)});this.current.dependencies.push(c)}return Promise.all(this.current.dependencies)}transform(i,s,_,x,E,k){this.transformMatrix=r.Util.transform(this.transformMatrix,[i,s,_,x,E,k]),this.tgrp=null}getSVG(i,s){this.viewport=s;const _=this._initialize(s);return this.loadDependencies(i).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),_))}convertOpList(i){const s=this._operatorIdMapping,_=i.argsArray,x=i.fnArray,E=[];for(let k=0,F=x.length;k<F;k++){const c=x[k];E.push({fnId:c,fn:s[c],args:_[k]})}return p(E)}executeOpTree(i){for(const s of i){const _=s.fn,E=s.args;switch(0|s.fnId){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(E);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(E[0],E[1]);break;case r.OPS.setFont:this.setFont(E);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(E[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(E[0],E[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(E[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(E[0]);break;case r.OPS.setHScale:this.setHScale(E[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(E[0],E[1],E[2],E[3],E[4],E[5]);break;case r.OPS.setTextRise:this.setTextRise(E[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(E[0]);break;case r.OPS.setLineWidth:this.setLineWidth(E[0]);break;case r.OPS.setLineJoin:this.setLineJoin(E[0]);break;case r.OPS.setLineCap:this.setLineCap(E[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(E[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(E[0],E[1],E[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(E[0],E[1],E[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(E);break;case r.OPS.setFillColorN:this.setFillColorN(E);break;case r.OPS.shadingFill:this.shadingFill(E[0]);break;case r.OPS.setDash:this.setDash(E[0],E[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(E[0]);break;case r.OPS.setFlatness:this.setFlatness(E[0]);break;case r.OPS.setGState:this.setGState(E[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(E[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(E[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(E[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(E[0],E[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(E[0],E[1],E[2],E[3],E[4],E[5]);break;case r.OPS.constructPath:this.constructPath(E[0],E[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,r.warn)(`Unimplemented operator ${_}`)}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,s,_,x,E,k){const F=this.current;F.textMatrix=F.lineMatrix=[i,s,_,x,E,k],F.textMatrixScale=Math.hypot(i,s),F.x=F.lineX=0,F.y=F.lineY=0,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${l(F.fontSize)}px`),F.tspan.setAttributeNS(null,"y",l(-F.y)),F.txtElement=this.svgFactory.createElement("svg:text"),F.txtElement.appendChild(F.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=r.IDENTITY_MATRIX,i.lineMatrix=r.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,s){const _=this.current;_.x=_.lineX+=i,_.y=_.lineY+=s,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${l(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",l(-_.y))}showText(i){const s=this.current,_=s.font,x=s.fontSize;if(0===x)return;const E=s.fontSizeScale,k=s.charSpacing,F=s.wordSpacing,c=s.fontDirection,T=s.textHScale*c,P=_.vertical,R=P?1:-1,B=_.defaultVMetrics,w=x*s.fontMatrix[0];let I=0;for(const te of i){if(null===te){I+=c*F;continue}if("number"==typeof te){I+=R*te*x/1e3;continue}const S=(te.isSpace?F:0)+k,e=te.fontChar;let n,o,u,g=te.width;if(P){let b;const M=te.vmetric||B;b=te.vmetric?M[1]:.5*g,b=-b*w,g=M?-M[0]:g,n=b/E,o=(I+M[2]*w)/E}else n=I/E,o=0;(te.isInFont||_.missingFile)&&(s.xcoords.push(s.x+n),P&&s.ycoords.push(-s.y+o),s.tspan.textContent+=e),u=P?g*w-S*c:g*w+S*c,I+=u}s.tspan.setAttributeNS(null,"x",s.xcoords.map(l).join(" ")),s.tspan.setAttributeNS(null,"y",P?s.ycoords.map(l).join(" "):l(-s.y)),P?s.y-=I:s.x+=I*T,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${l(s.fontSize)}px`),s.fontStyle!==$.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==$.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const V=s.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;V===r.TextRenderingMode.FILL||V===r.TextRenderingMode.FILL_STROKE?(s.fillColor!==$.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.tspan.setAttributeNS(null,"fill",s.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(V===r.TextRenderingMode.STROKE||V===r.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(s.tspan,1/(s.textMatrixScale||1));let Q=s.textMatrix;0!==s.textRise&&(Q=Q.slice(),Q[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${y(Q)} scale(${l(T)}, -1)`),s.txtElement.setAttributeNS(L,"xml:space","preserve"),s.txtElement.appendChild(s.tspan),s.txtgrp.appendChild(s.txtElement),this._ensureTransformGroup().appendChild(s.txtElement)}setLeadingMoveText(i,s){this.setLeading(-s),this.moveText(i,s)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const s=A(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${s}); }\n`}setFont(i){const s=this.current,_=this.commonObjs.get(i[0]);let x=i[1];s.font=_,this.embedFonts&&!_.missingFile&&!this.embeddedFonts[_.loadedName]&&(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),s.fontMatrix=_.fontMatrix||r.FONT_IDENTITY_MATRIX;let E="normal";_.black?E="900":_.bold&&(E="bold");const k=_.italic?"italic":"normal";x<0?(x=-x,s.fontDirection=-1):s.fontDirection=1,s.fontSize=x,s.fontFamily=_.loadedName,s.fontWeight=E,s.fontStyle=k,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",l(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){const i=this.current;i.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&i.txtElement?.hasChildNodes()&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=v[i]}setLineJoin(i){this.current.lineJoin=d[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,s,_){this.current.strokeColor=r.Util.makeHexColor(i,s,_)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,s,_){this.current.fillColor=r.Util.makeHexColor(i,s,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const s=this.viewport.width,_=this.viewport.height,x=r.Util.inverseTransform(this.transformMatrix),E=r.Util.applyTransform([0,0],x),k=r.Util.applyTransform([0,_],x),F=r.Util.applyTransform([s,0],x),c=r.Util.applyTransform([s,_],x),T=Math.min(E[0],k[0],F[0],c[0]),P=Math.min(E[1],k[1],F[1],c[1]),R=Math.max(E[0],k[0],F[0],c[0]),B=Math.max(E[1],k[1],F[1],c[1]),w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x",T),w.setAttributeNS(null,"y",P),w.setAttributeNS(null,"width",R-T),w.setAttributeNS(null,"height",B-P),w.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&w.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(w)}_makeColorN_Pattern(i){return"TilingPattern"===i[0]?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const s=i[1],_=i[2],x=i[3]||r.IDENTITY_MATRIX,[E,k,F,c]=i[4],T=i[5],P=i[6],R=i[7],B="shading"+f++,[w,I,V,Q]=r.Util.normalizeRect([...r.Util.applyTransform([E,k],x),...r.Util.applyTransform([F,c],x)]),[te,S]=r.Util.singularValueDecompose2dScale(x),e=T*te,n=P*S,o=this.svgFactory.createElement("svg:pattern");o.setAttributeNS(null,"id",B),o.setAttributeNS(null,"patternUnits","userSpaceOnUse"),o.setAttributeNS(null,"width",e),o.setAttributeNS(null,"height",n),o.setAttributeNS(null,"x",`${w}`),o.setAttributeNS(null,"y",`${I}`);const g=this.svg,u=this.transformMatrix,b=this.current.fillColor,M=this.current.strokeColor,W=this.svgFactory.create(V-w,Q-I);if(this.svg=W,this.transformMatrix=x,2===R){const j=r.Util.makeHexColor(...s);this.current.fillColor=j,this.current.strokeColor=j}return this.executeOpTree(this.convertOpList(_)),this.svg=g,this.transformMatrix=u,this.current.fillColor=b,this.current.strokeColor=M,o.appendChild(W.childNodes[0]),this.defs.appendChild(o),`url(#${B})`}_makeShadingPattern(i){switch("string"==typeof i&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const s="shading"+f++,_=i[3];let x;switch(i[1]){case"axial":const E=i[4],k=i[5];x=this.svgFactory.createElement("svg:linearGradient"),x.setAttributeNS(null,"id",s),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"x1",E[0]),x.setAttributeNS(null,"y1",E[1]),x.setAttributeNS(null,"x2",k[0]),x.setAttributeNS(null,"y2",k[1]);break;case"radial":const F=i[4],c=i[5],T=i[6],P=i[7];x=this.svgFactory.createElement("svg:radialGradient"),x.setAttributeNS(null,"id",s),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"cx",c[0]),x.setAttributeNS(null,"cy",c[1]),x.setAttributeNS(null,"r",P),x.setAttributeNS(null,"fx",F[0]),x.setAttributeNS(null,"fy",F[1]),x.setAttributeNS(null,"fr",T);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const E of _){const k=this.svgFactory.createElement("svg:stop");k.setAttributeNS(null,"offset",E[0]),k.setAttributeNS(null,"stop-color",E[1]),x.appendChild(k)}return this.defs.appendChild(x),`url(#${s})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,s){this.current.dashArray=i,this.current.dashPhase=s}constructPath(i,s){const _=this.current;let x=_.x,E=_.y,k=[],F=0;for(const c of i)switch(0|c){case r.OPS.rectangle:x=s[F++],E=s[F++];const R=x+s[F++],B=E+s[F++];k.push("M",l(x),l(E),"L",l(R),l(E),"L",l(R),l(B),"L",l(x),l(B),"Z");break;case r.OPS.moveTo:x=s[F++],E=s[F++],k.push("M",l(x),l(E));break;case r.OPS.lineTo:x=s[F++],E=s[F++],k.push("L",l(x),l(E));break;case r.OPS.curveTo:x=s[F+4],E=s[F+5],k.push("C",l(s[F]),l(s[F+1]),l(s[F+2]),l(s[F+3]),l(x),l(E)),F+=6;break;case r.OPS.curveTo2:k.push("C",l(x),l(E),l(s[F]),l(s[F+1]),l(s[F+2]),l(s[F+3])),x=s[F+2],E=s[F+3],F+=4;break;case r.OPS.curveTo3:x=s[F+2],E=s[F+3],k.push("C",l(s[F]),l(s[F+1]),l(x),l(E),l(x),l(E)),F+=4;break;case r.OPS.closePath:k.push("Z")}k=k.join(" "),_.path&&i.length>0&&i[0]!==r.OPS.rectangle&&i[0]!==r.OPS.moveTo?k=_.path.getAttributeNS(null,"d")+k:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(_.path)),_.path.setAttributeNS(null,"d",k),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(x,E)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element)return void(this.pendingClip=null);const s="clippath"+h++,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",s),_.setAttributeNS(null,"transform",y(this.transformMatrix));const x=i.element.cloneNode(!0);if(x.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,_.appendChild(x),this.defs.appendChild(_),i.activeClipUrl){i.clipGroup=null;for(const E of this.extraStack)E.clipGroup=null;_.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const s=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",s)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[s,_]of i)switch(s){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,r.warn)(`Unimplemented graphic state operator ${s}`)}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,s=1){const _=this.current;let x=_.dashArray;1!==s&&x.length>0&&(x=x.map(function(E){return s*E})),i.setAttributeNS(null,"stroke",_.strokeColor),i.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",l(_.miterLimit)),i.setAttributeNS(null,"stroke-linecap",_.lineCap),i.setAttributeNS(null,"stroke-linejoin",_.lineJoin),i.setAttributeNS(null,"stroke-width",l(s*_.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",x.map(l).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",l(s*_.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(i)}paintImageXObject(i){const s=i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i);s?this.paintInlineImageXObject(s):(0,r.warn)(`Dependent image with object ID ${i} is not ready yet`)}paintInlineImageXObject(i,s){const _=i.width,x=i.height,E=C(i,this.forceDataSchema,!!s),k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",l(_)),k.setAttributeNS(null,"height",l(x)),this.current.element=k,this.clip("nonzero");const F=this.svgFactory.createElement("svg:image");F.setAttributeNS(t,"xlink:href",E),F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y",l(-x)),F.setAttributeNS(null,"width",l(_)+"px"),F.setAttributeNS(null,"height",l(x)+"px"),F.setAttributeNS(null,"transform",`scale(${l(1/_)} ${l(-1/x)})`),s?s.appendChild(F):this._ensureTransformGroup().appendChild(F)}paintImageMaskXObject(i){const s=this.current,_=i.width,x=i.height,E=s.fillColor;s.maskId="mask"+m++;const k=this.svgFactory.createElement("svg:mask");k.setAttributeNS(null,"id",s.maskId);const F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",l(_)),F.setAttributeNS(null,"height",l(x)),F.setAttributeNS(null,"fill",E),F.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.appendChild(k),this._ensureTransformGroup().appendChild(F),this.paintInlineImageXObject(i,k)}paintFormXObjectBegin(i,s){if(Array.isArray(i)&&6===i.length&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),s){const _=s[2]-s[0],x=s[3]-s[1],E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x",s[0]),E.setAttributeNS(null,"y",s[1]),E.setAttributeNS(null,"width",l(_)),E.setAttributeNS(null,"height",l(x)),this.current.element=E,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const s=this.svgFactory.create(i.width,i.height),_=this.svgFactory.createElement("svg:defs");s.appendChild(_),this.defs=_;const x=this.svgFactory.createElement("svg:g");return x.setAttributeNS(null,"transform",y(i.transform)),s.appendChild(x),this.svg=x,s}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNodeStream=void 0;var r=D(1),z=D(26);const U=__webpack_require__(172),X=__webpack_require__(2001),$=__webpack_require__(3779),L=__webpack_require__(6558),t=/^file:\/\/\/[a-zA-Z]:\//;a.PDFNodeStream=class d{constructor(f){this.source=f,this.url=function v(m){const f=L.parse(m);return"file:"===f.protocol||f.host?f:/^[a-z]:[/\\]/i.test(m)?L.parse(`file:///${m}`):(f.host||(f.protocol="file:"),f)}(f.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new p(this),this._fullRequestReader}getRangeReader(f,i){if(i<=this._progressiveDataLength)return null;const s=this.isFsUrl?new h(this,f,i):new l(this,f,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(f){this._fullRequestReader&&this._fullRequestReader.cancel(f);for(const i of this._rangeRequestReaders.slice(0))i.cancel(f)}};class A{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=f.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var f=this;return _asyncToGenerator(function*(){if(yield f._readCapability.promise,f._done)return{value:void 0,done:!0};if(f._storedError)throw f._storedError;const i=f._readableStream.read();return null===i?(f._readCapability=(0,r.createPromiseCapability)(),f.read()):(f._loaded+=i.length,f.onProgress&&f.onProgress({loaded:f._loaded,total:f._contentLength}),{value:new Uint8Array(i).buffer,done:!1})})()}cancel(f){this._readableStream?this._readableStream.destroy(f):this._error(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class C{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!f.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var f=this;return _asyncToGenerator(function*(){if(yield f._readCapability.promise,f._done)return{value:void 0,done:!0};if(f._storedError)throw f._storedError;const i=f._readableStream.read();return null===i?(f._readCapability=(0,r.createPromiseCapability)(),f.read()):(f._loaded+=i.length,f.onProgress&&f.onProgress({loaded:f._loaded}),{value:new Uint8Array(i).buffer,done:!1})})()}cancel(f){this._readableStream?this._readableStream.destroy(f):this._error(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function O(m,f){return{protocol:m.protocol,auth:m.auth,host:m.hostname,port:m.port,path:m.path,method:"GET",headers:f}}class p extends A{constructor(f){super(f);const i=s=>{if(404===s.statusCode){const k=new r.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=k,void this._headersCapability.reject(k)}this._headersCapability.resolve(),this._setReadableStream(s);const _=k=>this._readableStream.headers[k.toLowerCase()],{allowRangeRequests:x,suggestedLength:E}=(0,z.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=E||this._contentLength,this._filename=(0,z.extractFilenameFromHeader)(_)};this._request=null,this._request="http:"===this._url.protocol?X.request(O(this._url,f.httpHeaders),i):$.request(O(this._url,f.httpHeaders),i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class l extends C{constructor(f,i,s){super(f),this._httpHeaders={};for(const x in f.httpHeaders){const E=f.httpHeaders[x];typeof E>"u"||(this._httpHeaders[x]=E)}this._httpHeaders.Range=`bytes=${i}-${s-1}`;const _=x=>{if(404!==x.statusCode)this._setReadableStream(x);else{const E=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E}};this._request=null,this._request="http:"===this._url.protocol?X.request(O(this._url,this._httpHeaders),_):$.request(O(this._url,this._httpHeaders),_),this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class y extends A{constructor(f){super(f);let i=decodeURIComponent(this._url.path);t.test(this._url.href)&&(i=i.replace(/^\//,"")),U.lstat(i,(s,_)=>{if(s)return"ENOENT"===s.code&&(s=new r.MissingPDFException(`Missing PDF "${i}".`)),this._storedError=s,void this._headersCapability.reject(s);this._contentLength=_.size,this._setReadableStream(U.createReadStream(i)),this._headersCapability.resolve()})}}class h extends C{constructor(f,i,s){super(f);let _=decodeURIComponent(this._url.path);t.test(this._url.href)&&(_=_.replace(/^\//,"")),this._setReadableStream(U.createReadStream(_,{start:i,end:s-1}))}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createResponseStatusError=function L(v,d){return 404===v||0===v&&d.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+d+'".'):new r.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${d}".`,v)},a.extractFilenameFromHeader=function $(v){const d=v("Content-Disposition");if(d){let A=(0,z.getFilenameFromContentDispositionHeader)(d);if(A.includes("%"))try{A=decodeURIComponent(A)}catch{}if((0,U.isPdfFile)(A))return A}return null},a.validateRangeRequestCapabilities=function X({getResponseHeader:v,isHttp:d,rangeChunkSize:A,disableRange:C}){const O={allowRangeRequests:!1,suggestedLength:void 0},p=parseInt(v("Content-Length"),10);return!Number.isInteger(p)||(O.suggestedLength=p,p<=2*A)||C||!d||"bytes"!==v("Accept-Ranges")||"identity"!==(v("Content-Encoding")||"identity")||(O.allowRangeRequests=!0),O},a.validateResponseStatus=function t(v){return 200===v||206===v};var r=D(1),z=D(27),U=D(5)},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getFilenameFromContentDispositionHeader=function z(U){let X=!0,$=L("filename\\*","i").exec(U);if($){$=$[1];let p=A($);return p=unescape(p),p=C(p),p=O(p),v(p)}if($=function d(p){const l=[];let y;const h=L("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(y=h.exec(p));){let[,f,i,s]=y;if(f=parseInt(f,10),f in l){if(0===f)break}else l[f]=[i,s]}const m=[];for(let f=0;f<l.length&&f in l;++f){let[i,s]=l[f];s=A(s),i&&(s=unescape(s),0===f&&(s=C(s))),m.push(s)}return m.join("")}(U),$)return v(O($));if($=L("filename","i").exec(U),$){$=$[1];let p=A($);return p=O(p),v(p)}function L(p,l){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',l)}function t(p,l){if(p){if(!/^[\x00-\xFF]+$/.test(l))return l;try{const y=new TextDecoder(p,{fatal:!0}),h=(0,r.stringToBytes)(l);l=y.decode(h),X=!1}catch{}}return l}function v(p){return X&&/[\x80-\xff]/.test(p)&&(p=t("utf-8",p),X&&(p=t("iso-8859-1",p))),p}function A(p){if(p.startsWith('"')){const l=p.slice(1).split('\\"');for(let y=0;y<l.length;++y){const h=l[y].indexOf('"');-1!==h&&(l[y]=l[y].slice(0,h),l.length=y+1),l[y]=l[y].replace(/\\(.)/g,"$1")}p=l.join('"')}return p}function C(p){const l=p.indexOf("'");return-1===l?p:t(p.slice(0,l),p.slice(l+1).replace(/^[^']*'/,""))}function O(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(l,y,h,m){if("q"===h||"Q"===h)return t(y,m=(m=m.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(f,i){return String.fromCharCode(parseInt(i,16))}));try{m=atob(m)}catch{}return t(y,m)})}return""};var r=D(1)},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNetworkStream=void 0;var r=D(1),z=D(26);class L{constructor(C,O={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&O.httpHeaders||Object.create(null),this.withCredentials=O.withCredentials||!1,this.getXhr=O.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,O,p){const l={begin:C,end:O};for(const y in p)l[y]=p[y];return this.request(l)}requestFull(C){return this.request(C)}request(C){const O=this.getXhr(),p=this.currXhrId++,l=this.pendingRequests[p]={xhr:O};O.open("GET",this.url),O.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const h=this.httpHeaders[y];typeof h>"u"||O.setRequestHeader(y,h)}return this.isHttp&&"begin"in C&&"end"in C?(O.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),l.expectedStatus=206):l.expectedStatus=200,O.responseType="arraybuffer",C.onError&&(O.onerror=function(y){C.onError(O.status)}),O.onreadystatechange=this.onStateChange.bind(this,p),O.onprogress=this.onProgress.bind(this,p),l.onHeadersReceived=C.onHeadersReceived,l.onDone=C.onDone,l.onError=C.onError,l.onProgress=C.onProgress,O.send(null),p}onProgress(C,O){const p=this.pendingRequests[C];!p||p.onProgress?.(O)}onStateChange(C,O){const p=this.pendingRequests[C];if(!p)return;const l=p.xhr;if(l.readyState>=2&&p.onHeadersReceived&&(p.onHeadersReceived(),delete p.onHeadersReceived),4!==l.readyState||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],0===l.status&&this.isHttp)return void p.onError?.(l.status);const y=l.status||200;if((200!==y||206!==p.expectedStatus)&&y!==p.expectedStatus)return void p.onError?.(l.status);const m=function $(A){const C=A.response;return"string"!=typeof C?C:(0,r.stringToBytes)(C).buffer}(l);if(206===y){const f=l.getResponseHeader("Content-Range"),i=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p.onDone({begin:parseInt(i[1],10),chunk:m})}else m?p.onDone({begin:0,chunk:m}):p.onError?.(l.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const O=this.pendingRequests[C].xhr;delete this.pendingRequests[C],O.abort()}}a.PDFNetworkStream=class t{constructor(C){this._source=C,this._manager=new L(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const O=this._rangeRequestReaders.indexOf(C);O>=0&&this._rangeRequestReaders.splice(O,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(C,O){const p=new d(this._manager,C,O);return p.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(p),p}cancelAllRequests(C){this._fullRequestReader?.cancel(C);for(const O of this._rangeRequestReaders.slice(0))O.cancel(C)}};class v{constructor(C,O){this._manager=C;const p={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=O.url,this._fullRequestId=C.requestFull(p),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=O.disableRange||!1,this._contentLength=O.length,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,O=this._manager.getRequestXhr(C),p=h=>O.getResponseHeader(h),{allowRangeRequests:l,suggestedLength:y}=(0,z.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,z.extractFilenameFromHeader)(p),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,z.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const O of this._requests)O.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){this.onProgress?.({loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var C=this;return _asyncToGenerator(function*(){if(C._storedError)throw C._storedError;if(C._cachedChunks.length>0)return{value:C._cachedChunks.shift(),done:!1};if(C._done)return{value:void 0,done:!0};const O=(0,r.createPromiseCapability)();return C._requests.push(O),O.promise})()}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class d{constructor(C,O,p){this._manager=C;const l={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(O,p,l),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(C){const O=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:O,done:!1}):this._queuedChunk=O,this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,z.createResponseStatusError)(C,this._url);for(const O of this._requests)O.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){this.isStreamingSupported||this.onProgress?.({loaded:C.loaded})}get isStreamingSupported(){return!1}read(){var C=this;return _asyncToGenerator(function*(){if(C._storedError)throw C._storedError;if(null!==C._queuedChunk){const p=C._queuedChunk;return C._queuedChunk=null,{value:p,done:!1}}if(C._done)return{value:void 0,done:!0};const O=(0,r.createPromiseCapability)();return C._requests.push(O),O.promise})()}cancel(C){this._done=!0;for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(se,a,D)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFetchStream=void 0;var r=D(1),z=D(26);function U(v,d,A){return{method:"GET",headers:v,signal:A?.signal,mode:"cors",credentials:d?"include":"same-origin",redirect:"follow"}}function X(v){const d=new Headers;for(const A in v){const C=v[A];typeof C>"u"||d.append(A,C)}return d}a.PDFFetchStream=class ${constructor(d){this.source=d,this.isHttp=/^https?:/i.test(d.url),this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new L(this),this._fullRequestReader}getRangeReader(d,A){if(A<=this._progressiveDataLength)return null;const C=new t(this,d,A);return this._rangeRequestReaders.push(C),C}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const A of this._rangeRequestReaders.slice(0))A.cancel(d)}};class L{constructor(d){this._stream=d,this._reader=null,this._loaded=0,this._filename=null;const A=d.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=X(this._stream.httpHeaders);const C=A.url;fetch(C,U(this._headers,this._withCredentials,this._abortController)).then(O=>{if(!(0,z.validateResponseStatus)(O.status))throw(0,z.createResponseStatusError)(O.status,C);this._reader=O.body.getReader(),this._headersCapability.resolve();const p=h=>O.headers.get(h),{allowRangeRequests:l,suggestedLength:y}=(0,z.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=y||this._contentLength,this._filename=(0,z.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var d=this;return _asyncToGenerator(function*(){yield d._headersCapability.promise;const{value:A,done:C}=yield d._reader.read();return C?{value:A,done:C}:(d._loaded+=A.byteLength,d.onProgress&&d.onProgress({loaded:d._loaded,total:d._contentLength}),{value:new Uint8Array(A).buffer,done:!1})})()}cancel(d){this._reader&&this._reader.cancel(d),this._abortController&&this._abortController.abort()}}class t{constructor(d,A,C){this._stream=d,this._reader=null,this._loaded=0;const O=d.source;this._withCredentials=O.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!O.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=X(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${C-1}`);const p=O.url;fetch(p,U(this._headers,this._withCredentials,this._abortController)).then(l=>{if(!(0,z.validateResponseStatus)(l.status))throw(0,z.createResponseStatusError)(l.status,p);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var d=this;return _asyncToGenerator(function*(){yield d._readCapability.promise;const{value:A,done:C}=yield d._reader.read();return C?{value:A,done:C}:(d._loaded+=A.byteLength,d.onProgress&&d.onProgress({loaded:d._loaded}),{value:new Uint8Array(A).buffer,done:!1})})()}cancel(d){this._reader&&this._reader.cancel(d),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(se){var a=__webpack_module_cache__[se];if(void 0!==a)return a.exports;var D=__webpack_module_cache__[se]={exports:{}};return __webpack_modules__[se](D,D.exports,__w_pdfjs_require__),D.exports}var __webpack_exports__={};return(()=>{var se=__webpack_exports__;Object.defineProperty(se,"__esModule",{value:!0}),Object.defineProperty(se,"AnnotationLayer",{enumerable:!0,get:function(){return z.AnnotationLayer}}),Object.defineProperty(se,"AnnotationMode",{enumerable:!0,get:function(){return a.AnnotationMode}}),Object.defineProperty(se,"CMapCompressionType",{enumerable:!0,get:function(){return a.CMapCompressionType}}),Object.defineProperty(se,"GlobalWorkerOptions",{enumerable:!0,get:function(){return U.GlobalWorkerOptions}}),Object.defineProperty(se,"InvalidPDFException",{enumerable:!0,get:function(){return a.InvalidPDFException}}),Object.defineProperty(se,"LoopbackPort",{enumerable:!0,get:function(){return D.LoopbackPort}}),Object.defineProperty(se,"MissingPDFException",{enumerable:!0,get:function(){return a.MissingPDFException}}),Object.defineProperty(se,"OPS",{enumerable:!0,get:function(){return a.OPS}}),Object.defineProperty(se,"PDFDataRangeTransport",{enumerable:!0,get:function(){return D.PDFDataRangeTransport}}),Object.defineProperty(se,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(se,"PDFWorker",{enumerable:!0,get:function(){return D.PDFWorker}}),Object.defineProperty(se,"PasswordResponses",{enumerable:!0,get:function(){return a.PasswordResponses}}),Object.defineProperty(se,"PermissionFlag",{enumerable:!0,get:function(){return a.PermissionFlag}}),Object.defineProperty(se,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(se,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(se,"SVGGraphics",{enumerable:!0,get:function(){return L.SVGGraphics}}),Object.defineProperty(se,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return a.UNSUPPORTED_FEATURES}}),Object.defineProperty(se,"UnexpectedResponseException",{enumerable:!0,get:function(){return a.UnexpectedResponseException}}),Object.defineProperty(se,"Util",{enumerable:!0,get:function(){return a.Util}}),Object.defineProperty(se,"VerbosityLevel",{enumerable:!0,get:function(){return a.VerbosityLevel}}),Object.defineProperty(se,"XfaLayer",{enumerable:!0,get:function(){return t.XfaLayer}}),Object.defineProperty(se,"build",{enumerable:!0,get:function(){return D.build}}),Object.defineProperty(se,"createPromiseCapability",{enumerable:!0,get:function(){return a.createPromiseCapability}}),Object.defineProperty(se,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return a.createValidAbsoluteUrl}}),Object.defineProperty(se,"getDocument",{enumerable:!0,get:function(){return D.getDocument}}),Object.defineProperty(se,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(se,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(se,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(se,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(se,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(se,"renderTextLayer",{enumerable:!0,get:function(){return $.renderTextLayer}}),Object.defineProperty(se,"shadow",{enumerable:!0,get:function(){return a.shadow}}),Object.defineProperty(se,"version",{enumerable:!0,get:function(){return D.version}});var a=__w_pdfjs_require__(1),D=__w_pdfjs_require__(4),r=__w_pdfjs_require__(5),z=__w_pdfjs_require__(20),U=__w_pdfjs_require__(13),X=__w_pdfjs_require__(3),$=__w_pdfjs_require__(23),L=__w_pdfjs_require__(24),t=__w_pdfjs_require__(22);if(X.isNodeJS){const{PDFNodeStream:A}=__w_pdfjs_require__(25);(0,D.setPDFNetworkStreamFactory)(C=>new A(C))}else{const{PDFNetworkStream:A}=__w_pdfjs_require__(28),{PDFFetchStream:C}=__w_pdfjs_require__(29);(0,D.setPDFNetworkStreamFactory)(O=>(0,r.isValidFetchUrl)(O.url)?new C(O):new A(O))}})(),__webpack_exports__})(),module.exports=D()},2813:function(se,a,D){var X,r=D(7156).default;X=()=>(()=>{"use strict";var z=[,(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultXfaLayerFactory=t.DefaultTextLayerFactory=t.DefaultStructTreeLayerFactory=t.DefaultAnnotationLayerFactory=void 0;var d=v(2),A=v(4),C=v(5),O=v(7),p=v(8),l=v(9);t.DefaultAnnotationLayerFactory=class y{createAnnotationLayerBuilder(s,_,x=null,E="",k=!0,F=A.NullL10n,c=!1,T=null,P=null,R=null,B=null){return new d.AnnotationLayerBuilder({pageDiv:s,pdfPage:_,imageResourcesPath:E,renderForms:k,linkService:new C.SimpleLinkService,l10n:F,annotationStorage:x,enableScripting:c,hasJSActionsPromise:T,fieldObjectsPromise:R,mouseState:P,annotationCanvasMap:B})}},t.DefaultStructTreeLayerFactory=class h{createStructTreeLayerBuilder(s){return new O.StructTreeLayerBuilder({pdfPage:s})}},t.DefaultTextLayerFactory=class m{createTextLayerBuilder(s,_,x,E=!1,k,F){return new p.TextLayerBuilder({textLayerDiv:s,pageIndex:_,viewport:x,enhanceTextSelection:E,eventBus:k,highlighter:F})}},t.DefaultXfaLayerFactory=class f{createXfaLayerBuilder(s,_,x=null,E=null){return new l.XfaLayerBuilder({pageDiv:s,pdfPage:_,annotationStorage:x,linkService:new C.SimpleLinkService,xfaHtml:E})}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayerBuilder=void 0;var d=v(3),A=v(4);t.AnnotationLayerBuilder=class C{constructor({pageDiv:p,pdfPage:l,linkService:y,downloadManager:h,annotationStorage:m=null,imageResourcesPath:f="",renderForms:i=!0,l10n:s=A.NullL10n,enableScripting:_=!1,hasJSActionsPromise:x=null,fieldObjectsPromise:E=null,mouseState:k=null,annotationCanvasMap:F=null}){this.pageDiv=p,this.pdfPage=l,this.linkService=y,this.downloadManager=h,this.imageResourcesPath=f,this.renderForms=i,this.l10n=s,this.annotationStorage=m,this.enableScripting=_,this._hasJSActionsPromise=x,this._fieldObjectsPromise=E,this._mouseState=k,this._annotationCanvasMap=F,this.div=null,this._cancelled=!1}render(p,l="display"){var y=this;return r(function*(){const[h,m=!1,f=null]=yield Promise.all([y.pdfPage.getAnnotations({intent:l}),y._hasJSActionsPromise,y._fieldObjectsPromise]);if(y._cancelled||0===h.length)return;const i={viewport:p.clone({dontFlip:!0}),div:y.div,annotations:h,page:y.pdfPage,imageResourcesPath:y.imageResourcesPath,renderForms:y.renderForms,linkService:y.linkService,downloadManager:y.downloadManager,annotationStorage:y.annotationStorage,enableScripting:y.enableScripting,hasJSActions:m,fieldObjects:f,mouseState:y._mouseState,annotationCanvasMap:y._annotationCanvasMap};y.div?d.AnnotationLayer.update(i):(y.div=document.createElement("div"),y.div.className="annotationLayer",y.pageDiv.appendChild(y.div),i.div=y.div,d.AnnotationLayer.render(i),y.l10n.translate(y.div))})()}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},L=>{let t;t=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:D(6036),L.exports=t},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.fixupLangCode=function C(l){return A[l?.toLowerCase()]||l},t.getL10nFallback=d;const v={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function d(l,y){switch(l){case"find_match_count":l=`find_match_count[${1===y.total?"one":"other"}]`;break;case"find_match_count_limit":l=`find_match_count_limit[${1===y.limit?"one":"other"}]`}return v[l]||""}const A={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};t.NullL10n={getLanguage:()=>r(function*(){return"en-us"})(),getDirection:()=>r(function*(){return"ltr"})(),get:(l,y=null,h=d(l,y))=>r(function*(){return function O(l,y){return y?l.replace(/\{\{\s*(\w+)\s*\}\}/g,(h,m)=>m in y?y[m]:"{{"+m+"}}"):l}(h,y)})(),translate:l=>r(function*(){})()}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleLinkService=t.PDFLinkService=t.LinkTarget=void 0;var d=v(6);const C={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function O(y,{url:h,target:m,rel:f,enabled:i=!0}={}){if(!h||"string"!=typeof h)throw new Error('A valid "url" parameter must provided.');const s=(0,d.removeNullCharacters)(h);i?y.href=y.title=s:(y.href="",y.title=`Disabled: ${s}`,y.onclick=()=>!1);let _="";switch(m){case C.NONE:break;case C.SELF:_="_self";break;case C.BLANK:_="_blank";break;case C.PARENT:_="_parent";break;case C.TOP:_="_top"}y.target=_,y.rel="string"==typeof f?f:"noopener noreferrer nofollow"}t.LinkTarget=C;class p{#e=new Map;constructor({eventBus:h,externalLinkTarget:m=null,externalLinkRel:f=null,ignoreDestinationZoom:i=!1}={}){this.eventBus=h,this.externalLinkTarget=m,this.externalLinkRel=f,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=i,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(h,m=null){this.baseUrl=m,this.pdfDocument=h,this.#e.clear()}setViewer(h){this.pdfViewer=h}setHistory(h){this.pdfHistory=h}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(h){this.pdfViewer.currentPageNumber=h}get rotation(){return this.pdfViewer.pagesRotation}set rotation(h){this.pdfViewer.pagesRotation=h}#t(h,m=null,f){const i=f[0];let s;if("object"==typeof i&&null!==i){if(s=this._cachedPageNumber(i),!s)return void this.pdfDocument.getPageIndex(i).then(_=>{this.cachePageRef(_+1,i),this.#t(h,m,f)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${i}" is not a valid page reference, for dest="${h}".`)})}else{if(!Number.isInteger(i))return void console.error(`PDFLinkService.#goToDestinationHelper: "${i}" is not a valid destination reference, for dest="${h}".`);s=i+1}!s||s<1||s>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${s}" is not a valid page number, for dest="${h}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:m,explicitDest:f,pageNumber:s})),this.pdfViewer.scrollPageIntoView({pageNumber:s,destArray:f,ignoreDestinationZoom:this._ignoreDestinationZoom}))}goToDestination(h){var m=this;return r(function*(){if(!m.pdfDocument)return;let f,i;"string"==typeof h?(f=h,i=yield m.pdfDocument.getDestination(h)):(f=null,i=yield h),Array.isArray(i)?m.#t(h,f,i):console.error(`PDFLinkService.goToDestination: "${i}" is not a valid destination array, for dest="${h}".`)})()}goToPage(h){if(!this.pdfDocument)return;const m="string"==typeof h&&this.pdfViewer.pageLabelToPageNumber(h)||0|h;Number.isInteger(m)&&m>0&&m<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(m)),this.pdfViewer.scrollPageIntoView({pageNumber:m})):console.error(`PDFLinkService.goToPage: "${h}" is not a valid page.`)}addLinkAttributes(h,m,f=!1){O(h,{url:m,target:f?C.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(h){if("string"==typeof h){if(h.length>0)return this.getAnchorUrl("#"+escape(h))}else if(Array.isArray(h)){const m=JSON.stringify(h);if(m.length>0)return this.getAnchorUrl("#"+escape(m))}return this.getAnchorUrl("")}getAnchorUrl(h){return(this.baseUrl||"")+h}setHash(h){if(!this.pdfDocument)return;let m,f;if(h.includes("=")){const i=(0,d.parseQueryString)(h);if(i.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:i.get("search").replace(/"/g,""),phraseSearch:"true"===i.get("phrase")}),i.has("page")&&(m=0|i.get("page")||1),i.has("zoom")){const s=i.get("zoom").split(","),_=s[0],x=parseFloat(_);_.includes("Fit")?"Fit"===_||"FitB"===_?f=[null,{name:_}]:"FitH"===_||"FitBH"===_||"FitV"===_||"FitBV"===_?f=[null,{name:_},s.length>1?0|s[1]:null]:"FitR"===_?5!==s.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):f=[null,{name:_},0|s[1],0|s[2],0|s[3],0|s[4]]:console.error(`PDFLinkService.setHash: "${_}" is not a valid zoom value.`):f=[null,{name:"XYZ"},s.length>1?0|s[1]:null,s.length>2?0|s[2]:null,x?x/100:_]}f?this.pdfViewer.scrollPageIntoView({pageNumber:m||this.page,destArray:f,allowNegativeOffset:!0}):m&&(this.page=m),i.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:i.get("pagemode")}),i.has("nameddest")&&this.goToDestination(i.get("nameddest"))}else{f=unescape(h);try{f=JSON.parse(f),Array.isArray(f)||(f=f.toString())}catch{}if("string"==typeof f||p.#n(f))return void this.goToDestination(f);console.error(`PDFLinkService.setHash: "${unescape(h)}" is not a valid destination.`)}}executeNamedAction(h){switch(h){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:h})}cachePageRef(h,m){m&&this.#e.set(0===m.gen?`${m.num}R`:`${m.num}R${m.gen}`,h)}_cachedPageNumber(h){return h&&this.#e.get(0===h.gen?`${h.num}R`:`${h.num}R${h.gen}`)||null}isPageVisible(h){return this.pdfViewer.isPageVisible(h)}isPageCached(h){return this.pdfViewer.isPageCached(h)}static#n(h){if(!Array.isArray(h))return!1;const m=h.length;if(m<2)return!1;const f=h[0];if(!("object"==typeof f&&Number.isInteger(f.num)&&Number.isInteger(f.gen)||Number.isInteger(f)&&f>=0))return!1;const i=h[1];if("object"!=typeof i||"string"!=typeof i.name)return!1;let s=!0;switch(i.name){case"XYZ":if(5!==m)return!1;break;case"Fit":case"FitB":return 2===m;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==m)return!1;break;case"FitR":if(6!==m)return!1;s=!1;break;default:return!1}for(let _=2;_<m;_++){const x=h[_];if(!("number"==typeof x||s&&null===x))return!1}return!0}}t.PDFLinkService=p,t.SimpleLinkService=class l{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(h){}get rotation(){return 0}set rotation(h){}goToDestination(h){return r(function*(){})()}goToPage(h){}addLinkAttributes(h,m,f=!1){O(h,{url:m,enabled:this.externalLinkEnabled})}getDestinationHash(h){return"#"}getAnchorUrl(h){return"#"}setHash(h){}executeNamedAction(h){}cachePageRef(h,m){}isPageVisible(h){return!0}isPageCached(h){return!0}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.animationStarted=t.VERTICAL_PADDING=t.UNKNOWN_SCALE=t.TextLayerMode=t.SpreadMode=t.SidebarView=t.ScrollMode=t.SCROLLBAR_PADDING=t.RenderingStates=t.RendererType=t.ProgressBar=t.PresentationModeState=t.OutputScale=t.MIN_SCALE=t.MAX_SCALE=t.MAX_AUTO_SCALE=t.DEFAULT_SCALE_VALUE=t.DEFAULT_SCALE_DELTA=t.DEFAULT_SCALE=t.AutoPrintRegExp=void 0,t.apiPageLayoutToViewerModes=function ee(N){let K=x.VERTICAL,ae=E.NONE;switch(N){case"SinglePage":K=x.PAGE;break;case"OneColumn":break;case"TwoPageLeft":K=x.PAGE;case"TwoColumnLeft":ae=E.ODD;break;case"TwoPageRight":K=x.PAGE;case"TwoColumnRight":ae=E.EVEN}return{scrollMode:K,spreadMode:ae}},t.apiPageModeToSidebarView=function G(N){switch(N){case"UseNone":return i.NONE;case"UseThumbs":return i.THUMBS;case"UseOutlines":return i.OUTLINE;case"UseAttachments":return i.ATTACHMENTS;case"UseOC":return i.LAYERS}return i.NONE},t.approximateFraction=function V(N){if(Math.floor(N)===N)return[N,1];const K=1/N;if(K>8)return[1,8];if(Math.floor(K)===K)return[1,K];const ie=N>1?K:N;let pe,ne=0,ce=1,he=1,oe=1;for(;;){const _e=ne+he,de=ce+oe;if(de>8)break;ie<=_e/de?(he=_e,oe=de):(ne=_e,ce=de)}return pe=ie-ne/ce<he/oe-ie?ie===N?[ne,ce]:[ce,ne]:ie===N?[he,oe]:[oe,he],pe},t.backtrackBeforeAllVisibleElements=S,t.binarySearchFirstItem=I,t.getActiveOrFocusedElement=function H(){let N=document,K=N.activeElement||N.querySelector(":focus");for(;K?.shadowRoot;)N=K.shadowRoot,K=N.activeElement||N.querySelector(":focus");return K},t.getPageSizeInches=function te({view:N,userUnit:K,rotate:ae}){const[ie,ne,ce,he]=N,oe=ae%180!=0,pe=(ce-ie)/72*K,_e=(he-ne)/72*K;return{width:oe?_e:pe,height:oe?pe:_e}},t.getVisibleElements=function e({scrollEl:N,views:K,sortByVisibility:ae=!1,horizontal:ie=!1,rtl:ne=!1}){const ce=N.scrollTop,he=ce+N.clientHeight,oe=N.scrollLeft,pe=oe+N.clientWidth,me=[],ve=new Set,Se=K.length;let be=I(K,ie?function de(Z){const le=Z.div,ue=le.offsetLeft+le.clientLeft;return ne?ue<pe:ue+le.clientWidth>oe}:function _e(Z){const le=Z.div;return le.offsetTop+le.clientTop+le.clientHeight>ce});be>0&&be<Se&&!ie&&(be=S(be,K,ce));let we=ie?pe:-1;for(let Z=be;Z<Se;Z++){const le=K[Z],ue=le.div,fe=ue.offsetLeft+ue.clientLeft,ge=ue.offsetTop+ue.clientTop,Pe=ue.clientWidth,xe=ue.clientHeight,Ee=fe+Pe,ye=ge+xe;if(-1===we)ye>=he&&(we=ye);else if((ie?fe:ge)>we)break;if(ye<=ce||ge>=he||Ee<=oe||fe>=pe)continue;const Me=Math.max(0,ce-ge)+Math.max(0,ye-he),Ae=(Pe-(Math.max(0,oe-fe)+Math.max(0,Ee-pe)))/Pe;me.push({id:le.id,x:fe,y:ge,view:le,percent:(xe-Me)/xe*Ae*100|0,widthPercent:100*Ae|0}),ve.add(le.id)}const re=me[0],J=me[me.length-1];return ae&&me.sort(function(Z,le){const ue=Z.percent-le.percent;return Math.abs(ue)>.001?-ue:Z.id-le.id}),{first:re,last:J,views:me,ids:ve}},t.isPortraitOrientation=function W(N){return N.width<=N.height},t.isValidRotation=function u(N){return Number.isInteger(N)&&N%90==0},t.isValidScrollMode=function b(N){return Number.isInteger(N)&&Object.values(x).includes(N)&&N!==x.UNKNOWN},t.isValidSpreadMode=function M(N){return Number.isInteger(N)&&Object.values(E).includes(N)&&N!==E.UNKNOWN},t.noContextMenuHandler=function n(N){N.preventDefault()},t.normalizeWheelEventDelta=function g(N){let K=o(N);return 0===N.deltaMode?K/=900:1===N.deltaMode&&(K/=30),K},t.normalizeWheelEventDirection=o,t.parseQueryString=function P(N){const K=new Map;for(const[ae,ie]of new URLSearchParams(N))K.set(ae.toLowerCase(),ie);return K},t.removeNullCharacters=function w(N,K=!1){return"string"!=typeof N?(console.error("The argument must be a string."),N):(K&&(N=N.replace(B," ")),N.replace(R,""))},t.roundToDivide=function Q(N,K){const ae=N%K;return 0===ae?N:Math.round(N-ae+K)},t.scrollIntoView=function c(N,K,ae=!1){let ie=N.offsetParent;if(!ie)return void console.error("offsetParent is not set -- cannot scroll");let ne=N.offsetTop+N.clientTop,ce=N.offsetLeft+N.clientLeft;for(;ie.clientHeight===ie.scrollHeight&&ie.clientWidth===ie.scrollWidth||ae&&(ie.classList.contains("markedContent")||"hidden"===getComputedStyle(ie).overflow);)if(ne+=ie.offsetTop,ce+=ie.offsetLeft,ie=ie.offsetParent,!ie)return;K&&(void 0!==K.top&&(ne+=K.top),void 0!==K.left&&(ce+=K.left,ie.scrollLeft=ce)),ie.scrollTop=ne},t.watchScroll=function T(N,K){const ae=function(ce){ne||(ne=window.requestAnimationFrame(function(){ne=null;const oe=N.scrollLeft,pe=ie.lastX;oe!==pe&&(ie.right=oe>pe),ie.lastX=oe;const _e=N.scrollTop,de=ie.lastY;_e!==de&&(ie.down=_e>de),ie.lastY=_e,K(ie)}))},ie={right:!0,down:!0,lastX:N.scrollLeft,lastY:N.scrollTop,_eventHandler:ae};let ne=null;return N.addEventListener("scroll",ae,!0),ie},t.DEFAULT_SCALE_VALUE="auto",t.DEFAULT_SCALE=1,t.DEFAULT_SCALE_DELTA=1.1,t.MIN_SCALE=.1,t.MAX_SCALE=10,t.UNKNOWN_SCALE=0,t.MAX_AUTO_SCALE=1.25,t.SCROLLBAR_PADDING=40,t.VERTICAL_PADDING=5,t.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},t.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const i={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};t.SidebarView=i,t.RendererType={CANVAS:"canvas",SVG:"svg"},t.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const x={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};t.ScrollMode=x;const E={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=E,t.AutoPrintRegExp=/\bprint\s*\(/,t.OutputScale=class F{constructor(){const K=window.devicePixelRatio||1;this.sx=K,this.sy=K}get scaled(){return 1!==this.sx||1!==this.sy}};const R=/\x00/g,B=/[\x01-\x1F]/g;function I(N,K,ae=0){let ie=ae,ne=N.length-1;if(ne<0||!K(N[ne]))return N.length;if(K(N[ie]))return ie;for(;ie<ne;){const ce=ie+ne>>1;K(N[ce])?ne=ce:ie=ce+1}return ie}function S(N,K,ae){if(N<2)return N;let ie=K[N].div,ne=ie.offsetTop+ie.clientTop;ne>=ae&&(ie=K[N-1].div,ne=ie.offsetTop+ie.clientTop);for(let ce=N-2;ce>=0&&(ie=K[ce].div,!(ie.offsetTop+ie.clientTop+ie.clientHeight<=ne));--ce)N=ce;return N}function o(N){let K=Math.hypot(N.deltaX,N.deltaY);const ae=Math.atan2(N.deltaY,N.deltaX);return-.25*Math.PI<ae&&ae<.75*Math.PI&&(K=-K),K}const j=new Promise(function(N){window.requestAnimationFrame(N)});t.animationStarted=j,t.ProgressBar=class Y{constructor(K){if(arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(K+" .progress"),this.bar=this.div.parentNode,this.percent=0}#e(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))}get percent(){return this._percent}set percent(K){this._indeterminate=isNaN(K),this._percent=function q(N,K,ae){return Math.min(Math.max(N,K),ae)}(K,0,100),this.#e()}setWidth(K){if(!K)return;const ie=K.parentNode.offsetWidth-K.offsetWidth;ie>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${ie}px`)}hide(){!this.visible||(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StructTreeLayerBuilder=void 0;const v={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},d=/^H(\d+)$/;t.StructTreeLayerBuilder=class A{constructor({pdfPage:O}){this.pdfPage=O}render(O){return this._walk(O)}_setAttributes(O,p){void 0!==O.alt&&p.setAttribute("aria-label",O.alt),void 0!==O.id&&p.setAttribute("aria-owns",O.id),void 0!==O.lang&&p.setAttribute("lang",O.lang)}_walk(O){if(!O)return null;const p=document.createElement("span");if("role"in O){const{role:l}=O,y=l.match(d);y?(p.setAttribute("role","heading"),p.setAttribute("aria-level",y[1])):v[l]&&p.setAttribute("role",v[l])}if(this._setAttributes(O,p),O.children)if(1===O.children.length&&"id"in O.children[0])this._setAttributes(O.children[0],p);else for(const l of O.children)p.appendChild(this._walk(l));return p}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerBuilder=void 0;var d=v(3);t.TextLayerBuilder=class C{constructor({textLayerDiv:p,eventBus:l,pageIndex:y,viewport:h,highlighter:m=null,enhanceTextSelection:f=!1}){this.textLayerDiv=p,this.eventBus=l,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=y+1,this.viewport=h,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=m,this.enhanceTextSelection=f,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const p=document.createElement("div");p.className="endOfContent",this.textLayerDiv.appendChild(p)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(p=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const l=document.createDocumentFragment();this.textLayerRenderTask=(0,d.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:l,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:p,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(l),this._finishRendering(),this.highlighter?.enable()},function(y){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(p){this.cancel(),this.textContentStream=p}setTextContent(p){this.cancel(),this.textContent=p}_bindMouse(){const p=this.textLayerDiv;let l=null;p.addEventListener("mousedown",y=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(l&&(clearTimeout(l),l=null));const h=p.querySelector(".endOfContent");if(!h)return;let m=y.target!==p;if(m=m&&"none"!==window.getComputedStyle(h).getPropertyValue("-moz-user-select"),m){const f=p.getBoundingClientRect(),i=Math.max(0,(y.pageY-f.top)/f.height);h.style.top=(100*i).toFixed(2)+"%"}h.classList.add("active")}),p.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(l=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),l=null},300));const y=p.querySelector(".endOfContent");!y||(y.style.top="",y.classList.remove("active"))})}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayerBuilder=void 0;var d=v(3);t.XfaLayerBuilder=class A{constructor({pageDiv:O,pdfPage:p,annotationStorage:l=null,linkService:y,xfaHtml:h=null}){this.pageDiv=O,this.pdfPage=p,this.annotationStorage=l,this.linkService=y,this.xfaHtml=h,this.div=null,this._cancelled=!1}render(O,p="display"){if("print"===p){const l={viewport:O.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:p},y=document.createElement("div");this.pageDiv.appendChild(y),l.div=y;const h=d.XfaLayer.render(l);return Promise.resolve(h)}return this.pdfPage.getXfa().then(l=>{if(this._cancelled||!l)return{textDivs:[]};const y={viewport:O.clone({dontFlip:!0}),div:this.div,xfaHtml:l,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:p};return this.div?d.XfaLayer.update(y):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),y.div=this.div,d.XfaLayer.render(y))}).catch(l=>{console.error(l)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFViewer=t.PDFSinglePageViewer=void 0;var d=v(6),A=v(11);t.PDFViewer=class C extends A.BaseViewer{},t.PDFSinglePageViewer=class O extends A.BaseViewer{_resetView(){super._resetView(),this._scrollMode=d.ScrollMode.PAGE,this._spreadMode=d.SpreadMode.NONE}set scrollMode(l){}_updateScrollMode(){}set spreadMode(l){}_updateSpreadMode(){}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PagesCountLimit=t.PDFPageViewBuffer=t.BaseViewer=void 0;var d=v(3),A=v(6),C=v(2),O=v(4),p=v(12),l=v(14),y=v(5),h=v(7),m=v(15),f=v(8),i=v(9);const _="enablePermissions",x={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};t.PagesCountLimit=x;class E{#e=new Set;#t=0;constructor(c){this.#t=c}push(c){const T=this.#e;T.has(c)&&T.delete(c),T.add(c),T.size>this.#t&&this.#n()}resize(c,T=null){this.#t=c;const P=this.#e;if(T){const R=P.size;let B=1;for(const w of P)if(T.has(w.id)&&(P.delete(w),P.add(w)),++B>R)break}for(;P.size>this.#t;)this.#n()}has(c){return this.#e.has(c)}[Symbol.iterator](){return this.#e.keys()}#n(){const c=this.#e.keys().next().value;c?.destroy(),this.#e.delete(c)}}t.PDFPageViewBuffer=E;class k{#e=null;#t=d.AnnotationMode.ENABLE_FORMS;#n=null;#r=!1;#h=0;#l=null;#i=null;constructor(c){if(this.constructor===k)throw new Error("Cannot initialize BaseViewer.");const T="2.14.305";if(d.version!==T)throw new Error(`The API version "${d.version}" does not match the Viewer version "${T}".`);if(this.container=c.container,this.viewer=c.viewer||c.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=c.eventBus,this.linkService=c.linkService||new y.SimpleLinkService,this.downloadManager=c.downloadManager||null,this.findController=c.findController||null,this._scriptingManager=c.scriptingManager||null,this.removePageBorders=c.removePageBorders||!1,this.textLayerMode=c.textLayerMode??A.TextLayerMode.ENABLE,this.#t=c.annotationMode??d.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=c.imageResourcesPath||"",this.enablePrintAutoRotate=c.enablePrintAutoRotate||!1,this.renderer=c.renderer||A.RendererType.CANVAS,this.useOnlyCssZoom=c.useOnlyCssZoom||!1,this.maxCanvasPixels=c.maxCanvasPixels,this.l10n=c.l10n||O.NullL10n,this.#r=c.enablePermissions||!1,this.pageColors=c.pageColors||null,c.pageColors&&(!CSS.supports("color",c.pageColors.background)||!CSS.supports("color",c.pageColors.foreground))&&((c.pageColors.background||c.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!c.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new l.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=c.renderingQueue,this._doc=document.documentElement,this.scroll=(0,A.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=A.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(c){return this._pages[c]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(c){return c?.pdfPage})}get renderForms(){return this.#t===d.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(c){if(!Number.isInteger(c))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(c,!0)||console.error(`currentPageNumber: "${c}" is not a valid page.`)}_setCurrentPageNumber(c,T=!1){if(this._currentPageNumber===c)return T&&this.#u(),!0;if(!(0<c&&c<=this.pagesCount))return!1;const P=this._currentPageNumber;return this._currentPageNumber=c,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:c,pageLabel:this._pageLabels?.[c-1]??null,previous:P}),T&&this.#u(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(c){if(!this.pdfDocument)return;let T=0|c;if(this._pageLabels){const P=this._pageLabels.indexOf(c);P>=0&&(T=P+1)}this._setCurrentPageNumber(T,!0)||console.error(`currentPageLabel: "${c}" is not a valid page.`)}get currentScale(){return this._currentScale!==A.UNKNOWN_SCALE?this._currentScale:A.DEFAULT_SCALE}set currentScale(c){if(isNaN(c))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale(c,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(c){!this.pdfDocument||this._setScale(c,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(c){if(!(0,A.isValidRotation)(c))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((c%=360)<0&&(c+=360),this._pagesRotation===c))return;this._pagesRotation=c;const T=this._currentPageNumber,P={rotation:c};for(const R of this._pages)R.update(P);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:c,pageNumber:T}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#g(c){!c||(c.includes(d.PermissionFlag.COPY)||this.viewer.classList.add(_),!c.includes(d.PermissionFlag.MODIFY_ANNOTATIONS)&&!c.includes(d.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#t===d.AnnotationMode.ENABLE_FORMS&&(this.#n=this.#t,this.#t=d.AnnotationMode.ENABLE))}#_(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const c=new Promise(T=>{this.#i=()=>{"hidden"===document.visibilityState&&(T(),document.removeEventListener("visibilitychange",this.#i),this.#i=null)},document.addEventListener("visibilitychange",this.#i)});return Promise.race([this._onePageRenderedCapability.promise,c])}setDocument(c){var T=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=c,!c)return;const P=c.isPureXfa,R=c.numPages,B=c.getPage(1),w=c.getOptionalContentConfig(),I=this.#r?c.getPermissions():Promise.resolve();if(R>x.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const V=this._scrollMode=A.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:V})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:R})},()=>{}),this._onBeforeDraw=V=>{const Q=this._pages[V.pageNumber-1];!Q||this.#e.push(Q)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=V=>{V.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:V.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#i&&(document.removeEventListener("visibilitychange",this.#i),this.#i=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([B,I]).then(([V,Q])=>{if(c!==this.pdfDocument)return;this._firstPageCapability.resolve(V),this._optionalContentConfigPromise=w,this.#g(Q);const te=this._scrollMode===A.ScrollMode.PAGE?null:this.viewer,S=this.currentScale,e=V.getViewport({scale:S*d.PixelsPerInch.PDF_TO_CSS_UNITS}),n=this.textLayerMode===A.TextLayerMode.DISABLE||P?null:this,o=this.#t!==d.AnnotationMode.DISABLE?this:null,g=P?this:null;for(let b=1;b<=R;++b){const M=new p.PDFPageView({container:te,eventBus:this.eventBus,id:b,scale:S,defaultViewport:e.clone(),optionalContentConfigPromise:w,renderingQueue:this.renderingQueue,textLayerFactory:n,textLayerMode:this.textLayerMode,annotationLayerFactory:o,annotationMode:this.#t,xfaLayerFactory:g,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(M)}const u=this._pages[0];u&&(u.setPdfPage(V),this.linkService.cachePageRef(1,V.ref)),this._scrollMode===A.ScrollMode.PAGE?this.#s():this._spreadMode!==A.SpreadMode.NONE&&this._updateSpreadMode(),this.#_().then(r(function*(){if(T.findController&&T.findController.setDocument(c),T._scriptingManager&&T._scriptingManager.setDocument(c),c.loadingParams.disableAutoFetch||R>x.FORCE_LAZY_PAGE_INIT)return void T._pagesCapability.resolve();let b=R-1;if(b<=0)T._pagesCapability.resolve();else for(let M=2;M<=R;++M){const W=c.getPage(M).then(j=>{const q=T._pages[M-1];q.pdfPage||q.setPdfPage(j),T.linkService.cachePageRef(M,j.ref),0==--b&&T._pagesCapability.resolve()},j=>{console.error(`Unable to get page ${M} to initialize viewer`,j),0==--b&&T._pagesCapability.resolve()});M%x.PAUSE_EAGER_PAGE_INIT==0&&(yield W)}})),this.eventBus.dispatch("pagesinit",{source:this}),c.getMetadata().then(({info:b})=>{c===this.pdfDocument&&b.Language&&(this.viewer.lang=b.Language)}),this.defaultRenderingQueue&&this.update()}).catch(V=>{console.error("Unable to initialize viewer",V),this._pagesCapability.reject(V)})}setPageLabels(c){if(this.pdfDocument){c?Array.isArray(c)&&this.pdfDocument.numPages===c.length?this._pageLabels=c:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let T=0,P=this._pages.length;T<P;T++)this._pages[T].setPageLabel(this._pageLabels?.[T]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=A.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new E(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,d.createPromiseCapability)(),this._onePageRenderedCapability=(0,d.createPromiseCapability)(),this._pagesCapability=(0,d.createPromiseCapability)(),this._scrollMode=A.ScrollMode.VERTICAL,this._previousScrollMode=A.ScrollMode.UNKNOWN,this._spreadMode=A.SpreadMode.NONE,this.#l={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#i&&(document.removeEventListener("visibilitychange",this.#i),this.#i=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(_),null!==this.#n&&(this.#t=this.#n,this.#n=null)}#s(){if(this._scrollMode!==A.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const c=this._currentPageNumber,T=this.#l,P=this.viewer;if(P.textContent="",T.pages.length=0,this._spreadMode!==A.SpreadMode.NONE||this.isInPresentationMode){const R=new Set,B=this._spreadMode-1;-1===B?R.add(c-1):c%2!==B?(R.add(c-1),R.add(c)):(R.add(c-2),R.add(c-1));const w=document.createElement("div");if(w.className="spread",this.isInPresentationMode){const I=document.createElement("div");I.className="dummyPage",w.appendChild(I)}for(const I of R){const V=this._pages[I];!V||(w.appendChild(V.div),T.pages.push(V))}P.appendChild(w)}else{const R=this._pages[c-1];P.appendChild(R.div),T.pages.push(R)}T.scrollDown=c>=T.previousPageNumber,T.previousPageNumber=c}_scrollUpdate(){0!==this.pagesCount&&this.update()}#a(c,T=null){const{div:P,id:R}=c;if(this._scrollMode===A.ScrollMode.PAGE&&(this._setCurrentPageNumber(R),this.#s(),this.update()),!T&&!this.isInPresentationMode){const B=P.offsetLeft+P.clientLeft,w=B+P.clientWidth,{scrollLeft:I,clientWidth:V}=this.container;(this._scrollMode===A.ScrollMode.HORIZONTAL||B<I||w>I+V)&&(T={left:0,top:0})}(0,A.scrollIntoView)(P,T)}#o(c){return c===this._currentScale||Math.abs(c-this._currentScale)<1e-15}_setScaleUpdatePages(c,T,P=!1,R=!1){if(this._currentScaleValue=T.toString(),this.#o(c))return void(R&&this.eventBus.dispatch("scalechanging",{source:this,scale:c,presetValue:T}));this._doc.style.setProperty("--zoom-factor",c);const B={scale:c};for(const w of this._pages)w.update(B);if(this._currentScale=c,!P){let I,w=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(w=this._location.pageNumber,I=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:w,destArray:I,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:c,presetValue:R?T:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL?2:1}_setScale(c,T=!1){let P=parseFloat(c);if(P>0)this._setScaleUpdatePages(P,c,T,!1);else{const R=this._pages[this._currentPageNumber-1];if(!R)return;let B=A.SCROLLBAR_PADDING,w=A.VERTICAL_PADDING;this.isInPresentationMode?B=w=4:this.removePageBorders?B=w=0:this._scrollMode===A.ScrollMode.HORIZONTAL&&([B,w]=[w,B]);const I=(this.container.clientWidth-B)/R.width*R.scale/this._pageWidthScaleFactor,V=(this.container.clientHeight-w)/R.height*R.scale;switch(c){case"page-actual":P=1;break;case"page-width":P=I;break;case"page-height":P=V;break;case"page-fit":P=Math.min(I,V);break;case"auto":const Q=(0,A.isPortraitOrientation)(R)?I:Math.min(V,I);P=Math.min(A.MAX_AUTO_SCALE,Q);break;default:return void console.error(`_setScale: "${c}" is an unknown zoom value.`)}this._setScaleUpdatePages(P,c,T,!0)}}#u(){const c=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),this.#a(c)}pageLabelToPageNumber(c){if(!this._pageLabels)return null;const T=this._pageLabels.indexOf(c);return T<0?null:T+1}scrollPageIntoView({pageNumber:c,destArray:T=null,allowNegativeOffset:P=!1,ignoreDestinationZoom:R=!1}){if(!this.pdfDocument)return;const B=Number.isInteger(c)&&this._pages[c-1];if(!B)return void console.error(`scrollPageIntoView: "${c}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!T)return void this._setCurrentPageNumber(c,!0);let te,S,w=0,I=0,V=0,Q=0;const e=B.rotation%180!=0,n=(e?B.height:B.width)/B.scale/d.PixelsPerInch.PDF_TO_CSS_UNITS,o=(e?B.width:B.height)/B.scale/d.PixelsPerInch.PDF_TO_CSS_UNITS;let g=0;switch(T[1].name){case"XYZ":w=T[2],I=T[3],g=T[4],w=null!==w?w:0,I=null!==I?I:o;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":I=T[2],g="page-width",null===I&&this._location?(w=this._location.left,I=this._location.top):("number"!=typeof I||I<0)&&(I=o);break;case"FitV":case"FitBV":w=T[2],V=n,Q=o,g="page-height";break;case"FitR":w=T[2],I=T[3],V=T[4]-w,Q=T[5]-I,te=(this.container.clientWidth-(this.removePageBorders?0:A.SCROLLBAR_PADDING))/V/d.PixelsPerInch.PDF_TO_CSS_UNITS,S=(this.container.clientHeight-(this.removePageBorders?0:A.VERTICAL_PADDING))/Q/d.PixelsPerInch.PDF_TO_CSS_UNITS,g=Math.min(Math.abs(te),Math.abs(S));break;default:return void console.error(`scrollPageIntoView: "${T[1].name}" is not a valid destination type.`)}if(R||(g&&g!==this._currentScale?this.currentScaleValue=g:this._currentScale===A.UNKNOWN_SCALE&&(this.currentScaleValue=A.DEFAULT_SCALE_VALUE)),"page-fit"===g&&!T[4])return void this.#a(B);const u=[B.viewport.convertToViewportPoint(w,I),B.viewport.convertToViewportPoint(w+V,I+Q)];let b=Math.min(u[0][0],u[1][0]),M=Math.min(u[0][1],u[1][1]);P||(b=Math.max(b,0),M=Math.max(M,0)),this.#a(B,{left:b,top:M})}_updateLocation(c){const T=this._currentScale,P=this._currentScaleValue,R=parseFloat(P)===T?Math.round(1e4*T)/100:P,B=c.id,I=this.container,V=this._pages[B-1].getPagePoint(I.scrollLeft-c.x,I.scrollTop-c.y),Q=Math.round(V[0]),te=Math.round(V[1]);let S=`#page=${B}`;this.isInPresentationMode||(S+=`&zoom=${R},${Q},${te}`),this._location={pageNumber:B,scale:R,top:te,left:Q,rotation:this._pagesRotation,pdfOpenParams:S}}update(){const c=this._getVisiblePages(),T=c.views,P=T.length;if(0===P)return;const R=Math.max(10,2*P+1);this.#e.resize(R,c.ids),this.renderingQueue.renderHighestPriority(c);const B=this._spreadMode===A.SpreadMode.NONE&&(this._scrollMode===A.ScrollMode.PAGE||this._scrollMode===A.ScrollMode.VERTICAL),w=this._currentPageNumber;let I=!1;for(const V of T){if(V.percent<100)break;if(V.id===w&&B){I=!0;break}}this._setCurrentPageNumber(I?w:T[0].id),this._updateLocation(c.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(c){return this.container.contains(c)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===A.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===A.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const c=this._scrollMode===A.ScrollMode.PAGE?this.#l.pages:this._pages,T=this._scrollMode===A.ScrollMode.HORIZONTAL;return(0,A.getVisibleElements)({scrollEl:this.container,views:c,sortByVisibility:!0,horizontal:T,rtl:T&&this._isContainerRtl})}isPageVisible(c){return!!this.pdfDocument&&(Number.isInteger(c)&&c>0&&c<=this.pagesCount?this._getVisiblePages().ids.has(c):(console.error(`isPageVisible: "${c}" is not a valid page.`),!1))}isPageCached(c){return!!this.pdfDocument&&(Number.isInteger(c)&&c>0&&c<=this.pagesCount?this.#e.has(this._pages[c-1]):(console.error(`isPageCached: "${c}" is not a valid page.`),!1))}cleanup(){for(const c of this._pages)c.renderingState!==A.RenderingStates.FINISHED&&c.reset()}_cancelRendering(){for(const c of this._pages)c.cancelRendering()}#d(c){var T=this;return r(function*(){if(c.pdfPage)return c.pdfPage;try{const P=yield T.pdfDocument.getPage(c.id);return c.pdfPage||c.setPdfPage(P),T.linkService._cachedPageNumber?.(P.ref)||T.linkService.cachePageRef(c.id,P.ref),P}catch(P){return console.error("Unable to get page for page view",P),null}})()}#f(c){if(1===c.first?.id)return!0;if(c.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case A.ScrollMode.PAGE:return this.#l.scrollDown;case A.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}#c(c){for(const T of c)this._pages[T-1]?.toggleLoadingIconSpinner(!0);for(const T of this.#e)c.has(T.id)||T.toggleLoadingIconSpinner(!1)}forceRendering(c){const T=c||this._getVisiblePages(),P=this.#f(T),B=this.renderingQueue.getHighestPriority(T,this._pages,P,this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL);return this.#c(T.ids),!!B&&(this.#d(B).then(()=>{this.renderingQueue.renderView(B)}),!0)}createTextLayerBuilder(c,T,P,R=!1,B,w){return new f.TextLayerBuilder({textLayerDiv:c,eventBus:B,pageIndex:T,viewport:P,enhanceTextSelection:!this.isInPresentationMode&&R,highlighter:w})}createTextHighlighter(c,T){return new m.TextHighlighter({eventBus:T,pageIndex:c,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(c,T,P=null,R="",B=!0,w=O.NullL10n,I=null,V=null,Q=null,te=null,S=null){return new C.AnnotationLayerBuilder({pageDiv:c,pdfPage:T,annotationStorage:P||this.pdfDocument?.annotationStorage,imageResourcesPath:R,renderForms:B,linkService:this.linkService,downloadManager:this.downloadManager,l10n:w,enableScripting:I??this.enableScripting,hasJSActionsPromise:V||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:te||this.pdfDocument?.getFieldObjects(),mouseState:Q||this._scriptingManager?.mouseState,annotationCanvasMap:S})}createXfaLayerBuilder(c,T,P=null){return new i.XfaLayerBuilder({pageDiv:c,pdfPage:T,annotationStorage:P||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(c){return new h.StructTreeLayerBuilder({pdfPage:c})}get hasEqualPageSizes(){const c=this._pages[0];for(let T=1,P=this._pages.length;T<P;++T){const R=this._pages[T];if(R.width!==c.width||R.height!==c.height)return!1}return!0}getPagesOverview(){return this._pages.map(c=>{const T=c.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,A.isPortraitOrientation)(T)?{width:T.width,height:T.height,rotation:T.rotation}:{width:T.height,height:T.width,rotation:(T.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(c){if(!(c instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${c}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=c;const T={optionalContentConfigPromise:c};for(const P of this._pages)P.update(T);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:c})}get scrollMode(){return this._scrollMode}set scrollMode(c){if(this._scrollMode!==c){if(!(0,A.isValidScrollMode)(c))throw new Error(`Invalid scroll mode: ${c}`);this.pagesCount>x.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=c,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:c}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(c=null){const T=this._scrollMode,P=this.viewer;P.classList.toggle("scrollHorizontal",T===A.ScrollMode.HORIZONTAL),P.classList.toggle("scrollWrapped",T===A.ScrollMode.WRAPPED),this.pdfDocument&&c&&(T===A.ScrollMode.PAGE?this.#s():this._previousScrollMode===A.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(c,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(c){if(this._spreadMode!==c){if(!(0,A.isValidSpreadMode)(c))throw new Error(`Invalid spread mode: ${c}`);this._spreadMode=c,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:c}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(c=null){if(!this.pdfDocument)return;const T=this.viewer,P=this._pages;if(this._scrollMode===A.ScrollMode.PAGE)this.#s();else if(T.textContent="",this._spreadMode===A.SpreadMode.NONE)for(const R of this._pages)T.appendChild(R.div);else{const R=this._spreadMode-1;let B=null;for(let w=0,I=P.length;w<I;++w)null===B?(B=document.createElement("div"),B.className="spread",T.appendChild(B)):w%2===R&&(B=B.cloneNode(!1),T.appendChild(B)),B.appendChild(P[w].div)}!c||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(c,!0),this.update())}_getPageAdvance(c,T=!1){switch(this._scrollMode){case A.ScrollMode.WRAPPED:{const{views:P}=this._getVisiblePages(),R=new Map;for(const{id:B,y:w,percent:I,widthPercent:V}of P){if(0===I||V<100)continue;let Q=R.get(w);Q||R.set(w,Q||=[]),Q.push(B)}for(const B of R.values()){const w=B.indexOf(c);if(-1===w)continue;const I=B.length;if(1===I)break;if(T)for(let V=w-1,Q=0;V>=Q;V--){const S=B[V+1]-1;if(B[V]<S)return c-S}else for(let V=w+1,Q=I;V<Q;V++){const S=B[V-1]+1;if(B[V]>S)return S-c}if(T){const V=B[0];if(V<c)return c-V+1}else{const V=B[I-1];if(V>c)return V-c+1}break}break}case A.ScrollMode.HORIZONTAL:break;case A.ScrollMode.PAGE:case A.ScrollMode.VERTICAL:{if(this._spreadMode===A.SpreadMode.NONE)break;const P=this._spreadMode-1;if(T&&c%2!==P)break;if(!T&&c%2===P)break;const{views:R}=this._getVisiblePages(),B=T?c-1:c+1;for(const{id:w,percent:I,widthPercent:V}of R)if(w===B){if(I>0&&100===V)return 2;break}break}}return 1}nextPage(){const c=this._currentPageNumber,T=this.pagesCount;if(c>=T)return!1;const P=this._getPageAdvance(c,!1)||1;return this.currentPageNumber=Math.min(c+P,T),!0}previousPage(){const c=this._currentPageNumber;if(c<=1)return!1;const T=this._getPageAdvance(c,!0)||1;return this.currentPageNumber=Math.max(c-T,1),!0}increaseScale(c=1){let T=this._currentScale;do{T=(T*A.DEFAULT_SCALE_DELTA).toFixed(2),T=Math.ceil(10*T)/10,T=Math.min(A.MAX_SCALE,T)}while(--c>0&&T<A.MAX_SCALE);this.currentScaleValue=T}decreaseScale(c=1){let T=this._currentScale;do{T=(T/A.DEFAULT_SCALE_DELTA).toFixed(2),T=Math.floor(10*T)/10,T=Math.max(A.MIN_SCALE,T)}while(--c>0&&T>A.MIN_SCALE);this.currentScaleValue=T}updateContainerHeightCss(){const c=this.container.clientHeight;c!==this.#h&&(this.#h=c,this._doc.style.setProperty("--viewer-container-height",`${c}px`))}}t.BaseViewer=k},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPageView=void 0;var d=v(3),A=v(6),C=v(13),O=v(4);const p=C.compatibilityParams.maxCanvasPixels||16777216;t.PDFPageView=class l{#e=d.AnnotationMode.ENABLE_FORMS;constructor(h){const m=h.container,f=h.defaultViewport;this.id=h.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=h.scale||A.DEFAULT_SCALE,this.viewport=f,this.pdfPageRotate=f.rotation,this._optionalContentConfigPromise=h.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=h.textLayerMode??A.TextLayerMode.ENABLE,this.#e=h.annotationMode??d.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=h.imageResourcesPath||"",this.useOnlyCssZoom=h.useOnlyCssZoom||!1,this.maxCanvasPixels=h.maxCanvasPixels||p,this.pageColors=h.pageColors||null,this.eventBus=h.eventBus,this.renderingQueue=h.renderingQueue,this.textLayerFactory=h.textLayerFactory,this.annotationLayerFactory=h.annotationLayerFactory,this.xfaLayerFactory=h.xfaLayerFactory,this.textHighlighter=h.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=h.structTreeLayerFactory,this.renderer=h.renderer||A.RendererType.CANVAS,this.l10n=h.l10n||O.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=A.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const i=document.createElement("div");i.className="page",i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px",i.setAttribute("data-page-number",this.id),i.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(s=>{i.setAttribute("aria-label",s)}),this.div=i,m?.appendChild(i)}setPdfPage(h){this.pdfPage=h,this.pdfPageRotate=h.rotate,this.viewport=h.getViewport({scale:this.scale*d.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var h=this;return r(function*(){let m=null;try{yield h.annotationLayer.render(h.viewport,"display")}catch(f){m=f}finally{h.eventBus.dispatch("annotationlayerrendered",{source:h,pageNumber:h.id,error:m})}})()}_renderXfaLayer(){var h=this;return r(function*(){let m=null;try{const f=yield h.xfaLayer.render(h.viewport,"display");h.textHighlighter&&h._buildXfaTextContentItems(f.textDivs)}catch(f){m=f}finally{h.eventBus.dispatch("xfalayerrendered",{source:h,pageNumber:h.id,error:m})}})()}_buildXfaTextContentItems(h){var m=this;return r(function*(){const f=yield m.pdfPage.getTextContent(),i=[];for(const s of f.items)i.push(s.str);m.textHighlighter.setTextMapping(h,i),m.textHighlighter.enable()})()}_resetZoomLayer(h=!1){if(!this.zoomLayer)return;const m=this.zoomLayer.firstChild;this.paintedViewportMap.delete(m),m.width=0,m.height=0,h&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:h=!1,keepAnnotationLayer:m=!1,keepXfaLayer:f=!1}={}){this.cancelRendering({keepAnnotationLayer:m,keepXfaLayer:f}),this.renderingState=A.RenderingStates.INITIAL;const i=this.div;i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px";const s=i.childNodes,_=h&&this.zoomLayer||null,x=m&&this.annotationLayer?.div||null,E=f&&this.xfaLayer?.div||null;for(let k=s.length-1;k>=0;k--){const F=s[k];switch(F){case _:case x:case E:continue}F.remove()}i.removeAttribute("data-loaded"),x&&this.annotationLayer.hide(),E&&this.xfaLayer.hide(),_||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(k=>{this.loadingIconDiv?.setAttribute("aria-label",k)}),i.appendChild(this.loadingIconDiv)}update({scale:h=0,rotation:m=null,optionalContentConfigPromise:f=null}){if(this.scale=h||this.scale,"number"==typeof m&&(this.rotation=m),f instanceof Promise&&(this._optionalContentConfigPromise=f),this.viewport=this.viewport.clone({scale:this.scale*d.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:_}=document.documentElement;_.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let s=!1;if(this.canvas&&this.maxCanvasPixels>0){const _=this.outputScale;(Math.floor(this.viewport.width)*_.sx|0)*(Math.floor(this.viewport.height)*_.sy|0)>this.maxCanvasPixels&&(s=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&s)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:h=!1,keepXfaLayer:m=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!h||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!m||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:h,redrawAnnotationLayer:m=!1,redrawXfaLayer:f=!1}){const i=this.viewport.width,s=this.viewport.height,_=this.div;h.style.width=h.parentNode.style.width=_.style.width=Math.floor(i)+"px",h.style.height=h.parentNode.style.height=_.style.height=Math.floor(s)+"px";const x=this.viewport.rotation-this.paintedViewportMap.get(h).rotation,E=Math.abs(x);let k=1,F=1;if((90===E||270===E)&&(k=s/i,F=i/s),h.style.transform=`rotate(${x}deg) scale(${k}, ${F})`,this.textLayer){const c=this.textLayer.viewport,P=Math.abs(this.viewport.rotation-c.rotation);let R=i/c.width;(90===P||270===P)&&(R=i/c.height);const B=this.textLayer.textLayerDiv;let w,I;switch(P){case 0:w=I=0;break;case 90:w=0,I="-"+B.style.height;break;case 180:w="-"+B.style.width,I="-"+B.style.height;break;case 270:w="-"+B.style.width,I=0;break;default:console.error("Bad rotation value.")}B.style.transform=`rotate(${P}deg) scale(${R}) translate(${w}, ${I})`,B.style.transformOrigin="0% 0%"}m&&this.annotationLayer&&this._renderAnnotationLayer(),f&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(h,m){return this.viewport.convertToPdfPoint(h,m)}toggleLoadingIconSpinner(h=!1){this.loadingIconDiv?.classList.toggle("notVisible",!h)}draw(){var h=this;this.renderingState!==A.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:m,pdfPage:f}=this;if(!f)return this.renderingState=A.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=A.RenderingStates.RUNNING;const i=document.createElement("div");i.style.width=m.style.width,i.style.height=m.style.height,i.classList.add("canvasWrapper"),this.annotationLayer?.div?m.insertBefore(i,this.annotationLayer.div):m.appendChild(i);let s=null;if(this.textLayerMode!==A.TextLayerMode.DISABLE&&this.textLayerFactory){const F=document.createElement("div");F.className="textLayer",F.style.width=i.style.width,F.style.height=i.style.height,this.annotationLayer?.div?m.insertBefore(F,this.annotationLayer.div):m.appendChild(F),s=this.textLayerFactory.createTextLayerBuilder(F,this.id-1,this.viewport,this.textLayerMode===A.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=s,this.#e!==d.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(m,f,null,this.imageResourcesPath,this.#e===d.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&m.appendChild(this.xfaLayer.div);let _=null;this.renderingQueue&&(_=F=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=A.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=A.RenderingStates.RUNNING,F()});F()});const x=function(){var F=r(function*(c=null){if(E===h.paintTask&&(h.paintTask=null),c instanceof d.RenderingCancelledException)h._renderError=null;else if(h._renderError=c,h.renderingState=A.RenderingStates.FINISHED,h.loadingIconDiv&&(h.loadingIconDiv.remove(),delete h.loadingIconDiv),h._resetZoomLayer(!0),h.eventBus.dispatch("pagerendered",{source:h,pageNumber:h.id,cssTransform:!1,timestamp:performance.now(),error:h._renderError}),c)throw c});return function(){return F.apply(this,arguments)}}(),E=this.renderer===A.RendererType.SVG?this.paintOnSvg(i):this.paintOnCanvas(i);E.onRenderContinue=_,this.paintTask=E;const k=E.promise.then(()=>x(null).then(()=>{if(s){const F=f.streamTextContent({includeMarkedContent:!0});s.setTextContentStream(F),s.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(F){return x(F)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(m,f,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=F=>{F.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(c=>{if(!c||!this.canvas)return;const T=this.structTreeLayer.render(c);T.classList.add("structTree"),this.canvas.appendChild(T)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(f)),m.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),k}paintOnCanvas(h){const m=(0,d.createPromiseCapability)(),f={promise:m.promise,onRenderContinue(B){B()},cancel(){R.cancel()}},i=this.viewport,s=document.createElement("canvas");s.hidden=!0;let _=!0;const x=function(){_&&(s.hidden=!1,_=!1)};h.appendChild(s),this.canvas=s;const E=s.getContext("2d",{alpha:!1}),k=this.outputScale=new A.OutputScale;if(this.useOnlyCssZoom){const B=i.clone({scale:d.PixelsPerInch.PDF_TO_CSS_UNITS});k.sx*=B.width/i.width,k.sy*=B.height/i.height}if(this.maxCanvasPixels>0){const w=Math.sqrt(this.maxCanvasPixels/(i.width*i.height));k.sx>w||k.sy>w?(k.sx=w,k.sy=w,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const F=(0,A.approximateFraction)(k.sx),c=(0,A.approximateFraction)(k.sy);s.width=(0,A.roundToDivide)(i.width*k.sx,F[0]),s.height=(0,A.roundToDivide)(i.height*k.sy,c[0]),s.style.width=(0,A.roundToDivide)(i.width,F[1])+"px",s.style.height=(0,A.roundToDivide)(i.height,c[1])+"px",this.paintedViewportMap.set(s,i);const P={canvasContext:E,transform:k.scaled?[k.sx,0,0,k.sy,0,0]:null,viewport:this.viewport,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},R=this.pdfPage.render(P);return R.onContinue=function(B){x(),f.onRenderContinue?f.onRenderContinue(B):B()},R.promise.then(function(){x(),m.resolve()},function(B){x(),m.reject(B)}),f}paintOnSvg(h){let m=!1;const f=()=>{if(m)throw new d.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},i=this.pdfPage,s=this.viewport.clone({scale:d.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:i.getOperatorList({annotationMode:this.#e}).then(x=>(f(),new d.SVGGraphics(i.commonObjs,i.objs).getSVG(x,s).then(k=>{f(),this.svg=k,this.paintedViewportMap.set(k,s),k.style.width=h.style.width,k.style.height=h.style.height,this.renderingState=A.RenderingStates.FINISHED,h.appendChild(k)}))),onRenderContinue(x){x()},cancel(){m=!0}}}setPageLabel(h){this.pageLabel="string"==typeof h?h:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compatibilityParams=t.OptionKind=t.AppOptions=void 0;const v=Object.create(null);t.compatibilityParams=v;{const p=navigator.userAgent||"",l=navigator.platform||"",y=navigator.maxTouchPoints||1,h=/Android/.test(p);(/\b(iPad|iPhone|iPod)(?=;)/.test(p)||"MacIntel"===l&&y>1||h)&&(v.maxCanvasPixels=5242880)}const d={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};t.OptionKind=d;const A={annotationMode:{value:2,kind:d.VIEWER+d.PREFERENCE},cursorToolOnLoad:{value:0,kind:d.VIEWER+d.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:d.VIEWER},defaultZoomValue:{value:"",kind:d.VIEWER+d.PREFERENCE},disableHistory:{value:!1,kind:d.VIEWER},disablePageLabels:{value:!1,kind:d.VIEWER+d.PREFERENCE},enablePermissions:{value:!1,kind:d.VIEWER+d.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:d.VIEWER+d.PREFERENCE},enableScripting:{value:!0,kind:d.VIEWER+d.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:d.VIEWER},externalLinkTarget:{value:0,kind:d.VIEWER+d.PREFERENCE},historyUpdateUrl:{value:!1,kind:d.VIEWER+d.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:d.VIEWER+d.PREFERENCE},imageResourcesPath:{value:"./images/",kind:d.VIEWER},maxCanvasPixels:{value:16777216,compatibility:v.maxCanvasPixels,kind:d.VIEWER},pageColorsBackground:{value:"Canvas",kind:d.VIEWER+d.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:d.VIEWER+d.PREFERENCE},pdfBugEnabled:{value:!1,kind:d.VIEWER+d.PREFERENCE},printResolution:{value:150,kind:d.VIEWER},renderer:{value:"canvas",kind:d.VIEWER},sidebarViewOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},scrollModeOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},spreadModeOnLoad:{value:-1,kind:d.VIEWER+d.PREFERENCE},textLayerMode:{value:1,kind:d.VIEWER+d.PREFERENCE},useOnlyCssZoom:{value:!1,kind:d.VIEWER+d.PREFERENCE},viewerCssTheme:{value:0,kind:d.VIEWER+d.PREFERENCE},viewOnLoad:{value:0,kind:d.VIEWER+d.PREFERENCE},cMapPacked:{value:!0,kind:d.API},cMapUrl:{value:"../web/cmaps/",kind:d.API},disableAutoFetch:{value:!1,kind:d.API+d.PREFERENCE},disableFontFace:{value:!1,kind:d.API+d.PREFERENCE},disableRange:{value:!1,kind:d.API+d.PREFERENCE},disableStream:{value:!1,kind:d.API+d.PREFERENCE},docBaseUrl:{value:"",kind:d.API},enableXfa:{value:!0,kind:d.API+d.PREFERENCE},fontExtraProperties:{value:!1,kind:d.API},isEvalSupported:{value:!0,kind:d.API},maxImageSize:{value:-1,kind:d.API},pdfBug:{value:!1,kind:d.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:d.API},verbosity:{value:1,kind:d.API},workerPort:{value:null,kind:d.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:d.WORKER}};A.disablePreferences={value:!1,kind:d.VIEWER},A.locale={value:navigator.language||"en-US",kind:d.VIEWER},A.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:d.VIEWER},A.renderer.kind+=d.PREFERENCE;const C=Object.create(null);t.AppOptions=class O{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(l){const y=C[l];if(void 0!==y)return y;const h=A[l];return void 0!==h?h.compatibility??h.value:void 0}static getAll(l=null){const y=Object.create(null);for(const h in A){const m=A[h];if(l){if(0==(l&m.kind))continue;if(l===d.PREFERENCE){const i=m.value,s=typeof i;if("boolean"===s||"string"===s||"number"===s&&Number.isInteger(i)){y[h]=i;continue}throw new Error(`Invalid type for preference: ${h}`)}}const f=C[h];y[h]=void 0!==f?f:m.compatibility??m.value}return y}static set(l,y){C[l]=y}static setAll(l){for(const y in l)C[y]=l[y]}static remove(l){delete C[l]}static _hasUserOptions(){return Object.keys(C).length>0}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFRenderingQueue=void 0;var d=v(3),A=v(6);t.PDFRenderingQueue=class O{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(l){this.pdfViewer=l}setThumbnailViewer(l){this.pdfThumbnailViewer=l}isHighestPriority(l){return this.highestPriorityPage===l.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(l){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(l)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(l,y,h,m=!1){const f=l.views,i=f.length;if(0===i)return null;for(let k=0;k<i;k++){const F=f[k].view;if(!this.isViewFinished(F))return F}const s=l.first.id,_=l.last.id;if(_-s+1>i){const k=l.ids;for(let F=1,c=_-s;F<c;F++){const T=h?s+F:_-F;if(k.has(T))continue;const P=y[T-1];if(!this.isViewFinished(P))return P}}let x=h?_:s-2,E=y[x];return E&&!this.isViewFinished(E)||m&&(x+=h?1:-1,E=y[x],E&&!this.isViewFinished(E))?E:null}isViewFinished(l){return l.renderingState===A.RenderingStates.FINISHED}renderView(l){switch(l.renderingState){case A.RenderingStates.FINISHED:return!1;case A.RenderingStates.PAUSED:this.highestPriorityPage=l.renderingId,l.resume();break;case A.RenderingStates.RUNNING:this.highestPriorityPage=l.renderingId;break;case A.RenderingStates.INITIAL:this.highestPriorityPage=l.renderingId,l.draw().finally(()=>{this.renderHighestPriority()}).catch(y=>{y instanceof d.RenderingCancelledException||console.error(`renderView: "${y}"`)})}return!0}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextHighlighter=void 0,t.TextHighlighter=class v{constructor({findController:A,eventBus:C,pageIndex:O}){this.findController=A,this.matches=[],this.eventBus=C,this.pageIdx=O,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(A,C){this.textDivs=A,this.textContentItemsStr=C}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=A=>{(A.pageIndex===this.pageIdx||-1===A.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(A,C){if(!A)return[];const{textContentItemsStr:O}=this;let p=0,l=0;const y=O.length-1,h=[];for(let m=0,f=A.length;m<f;m++){let i=A[m];for(;p!==y&&i>=l+O[p].length;)l+=O[p].length,p++;p===O.length&&console.error("Could not find a matching mapping");const s={begin:{divIdx:p,offset:i-l}};for(i+=C[m];p!==y&&i>l+O[p].length;)l+=O[p].length,p++;s.end={divIdx:p,offset:i-l},h.push(s)}return h}_renderMatches(A){if(0===A.length)return;const{findController:C,pageIdx:O}=this,{textContentItemsStr:p,textDivs:l}=this,y=O===C.selected.pageIdx,h=C.selected.matchIdx;let f=null;function s(k,F){const c=k.divIdx;return l[c].textContent="",_(c,0,k.offset,F)}function _(k,F,c,T){let P=l[k];if(P.nodeType===Node.TEXT_NODE){const w=document.createElement("span");P.parentNode.insertBefore(w,P),w.appendChild(P),l[k]=w,P=w}const R=p[k].substring(F,c),B=document.createTextNode(R);if(T){const w=document.createElement("span");return w.className=`${T} appended`,w.appendChild(B),P.appendChild(w),T.includes("selected")?w.offsetLeft:0}return P.appendChild(B),0}let x=h,E=x+1;if(C.state.highlightAll)x=0,E=A.length;else if(!y)return;for(let k=x;k<E;k++){const F=A[k],c=F.begin,T=F.end,P=y&&k===h,R=P?" selected":"";let B=0;if(f&&c.divIdx===f.divIdx?_(f.divIdx,f.offset,c.offset):(null!==f&&_(f.divIdx,f.offset,undefined),s(c)),c.divIdx===T.divIdx)B=_(c.divIdx,c.offset,T.offset,"highlight"+R);else{B=_(c.divIdx,c.offset,undefined,"highlight begin"+R);for(let w=c.divIdx+1,I=T.divIdx;w<I;w++)l[w].className="highlight middle"+R;s(T,"highlight end"+R)}f=T,P&&C.scrollMatchIntoView({element:l[c.divIdx],selectedLeft:B,pageIndex:O,matchIndex:h})}f&&_(f.divIdx,f.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:A,matches:C,pageIdx:O}=this,{textContentItemsStr:p,textDivs:l}=this;let y=-1;for(let f=0,i=C.length;f<i;f++){const s=C[f];for(let x=Math.max(y,s.begin.divIdx),E=s.end.divIdx;x<=E;x++){const k=l[x];k.textContent=p[x],k.className=""}y=s.end.divIdx+1}A?.highlightMatches&&(this.matches=this._convertMatches(A.pageMatches[O]||null,A.pageMatchesLength[O]||null),this._renderMatches(this.matches))}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadManager=void 0;var d=v(3);function A(O,p){const l=document.createElement("a");if(!l.click)throw new Error('DownloadManager: "a.click()" is not supported.');l.href=O,l.target="_parent","download"in l&&(l.download=p),(document.body||document.documentElement).appendChild(l),l.click(),l.remove()}t.DownloadManager=class C{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(p,l){(0,d.createValidAbsoluteUrl)(p,"http://example.com")?A(p+"#pdfjs.action=download",l):console.error(`downloadUrl - not a valid URL: ${p}`)}downloadData(p,l,y){A(URL.createObjectURL(new Blob([p],{type:y})),l)}openOrDownloadData(p,l,y){const h=(0,d.isPdfFile)(y),m=h?"application/pdf":"";if(h){let i,f=this._openBlobUrls.get(p);f||(f=URL.createObjectURL(new Blob([l],{type:m})),this._openBlobUrls.set(p,f)),i="?file="+encodeURIComponent(f+"#"+y);try{return window.open(i),!0}catch(s){console.error(`openOrDownloadData: ${s}`),URL.revokeObjectURL(f),this._openBlobUrls.delete(p)}}return this.downloadData(l,y,m),!1}download(p,l,y,h="download"){A(URL.createObjectURL(p),y)}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WaitOnType=t.EventBus=t.AutomationEventBus=void 0,t.waitOnEventOrTimeout=function d({target:O,name:p,delay:l=0}){return new Promise(function(y,h){if("object"!=typeof O||!p||"string"!=typeof p||!(Number.isInteger(l)&&l>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function m(_){O instanceof A?O._off(p,f):O.removeEventListener(p,f),s&&clearTimeout(s),y(_)}const f=m.bind(null,v.EVENT);O instanceof A?O._on(p,f):O.addEventListener(p,f);const i=m.bind(null,v.TIMEOUT),s=setTimeout(i,l)})};const v={EVENT:"event",TIMEOUT:"timeout"};t.WaitOnType=v;class A{constructor(){this._listeners=Object.create(null)}on(p,l,y=null){this._on(p,l,{external:!0,once:y?.once})}off(p,l,y=null){this._off(p,l,{external:!0,once:y?.once})}dispatch(p,l){const y=this._listeners[p];if(!y||0===y.length)return;let h;for(const{listener:m,external:f,once:i}of y.slice(0))i&&this._off(p,m),f?(h||=[]).push(m):m(l);if(h){for(const m of h)m(l);h=null}}_on(p,l,y=null){(this._listeners[p]||=[]).push({listener:l,external:!0===y?.external,once:!0===y?.once})}_off(p,l,y=null){const h=this._listeners[p];if(h)for(let m=0,f=h.length;m<f;m++)if(h[m].listener===l)return void h.splice(m,1)}}t.EventBus=A,t.AutomationEventBus=class C extends A{dispatch(p,l){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericL10n=void 0,v(19);var d=v(4);const A=document.webL10n;t.GenericL10n=class C{constructor(p){this._lang=p,this._ready=new Promise((l,y)=>{A.setLanguage((0,d.fixupLangCode)(p),()=>{l(A)})})}getLanguage(){var p=this;return r(function*(){return(yield p._ready).getLanguage()})()}getDirection(){var p=this;return r(function*(){return(yield p._ready).getDirection()})()}get(p,l=null,y=(0,d.getL10nFallback)(p,l)){var h=this;return r(function*(){return(yield h._ready).get(p,l,y)})()}translate(p){var l=this;return r(function*(){return(yield l._ready).translate(p)})()}}},()=>{document.webL10n=function(L,t,v){var d={},A="",C="textContent",O="",p={},l="loading";function s(w,I,V){I=I||function(S){},V=V||function(){};var Q=new XMLHttpRequest;Q.open("GET",w,!0),Q.overrideMimeType&&Q.overrideMimeType("text/plain; charset=utf-8"),Q.onreadystatechange=function(){4==Q.readyState&&(200==Q.status||0===Q.status?I(Q.responseText):V())},Q.onerror=V,Q.ontimeout=V;try{Q.send(null)}catch{V()}}function x(w,I){w&&(w=w.toLowerCase()),I=I||function(){},function E(){d={},A="",O=""}(),O=w;var V=function h(){return t.querySelectorAll('link[type="application/l10n"]')}(),Q=V.length;if(0!==Q){var n,o=0;n=function(){++o>=Q&&(I(),l="complete")};for(var u=0;u<Q;u++)new g(V[u]).load(w,n)}else{var te=function m(){var w=t.querySelector('script[type="application/l10n"]');return w?JSON.parse(w.innerHTML):null}();if(te&&te.locales&&te.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(d=te.locales[w])){var S=te.default_locale.toLowerCase();for(var e in te.locales){if((e=e.toLowerCase())===w){d=te.locales[w];break}e===S&&(d=te.locales[S])}}I()}else console.log("no resource to load, early way out");l="complete"}function g(M){var W=M.href;this.load=function(j,q){!function _(w,I,V,Q){var te=w.replace(/[^\/]*$/,"")||"./";function S(n){return n.lastIndexOf("\\")<0?n:n.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}s(w,function(n){A+=n,function e(n,o){var g={},u=/^\s*|\s*$/,b=/^\s*#|^\s*$/,M=/^\s*\[(.*)\]\s*$/,W=/^\s*@import\s+url\((.*)\)\s*$/i,j=/^([^=\s]*)\s*=\s*(.+)$/;function q(H,ee,G){var N=H.replace(u,"").split(/[\r\n]+/),K="*",ae=I.split("-",1)[0],ie=!1,ne="";!function ce(){for(;;){if(!N.length)return void G();var he=N.shift();if(!b.test(he)){if(ee){if(ne=M.exec(he)){K=ne[1].toLowerCase(),ie="*"!==K&&K!==I&&K!==ae;continue}if(ie)continue;if(ne=W.exec(he))return void Y(te+ne[1],ce)}var oe=he.match(j);oe&&3==oe.length&&(g[oe[1]]=S(oe[2]))}}}()}function Y(H,ee){s(H,function(G){q(G,!1,ee)},function(){console.warn(H+" not found."),ee()})}q(n,!0,function(){o(g)})}(n,function(o){for(var g in o){var u,b,M=g.lastIndexOf(".");M>0?(u=g.substring(0,M),b=g.substring(M+1)):(u=g,b=C),d[u]||(d[u]={}),d[u][b]=o[g]}V&&V()})},Q)}(W,j,q,function(){console.warn(W+" not found."),console.warn('"'+j+'" resource not found'),O="",q()})}}}function F(w,I,V){var Q=d[w];if(!Q){if(console.warn("#"+w+" is undefined."),!V)return null;Q=V}var te={};for(var S in Q){var e=Q[S];e=T(e=c(e,I,w,S),I,w),te[S]=e}return te}function c(w,I,V,Q){var S=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(w);if(!S||!S.length)return w;var o,e=S[1],n=S[2];return I&&n in I?o=I[n]:n in d&&(o=d[n]),e in p&&(w=(0,p[e])(w,o,V,Q)),w}function T(w,I,V){return w.replace(/\{\{\s*(.+?)\s*\}\}/g,function(te,S){return I&&S in I?I[S]:S in d?d[S]:(console.log("argument {{"+S+"}} for #"+V+" is undefined."),te)})}function P(w){var I=function i(w){if(!w)return{};var I=w.getAttribute("data-l10n-id"),V=w.getAttribute("data-l10n-args"),Q={};if(V)try{Q=JSON.parse(V)}catch{console.warn("could not parse arguments for #"+I)}return{id:I,args:Q}}(w);if(I.id){var V=F(I.id,I.args);if(!V)return void console.warn("#"+I.id+" is undefined.");if(V[C]){if(0===function R(w){if(w.children)return w.children.length;if(typeof w.childElementCount<"u")return w.childElementCount;for(var I=0,V=0;V<w.childNodes.length;V++)I+=1===w.nodeType?1:0;return I}(w))w[C]=V[C];else{for(var Q=w.childNodes,te=!1,S=0,e=Q.length;S<e;S++)3===Q[S].nodeType&&/\S/.test(Q[S].nodeValue)&&(te?Q[S].nodeValue="":(Q[S].nodeValue=V[C],te=!0));if(!te){var n=t.createTextNode(V[C]);w.insertBefore(n,w.firstChild)}}delete V[C]}for(var o in V)w[o]=V[o]}}return p.plural=function(w,I,V,Q){var te=parseFloat(I);if(isNaN(te)||Q!=C)return w;p._pluralRules||(p._pluralRules=function k(w){function V(e,n){return-1!==n.indexOf(e)}function Q(e,n,o){return n<=e&&e<=o}var te={0:function(e){return"other"},1:function(e){return Q(e%100,3,10)?"few":0===e?"zero":Q(e%100,11,99)?"many":2==e?"two":1==e?"one":"other"},2:function(e){return 0!==e&&e%10==0?"many":2==e?"two":1==e?"one":"other"},3:function(e){return 1==e?"one":"other"},4:function(e){return Q(e,0,1)?"one":"other"},5:function(e){return Q(e,0,2)&&2!=e?"one":"other"},6:function(e){return 0===e?"zero":e%10==1&&e%100!=11?"one":"other"},7:function(e){return 2==e?"two":1==e?"one":"other"},8:function(e){return Q(e,3,6)?"few":Q(e,7,10)?"many":2==e?"two":1==e?"one":"other"},9:function(e){return 0===e||1!=e&&Q(e%100,1,19)?"few":1==e?"one":"other"},10:function(e){return Q(e%10,2,9)&&!Q(e%100,11,19)?"few":e%10!=1||Q(e%100,11,19)?"other":"one"},11:function(e){return Q(e%10,2,4)&&!Q(e%100,12,14)?"few":e%10==0||Q(e%10,5,9)||Q(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function(e){return Q(e,2,4)?"few":1==e?"one":"other"},13:function(e){return Q(e%10,2,4)&&!Q(e%100,12,14)?"few":1!=e&&Q(e%10,0,1)||Q(e%10,5,9)||Q(e%100,12,14)?"many":1==e?"one":"other"},14:function(e){return Q(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function(e){return 0===e||Q(e%100,2,10)?"few":Q(e%100,11,19)?"many":1==e?"one":"other"},16:function(e){return e%10==1&&11!=e?"one":"other"},17:function(e){return 3==e?"few":0===e?"zero":6==e?"many":2==e?"two":1==e?"one":"other"},18:function(e){return 0===e?"zero":Q(e,0,2)&&0!==e&&2!=e?"one":"other"},19:function(e){return Q(e,2,10)?"few":Q(e,0,1)?"one":"other"},20:function(e){return!Q(e%10,3,4)&&e%10!=9||Q(e%100,10,19)||Q(e%100,70,79)||Q(e%100,90,99)?e%1e6==0&&0!==e?"many":e%10!=2||V(e%100,[12,72,92])?e%10!=1||V(e%100,[11,71,91])?"other":"one":"two":"few"},21:function(e){return 0===e?"zero":1==e?"one":"other"},22:function(e){return Q(e,0,1)||Q(e,11,99)?"one":"other"},23:function(e){return Q(e%10,1,2)||e%20==0?"one":"other"},24:function(e){return Q(e,3,10)||Q(e,13,19)?"few":V(e,[2,12])?"two":V(e,[1,11])?"one":"other"}},S={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[w.replace(/-.*$/,"")];return S in te?te[S]:(console.warn("plural form unknown for ["+w+"]"),function(){return"other"})}(O));var S="["+p._pluralRules(te)+"]";return 0===te&&V+"[zero]"in d?w=d[V+"[zero]"][Q]:1==te&&V+"[one]"in d?w=d[V+"[one]"][Q]:2==te&&V+"[two]"in d?w=d[V+"[two]"][Q]:V+S in d?w=d[V+S][Q]:V+"[other]"in d&&(w=d[V+"[other]"][Q]),w},{get:function(w,I,V){var S,Q=w.lastIndexOf("."),te=C;Q>0&&(te=w.substring(Q+1),w=w.substring(0,Q)),V&&((S={})[te]=V);var e=F(w,I,S);return e&&te in e?e[te]:"{{"+w+"}}"},getData:function(){return d},getText:function(){return A},getLanguage:function(){return O},setLanguage:function(w,I){x(w,function(){I&&I()})},getDirection:function(){var I=O.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(I)>=0?"rtl":"ltr"},translate:function B(w){for(var I=function f(w){return w?w.querySelectorAll("*[data-l10n-id]"):[]}(w=w||t.documentElement),V=I.length,Q=0;Q<V;Q++)P(I[Q]);P(w)},getReadyState:function(){return l},ready:function(w){w&&("complete"==l||"interactive"==l?L.setTimeout(function(){w()}):t.addEventListener&&t.addEventListener("localized",function I(){t.removeEventListener("localized",I),w()}))}}}(window,document)},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFindController=t.FindState=void 0;var d=v(6),A=v(3),C=v(21);const O={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=O;const h={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},m=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),f=[...m.values()].map(T=>String.fromCharCode(T)).join(""),i=/\p{M}+/gu,s=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,_=/([^\p{M}])\p{M}*$/u,x=/^\p{M}*([^\p{M}])/u;let E=null;function k(T){if(!E){const e=Object.keys(h).join("");E=new RegExp(`([${e}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const P=[];let R;for(;null!==(R=i.exec(T));)P.push([R[0].length,R.index]);let B=T.normalize("NFD");const w=[[0,0]];let I=0,V=0,Q=0,te=0,S=!1;return B=B.replace(E,(e,n,o,g,u,b)=>{if(b-=Q,n){const M=h[e],W=M.length;for(let j=1;j<W;j++)w.push([b-V+j,V-j]);return V-=W-1,M}if(o){const M=o.endsWith("\n"),W=M?o.length-2:o.length;S=!0;let j=W;b+te===P[I]?.[1]&&(j-=P[I][0],++I);for(let q=1;q<j+1;q++)w.push([b-1-V+q,V-q]);return V-=j,Q+=j,M?(w.push([(b+=W-1)-V+1,1+V]),V+=1,Q+=1,te+=1,o.slice(0,W)):o}return g?(w.push([b-V+1,1+V]),V+=1,Q+=1,te+=1,g.charAt(0)):(w.push([b-V+1,V-1]),V-=1,Q+=1,te+=1," ")}),w.push([B.length,V]),[B,w,S]}function F(T,P,R){if(!T)return[P,R];const B=P,w=P+R;let I=(0,d.binarySearchFirstItem)(T,Q=>Q[0]>=B);T[I][0]>B&&--I;let V=(0,d.binarySearchFirstItem)(T,Q=>Q[0]>=w,I);return T[V][0]>w&&--V,[B+T[I][1],R+T[V][1]-T[I][1]]}t.PDFFindController=class c{constructor({linkService:P,eventBus:R}){this._linkService=P,this._eventBus=R,this.#t(),R._on("find",this.#e.bind(this)),R._on("findbarclose",this.#b.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(P){this._pdfDocument&&this.#t(),P&&(this._pdfDocument=P,this._firstPageCapability.resolve())}#e(P){if(!P)return;const R=this._pdfDocument,{type:B}=P;(null===this._state||this.#r(P))&&(this._dirtyMatch=!0),this._state=P,"highlightallchange"!==B&&this.#p(O.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||R&&this._pdfDocument!==R)return;this.#_();const w=!this._highlightMatches,I=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),B?this._dirtyMatch?this.#o():"again"===B?(this.#o(),w&&this._state.highlightAll&&this.#a()):"highlightallchange"===B?(I?this.#o():this._highlightMatches=!0,this.#a()):this.#o():this._findTimeout=setTimeout(()=>{this.#o(),this._findTimeout=null},250)})}scrollMatchIntoView({element:P=null,selectedLeft:R=0,pageIndex:B=-1,matchIndex:w=-1}){this._scrollMatches&&P&&-1!==w&&w===this._selected.matchIdx&&-1!==B&&B===this._selected.pageIdx&&(this._scrollMatches=!1,(0,d.scrollIntoView)(P,{top:-50,left:R+-400},!0))}#t(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,A.createPromiseCapability)()}get#n(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=k(this._state.query)),this._normalizedQuery}#r(P){if(P.query!==this._state.query)return!0;switch(P.type){case"again":const R=this._selected.pageIdx+1,B=this._linkService;return R>=1&&R<=B.pagesCount&&R!==B.page&&!B.isPageVisible(R);case"highlightallchange":return!1}return!0}#h(P,R,B){let w=P.slice(0,R).match(_);if(w){const I=P.charCodeAt(R),V=w[1].charCodeAt(0);if((0,C.getCharacterType)(I)===(0,C.getCharacterType)(V))return!1}if(w=P.slice(R+B).match(x),w){const I=P.charCodeAt(R+B-1),V=w[1].charCodeAt(0);if((0,C.getCharacterType)(I)===(0,C.getCharacterType)(V))return!1}return!0}#l(P,R,B,w){const I=[],V=[],Q=this._pageDiffs[B];let te;for(;null!==(te=P.exec(w));){if(R&&!this.#h(w,te.index,te[0].length))continue;const[S,e]=F(Q,te.index,te[0].length);e&&(I.push(S),V.push(e))}this._pageMatches[B]=I,this._pageMatchesLength[B]=V}#i(P,R){const{matchDiacritics:B}=this._state;let w=!1;const I="[ ]*";return(P=P.replace(s,(V,Q,te,S,e,n)=>Q?`[ ]*\\${Q}[ ]*`:te?`[ ]*${te}[ ]*`:S?"[ ]+":B?e||n:e?m.has(e.charCodeAt(0))?e:"":R?(w=!0,`${n}\\p{M}*`):n)).endsWith(I)&&(P=P.slice(0,P.length-I.length)),B&&R&&(w=!0,P=`${P}(?=[${f}]|[^\\p{M}]|$)`),[w,P]}#g(P){let R=this.#n;if(0===R.length)return;const{caseSensitive:B,entireWord:w,phraseSearch:I}=this._state,V=this._pageContents[P],Q=this._hasDiacritics[P];let te=!1;if(I)[te,R]=this.#i(R,Q);else{const n=R.match(/\S+/g);n&&(R=n.sort().reverse().map(o=>{const[g,u]=this.#i(o,Q);return te||=g,`(${u})`}).join("|"))}R=new RegExp(R,`g${te?"u":""}${B?"":"i"}`),this.#l(R,w,P,V),this._state.highlightAll&&this.#s(P),this._resumePageIdx===P&&(this._resumePageIdx=null,this.#d());const e=this._pageMatches[P].length;e>0&&(this._matchesCountTotal+=e,this.#A())}#_(){if(this._extractTextPromises.length>0)return;let P=Promise.resolve();for(let R=0,B=this._linkService.pagesCount;R<B;R++){const w=(0,A.createPromiseCapability)();this._extractTextPromises[R]=w.promise,P=P.then(()=>this._pdfDocument.getPage(R+1).then(I=>I.getTextContent()).then(I=>{const V=[];for(const Q of I.items)V.push(Q.str),Q.hasEOL&&V.push("\n");[this._pageContents[R],this._pageDiffs[R],this._hasDiacritics[R]]=k(V.join("")),w.resolve()},I=>{console.error(`Unable to get text content for page ${R+1}`,I),this._pageContents[R]="",this._pageDiffs[R]=null,this._hasDiacritics[R]=!1,w.resolve()}))}}#s(P){this._scrollMatches&&this._selected.pageIdx===P&&(this._linkService.page=P+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:P})}#a(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#o(){const P=this._state.findPrevious,R=this._linkService.page-1,B=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=R,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this.#a();for(let I=0;I<B;I++)this._pendingFindMatches.has(I)||(this._pendingFindMatches.add(I),this._extractTextPromises[I].then(()=>{this._pendingFindMatches.delete(I),this.#g(I)}))}if(""===this.#n)return void this.#p(O.FOUND);if(this._resumePageIdx)return;const w=this._offset;if(this._pagesToSearch=B,null!==w.matchIdx){const I=this._pageMatches[w.pageIdx].length;if(!P&&w.matchIdx+1<I||P&&w.matchIdx>0)return w.matchIdx=P?w.matchIdx-1:w.matchIdx+1,void this.#c(!0);this.#f(P)}this.#d()}#u(P){const R=this._offset,B=P.length,w=this._state.findPrevious;return B?(R.matchIdx=w?B-1:0,this.#c(!0),!0):(this.#f(w),!!(R.wrapped&&(R.matchIdx=null,this._pagesToSearch<0))&&(this.#c(!1),!0))}#d(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let P=null;do{const R=this._offset.pageIdx;if(P=this._pageMatches[R],!P){this._resumePageIdx=R;break}}while(!this.#u(P))}#f(P){const R=this._offset,B=this._linkService.pagesCount;R.pageIdx=P?R.pageIdx-1:R.pageIdx+1,R.matchIdx=null,this._pagesToSearch--,(R.pageIdx>=B||R.pageIdx<0)&&(R.pageIdx=P?B-1:0,R.wrapped=!0)}#c(P=!1){let R=O.NOT_FOUND;const B=this._offset.wrapped;if(this._offset.wrapped=!1,P){const w=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,R=B?O.WRAPPED:O.FOUND,-1!==w&&w!==this._selected.pageIdx&&this.#s(w)}this.#p(R,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#s(this._selected.pageIdx))}#b(P){const R=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||R&&this._pdfDocument!==R||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#p(O.FOUND),this._highlightMatches=!1,this.#a())})}#m(){const{pageIdx:P,matchIdx:R}=this._selected;let B=0,w=this._matchesCountTotal;if(-1!==R){for(let I=0;I<P;I++)B+=this._pageMatches[I]?.length||0;B+=R+1}return(B<1||B>w)&&(B=w=0),{current:B,total:w}}#A(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#m()})}#p(P,R=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:P,previous:R,matchesCount:this.#m(),rawQuery:this._state?.query??null})}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterType=void 0,t.getCharacterType=function i(s){return function d(s){return s<11904}(s)?function A(s){return 0==(65408&s)}(s)?function p(s){return 32===s||9===s||13===s||10===s}(s)?v.SPACE:function C(s){return s>=97&&s<=122||s>=65&&s<=90}(s)||function O(s){return s>=48&&s<=57}(s)||95===s?v.ALPHA_LETTER:v.PUNCT:function f(s){return 3584==(65408&s)}(s)?v.THAI_LETTER:160===s?v.SPACE:v.ALPHA_LETTER:function l(s){return s>=13312&&s<=40959||s>=63744&&s<=64255}(s)?v.HAN_LETTER:function y(s){return s>=12448&&s<=12543}(s)?v.KATAKANA_LETTER:function h(s){return s>=12352&&s<=12447}(s)?v.HIRAGANA_LETTER:function m(s){return s>=65376&&s<=65439}(s)?v.HALFWIDTH_KATAKANA_LETTER:v.ALPHA_LETTER};const v={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};t.CharacterType=v},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFHistory=void 0,t.isDestArraysEqual=m,t.isDestHashesEqual=h;var d=v(6),A=v(17);function l(){return document.location.hash}function h(f,i){return"string"==typeof f&&"string"==typeof i&&(f===i||(0,d.parseQueryString)(f).get("nameddest")===i)}function m(f,i){function s(_,x){if(typeof _!=typeof x||Array.isArray(_)||Array.isArray(x))return!1;if(null!==_&&"object"==typeof _&&null!==x){if(Object.keys(_).length!==Object.keys(x).length)return!1;for(const E in _)if(!s(_[E],x[E]))return!1;return!0}return _===x||Number.isNaN(_)&&Number.isNaN(x)}if(!Array.isArray(f)||!Array.isArray(i)||f.length!==i.length)return!1;for(let _=0,x=f.length;_<x;_++)if(!s(f[_],i[_]))return!1;return!0}t.PDFHistory=class y{constructor({linkService:i,eventBus:s}){this.linkService=i,this.eventBus=s,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",_=>{this._isPagesLoaded=!!_.pagesCount},{once:!0})})}initialize({fingerprint:i,resetHistory:s=!1,updateUrl:_=!1}){if(!i||"string"!=typeof i)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const x=""!==this._fingerprint&&this._fingerprint!==i;this._fingerprint=i,this._updateUrl=!0===_,this._initialized=!0,this._bindEvents();const E=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=l(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(E,!0)||s){const{hash:F,page:c,rotation:T}=this._parseCurrentHash(!0);return!F||x||s?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:F,page:c,rotation:T},!0)}const k=E.destination;this._updateInternalState(k,E.uid,!0),void 0!==k.rotation&&(this._initialRotation=k.rotation),k.dest?(this._initialBookmark=JSON.stringify(k.dest),this._destination.page=null):k.hash?this._initialBookmark=k.hash:k.page&&(this._initialBookmark=`page=${k.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:i=null,explicitDest:s,pageNumber:_}){if(!this._initialized)return;if(i&&"string"!=typeof i)return void console.error(`PDFHistory.push: "${i}" is not a valid namedDest parameter.`);if(!Array.isArray(s))return void console.error(`PDFHistory.push: "${s}" is not a valid explicitDest parameter.`);if(!this._isValidPage(_)&&(null!==_||this._destination))return void console.error(`PDFHistory.push: "${_}" is not a valid pageNumber parameter.`);const x=i||JSON.stringify(s);if(!x)return;let E=!1;if(this._destination&&(h(this._destination.hash,x)||m(this._destination.dest,s))){if(this._destination.page)return;E=!0}this._popStateInProgress&&!E||(this._pushOrReplaceState({dest:s,hash:x,page:_,rotation:this.linkService.rotation},E),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(i){if(this._initialized){if(!this._isValidPage(i))return void console.error(`PDFHistory.pushPage: "${i}" is not a valid page number.`);this._destination?.page!==i&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${i}`,page:i,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const i=window.history.state;this._isValidState(i)&&i.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const i=window.history.state;this._isValidState(i)&&i.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(i,s=!1){const _=s||!this._destination,x={fingerprint:this._fingerprint,uid:_?this._uid:this._uid+1,destination:i};let E;if(this._updateInternalState(i,x.uid),this._updateUrl&&i?.hash){const k=document.location.href.split("#")[0];k.startsWith("file://")||(E=`${k}#${i.hash}`)}_?window.history.replaceState(x,"",E):window.history.pushState(x,"",E)}_tryPushCurrentPosition(i=!1){if(!this._position)return;let s=this._position;if(i&&(s=Object.assign(Object.create(null),this._position),s.temporary=!0),!this._destination)return void this._pushOrReplaceState(s);if(this._destination.temporary)return void this._pushOrReplaceState(s,!0);if(this._destination.hash===s.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let _=!1;if(this._destination.page>=s.first&&this._destination.page<=s.page){if(void 0!==this._destination.dest||!this._destination.first)return;_=!0}this._pushOrReplaceState(s,_)}_isValidPage(i){return Number.isInteger(i)&&i>0&&i<=this.linkService.pagesCount}_isValidState(i,s=!1){if(!i)return!1;if(i.fingerprint!==this._fingerprint){if(!s)return!1;{if("string"!=typeof i.fingerprint||i.fingerprint.length!==this._fingerprint.length)return!1;const[_]=performance.getEntriesByType("navigation");if("reload"!==_?.type)return!1}}return!(!Number.isInteger(i.uid)||i.uid<0||null===i.destination||"object"!=typeof i.destination)}_updateInternalState(i,s,_=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),_&&i?.temporary&&delete i.temporary,this._destination=i,this._uid=s,this._maxUid=Math.max(this._maxUid,s),this._numPositionUpdates=0}_parseCurrentHash(i=!1){const s=unescape(l()).substring(1),_=(0,d.parseQueryString)(s),x=_.get("nameddest")||"";let E=0|_.get("page");return(!this._isValidPage(E)||i&&x.length>0)&&(E=null),{hash:s,page:E,rotation:this.linkService.rotation}}_updateViewarea({location:i}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:i.pdfOpenParams.substring(1),page:this.linkService.page,first:i.pageNumber,rotation:i.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:i}){const s=l(),_=this._currentHash!==s;if(this._currentHash=s,!i){this._uid++;const{hash:E,page:k,rotation:F}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:E,page:k,rotation:F},!0)}if(!this._isValidState(i))return;this._popStateInProgress=!0,_&&(this._blockHashChange++,(0,A.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const x=i.destination;this._updateInternalState(x,i.uid,!0),(0,d.isValidRotation)(x.rotation)&&(this.linkService.rotation=x.rotation),x.dest?this.linkService.goToDestination(x.dest):x.hash?this.linkService.setHash(x.hash):x.page&&(this.linkService.page=x.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFScriptingManager=void 0;var d=v(6),A=v(3);t.PDFScriptingManager=class C{constructor({eventBus:p,sandboxBundleSrc:l=null,scriptingFactory:y=null,docPropertiesLookup:h=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=p,this._sandboxBundleSrc=l,this._scriptingFactory=y,this._docPropertiesLookup=h,this._scriptingFactory||window.addEventListener("updatefromsandbox",m=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:m.detail})})}setViewer(p){this._pdfViewer=p}setDocument(p){var l=this;return r(function*(){if(l._pdfDocument&&(yield l._destroyScripting()),l._pdfDocument=p,!p)return;const[y,h,m]=yield Promise.all([p.getFieldObjects(),p.getCalculationOrderIds(),p.getJSActions()]);if(y||m){if(p===l._pdfDocument){try{l._scripting=l._createScripting()}catch(f){return console.error(`PDFScriptingManager.setDocument: "${f?.message}".`),void(yield l._destroyScripting())}l._internalEvents.set("updatefromsandbox",f=>{f?.source===window&&l._updateFromSandbox(f.detail)}),l._internalEvents.set("dispatcheventinsandbox",f=>{l._scripting?.dispatchEventInSandbox(f.detail)}),l._internalEvents.set("pagechanging",({pageNumber:f,previous:i})=>{f!==i&&(l._dispatchPageClose(i),l._dispatchPageOpen(f))}),l._internalEvents.set("pagerendered",({pageNumber:f})=>{!l._pageOpenPending.has(f)||f===l._pdfViewer.currentPageNumber&&l._dispatchPageOpen(f)}),l._internalEvents.set("pagesdestroy",function(){var f=r(function*(i){yield l._dispatchPageClose(l._pdfViewer.currentPageNumber),yield l._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),l._closeCapability?.resolve()});return function(i){return f.apply(this,arguments)}}()),l._domEvents.set("mousedown",f=>{l._mouseState.isDown=!0}),l._domEvents.set("mouseup",f=>{l._mouseState.isDown=!1});for(const[f,i]of l._internalEvents)l._eventBus._on(f,i);for(const[f,i]of l._domEvents)window.addEventListener(f,i,!0);try{const f=yield l._getDocProperties();if(p!==l._pdfDocument)return;yield l._scripting.createSandbox({objects:y,calculationOrder:h,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...f,actions:m}}),l._eventBus.dispatch("sandboxcreated",{source:l})}catch(f){return console.error(`PDFScriptingManager.setDocument: "${f?.message}".`),void(yield l._destroyScripting())}yield l._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield l._dispatchPageOpen(l._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{p===l._pdfDocument&&(l._ready=!0)})}}else yield l._destroyScripting()})()}dispatchWillSave(p){var l=this;return r(function*(){return l._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(p){var l=this;return r(function*(){return l._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(p){var l=this;return r(function*(){return l._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(p){var l=this;return r(function*(){return l._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,A.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,A.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,A.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,A.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(p){var l=this;return r(function*(){const y=l._pdfViewer.isInPresentationMode||l._pdfViewer.isChangingPresentationMode,{id:h,siblings:m,command:f,value:i}=p;if(!h){switch(f){case"clear":console.clear();break;case"error":console.error(i);break;case"layout":if(y)return;const _=(0,d.apiPageLayoutToViewerModes)(i);l._pdfViewer.spreadMode=_.spreadMode;break;case"page-num":l._pdfViewer.currentPageNumber=i+1;break;case"print":yield l._pdfViewer.pagesPromise,l._eventBus.dispatch("print",{source:l});break;case"println":console.log(i);break;case"zoom":if(y)return;l._pdfViewer.currentScaleValue=i;break;case"SaveAs":l._eventBus.dispatch("save",{source:l});break;case"FirstPage":l._pdfViewer.currentPageNumber=1;break;case"LastPage":l._pdfViewer.currentPageNumber=l._pdfViewer.pagesCount;break;case"NextPage":l._pdfViewer.nextPage();break;case"PrevPage":l._pdfViewer.previousPage();break;case"ZoomViewIn":if(y)return;l._pdfViewer.increaseScale();break;case"ZoomViewOut":if(y)return;l._pdfViewer.decreaseScale()}return}if(y&&p.focus)return;delete p.id,delete p.siblings;const s=m?[h,...m]:[h];for(const _ of s){const x=document.getElementById(_);x?x.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:p})):l._pdfDocument?.annotationStorage.setValue(_,p)}})()}_dispatchPageOpen(p,l=!1){var y=this;return r(function*(){const h=y._pdfDocument,m=y._visitedPages;if(l&&(y._closeCapability=(0,A.createPromiseCapability)()),!y._closeCapability)return;const f=y._pdfViewer.getPageView(p-1);if(f?.renderingState!==d.RenderingStates.FINISHED)return void y._pageOpenPending.add(p);y._pageOpenPending.delete(p);const i=r(function*(){const s=yield m.has(p)?null:f.pdfPage?.getJSActions();h===y._pdfDocument&&(yield y._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:p,actions:s}))})();m.set(p,i)})()}_dispatchPageClose(p){var l=this;return r(function*(){const y=l._pdfDocument,h=l._visitedPages;if(!l._closeCapability||l._pageOpenPending.has(p))return;const m=h.get(p);!m||(h.set(p,null),yield m,y===l._pdfDocument&&(yield l._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:p})))})()}_getDocProperties(){var p=this;return r(function*(){if(p._docPropertiesLookup)return p._docPropertiesLookup(p._pdfDocument);const{docPropertiesLookup:l}=v(24);return l(p._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,A.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:p}=v(24);return new p(this._sandboxBundleSrc)}_destroyScripting(){var p=this;return r(function*(){if(!p._scripting)return p._pdfDocument=null,void p._destroyCapability?.resolve();p._closeCapability&&(yield Promise.race([p._closeCapability.promise,new Promise(l=>{setTimeout(l,1e3)})]).catch(l=>{}),p._closeCapability=null),p._pdfDocument=null;try{yield p._scripting.destroySandbox()}catch{}for(const[l,y]of p._internalEvents)p._eventBus._off(l,y);p._internalEvents.clear();for(const[l,y]of p._domEvents)window.removeEventListener(l,y,!0);p._domEvents.clear(),p._pageOpenPending.clear(),p._visitedPages.clear(),p._scripting=null,delete p._mouseState.isDown,p._ready=!1,p._destroyCapability?.resolve()})()}}},(L,t,v)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericScripting=void 0,t.docPropertiesLookup=function A(p){return C.apply(this,arguments)};var d=v(3);function C(){return(C=r(function*(p){const y="".split("#")[0];let{info:h,metadata:m,contentDispositionFilename:f,contentLength:i}=yield p.getMetadata();if(!i){const{length:s}=yield p.getDownloadInfo();i=s}return{...h,baseURL:y,filesize:i,filename:f||(0,d.getPdfFilenameFromUrl)(""),metadata:m?.getRaw(),authors:m?.get("dc:creator"),numPages:p.numPages,URL:""}})).apply(this,arguments)}t.GenericScripting=class O{constructor(l){this._ready=(0,d.loadScript)(l,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(l){var y=this;return r(function*(){(yield y._ready).create(l)})()}dispatchEventInSandbox(l){var y=this;return r(function*(){const h=yield y._ready;setTimeout(()=>h.dispatchEvent(l),0)})()}destroySandbox(){var l=this;return r(function*(){(yield l._ready).nukeSandbox()})()}}}],U={};function X(L){var t=U[L];if(void 0!==t)return t.exports;var v=U[L]={exports:{}};return z[L](v,v.exports,X),v.exports}var $={};return(()=>{var L=$;Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return C.AnnotationLayerBuilder}}),Object.defineProperty(L,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return t.DefaultAnnotationLayerFactory}}),Object.defineProperty(L,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return t.DefaultStructTreeLayerFactory}}),Object.defineProperty(L,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return t.DefaultTextLayerFactory}}),Object.defineProperty(L,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return t.DefaultXfaLayerFactory}}),Object.defineProperty(L,"DownloadManager",{enumerable:!0,get:function(){return O.DownloadManager}}),Object.defineProperty(L,"EventBus",{enumerable:!0,get:function(){return p.EventBus}}),Object.defineProperty(L,"GenericL10n",{enumerable:!0,get:function(){return l.GenericL10n}}),Object.defineProperty(L,"LinkTarget",{enumerable:!0,get:function(){return v.LinkTarget}}),Object.defineProperty(L,"NullL10n",{enumerable:!0,get:function(){return y.NullL10n}}),Object.defineProperty(L,"PDFFindController",{enumerable:!0,get:function(){return h.PDFFindController}}),Object.defineProperty(L,"PDFHistory",{enumerable:!0,get:function(){return m.PDFHistory}}),Object.defineProperty(L,"PDFLinkService",{enumerable:!0,get:function(){return v.PDFLinkService}}),Object.defineProperty(L,"PDFPageView",{enumerable:!0,get:function(){return f.PDFPageView}}),Object.defineProperty(L,"PDFScriptingManager",{enumerable:!0,get:function(){return i.PDFScriptingManager}}),Object.defineProperty(L,"PDFSinglePageViewer",{enumerable:!0,get:function(){return A.PDFSinglePageViewer}}),Object.defineProperty(L,"PDFViewer",{enumerable:!0,get:function(){return A.PDFViewer}}),Object.defineProperty(L,"ProgressBar",{enumerable:!0,get:function(){return d.ProgressBar}}),Object.defineProperty(L,"SimpleLinkService",{enumerable:!0,get:function(){return v.SimpleLinkService}}),Object.defineProperty(L,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return s.StructTreeLayerBuilder}}),Object.defineProperty(L,"TextLayerBuilder",{enumerable:!0,get:function(){return _.TextLayerBuilder}}),Object.defineProperty(L,"XfaLayerBuilder",{enumerable:!0,get:function(){return x.XfaLayerBuilder}}),Object.defineProperty(L,"parseQueryString",{enumerable:!0,get:function(){return d.parseQueryString}});var t=X(1),v=X(5),d=X(6),A=X(10),C=X(2),O=X(16),p=X(17),l=X(18),y=X(4),h=X(20),m=X(22),f=X(12),i=X(23),s=X(7),_=X(8),x=X(9)})(),$})(),se.exports=X()},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{},7156:se=>{function a(r,z,U,X,$,L,t){try{var v=r[L](t),d=v.value}catch(A){return void U(A)}v.done?z(d):Promise.resolve(d).then(X,$)}se.exports=function D(r){return function(){var z=this,U=arguments;return new Promise(function(X,$){var L=r.apply(z,U);function t(d){a(L,X,$,t,v,"next",d)}function v(d){a(L,X,$,t,v,"throw",d)}t(void 0)})}},se.exports.__esModule=!0,se.exports.default=se.exports}}]);